function doCalculation(t,e,i){i||(i={}),void 0===i.replaceWithLoader&&(i.replaceWithLoader=!1),loadCtr=$("#loading-ctnr"),$(".field_error").removeClass("field_error");var s={};$.each($("#strat_"+t+" form").serializeArray(),(function(t,e){s[e.name]=e.value})),s.tabId=t;var a=validateCalcReq(s,e);if($("#t"+t+"_agree_tc").length>0&&void 0===$("#t"+t+"_agree_tc").attr("checked")&&(!1===a&&(a=[]),a.push("agree_tc_label")),a&&a.length)addMsg("Please complete all required fields"),highlightValErrors(t,a);else{var n=($("#t"+t+"_graph").html()||"").length>0,o=i.replaceWithLoader||!n;if($("#t"+t+"_graph-newTab").attr("checked"))"undefined"!=typeof fromClose&&_opcGaq.push(["_trackEvent","Tabs","Re-calc in new tab"]),newTab(!1,ajaxRequest("calculating results","calculate",s,doCalculation_return,{tab_num:t,noScroll:!1})),$.scrollTo("#top_menu",500);else $("#t"+t+"_submit").addClass("button--disabled"),$("#strat_"+t+" .submitInputs").addClass("submitInputs--loading"),$("#strat_"+t+" .results").css("opacity",.4),o&&($("#strat_"+t+" .summary .hint").html('<span class="loading">Calculating results</span>'),$.scrollTo("#load-anchor",500)),$(".popup").dialog("close"),ajaxRequest("calcuating results","calculate",s,doCalculation_return,{tab_num:t,noScroll:!o})}}function doCalculation_return(t,e){if((e.results.messages||[]).length&&e.results.messages.forEach((function(t){addMsg(t)})),$("#strat_"+t.tab_num+"_form").addClass("formComplete"),$("#strat_"+t.tab_num+" .submitInputs").removeClass("submitInputs--loading"),$("#strat_"+t.tab_num+" .results").css("opacity",1),$("#t"+t.tab_num+"_submit").removeClass("button--disabled"),$("#t"+t.tab_num+"_graph-newTab_holder").css("display",""),$("#"+t.tab_num+"_graph-priceMin-quick").val(roundTo(stripNonNumeric(e.results.graph_priceMin),2)),$("#t"+t.tab_num+"_graph-priceMin-val").val(roundTo(stripNonNumeric(e.results.graph_priceMin),2)),$("#"+t.tab_num+"_graph-priceMax-quick").val(roundTo(stripNonNumeric(e.results.graph_priceMax),2)),$("#t"+t.tab_num+"_graph-priceMax-val").val(roundTo(stripNonNumeric(e.results.graph_priceMax),2)),$("#t"+t.tab_num+"_graph-rangeAuto").val(e.results.graph_rangeAuto?"1":"0"),updateStratAdStickiness(),null!=e.newTab){var i=$("#strat_"+t.tab_num+" .results"),s=$("#strat_"+t.tab_num);$("#strat_"+t.tab_num).attr("id","strat_"+t.tab_num+"-to-remove"),e.oldTab.tabId=t.tab_num,newTab_return(t,e.oldTab,{show:!1}),$("#strat_"+t.tab_num+" .results").replaceWith(i),s.remove(),t.tab_num=e.newTab.tabId,newTab_return(t,e.newTab)}e.status==REQ_ERROR?(addMsg(e.desc),$("#t"+t.tab_num+"_summary").html("")):e.status==REQ_OK&&(results[t.tab_num]=e.results,_opcGaq.push(["_trackEvent","Calculation: "+e.results.strat,e.results.underlying_symb,e.tab_desc_long.desc.substring(e.results.underlying_symb.length+1)]),$("#strat_"+t.tab_num+"_button .name").html(e.tab_desc.desc+"<br/><span class='minor'>"+e.tab_desc.type+"</span>"),renderResults(t.tab_num,{noScroll:t.noScroll||!1}))}function getLoadingHtml(t){return"<span class='loading-wrapper'><em class='loading'>"+t+"</em></span>"}var loadingHtml=getLoadingHtml("Loading"),dotLoader='<div class="loaderDotCtnr"><span class="loaderDot loaderDot--white" /><span class="loaderDot loaderDot--white loaderDot--2" /><span class="loaderDot loaderDot--white loaderDot--3" /></div>',results=[],underlying_symb=[];function isDialogOpen(){return"block"===$(".ui-widget-overlay").css("display")}function avgPrice(t){var e,i=0;for(e=0;e<t.length;e++)i+=parseFloat(t[e]);return(Math.round(i/t.length*100)/100).toFixed(2)}function getBestPrice(t){return parseFloat(t.b)&&parseFloat(t.a)?(parseFloat(t.b)+parseFloat(t.a))/2:parseFloat(t.l)}function getDisValByType(t,e){var i;return"rawValue"!=t.graph_type&&"riskGraphRawValue"!=t.graph_type||(i=e/100),"price"==t.graph_type||"riskGraphPrice"==t.graph_type?i=t.initial.g+e:"roiRisk"==t.graph_type||"riskGraph"==t.graph_type?i=100*(t.initial.g+e)/(-t.initial.g-t.summary.maxrisk.g):"roiInit"!=t.graph_type&&"riskGraphInit"!=t.graph_type||(i=100*(t.initial.g+e)/-t.initial.g),isNaN(i)?"N/A":i}function colorByDis(t,e,i){return"K"==(t+"").substr(t.length-1)&&(t=1e3*parseFloat(t.substr(0,t.length-1))),"price"==i.graph_type||"rawValue"==i.graph_type?"u"===i.summary.maxrisk.g?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.initial.g+i.summary.maxprofit.g)))):i.summary.maxrisk.g+i.initial.g>=0?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.summary.maxprofit.g+i.initial.g)))):e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(-i.initial.g-i.summary.maxrisk.g)))):"roiRisk"==i.graph_type?e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):"roiInit"==i.graph_type?0==e?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):void 0}function fmtNumToFit(t){return isNaN(t)?"N/A":(t>=100||t<=-10?t=roundTo(t):t>=10||t>-10&&t<0?t=roundTo(t,1):t<10&&(t=roundTo(t,2)),t<=-1e3&&t>-1e4&&(t="<span class='neg'>-</span>"+-t),Math.abs(t)>=1e4&&(t=roundTo(t/1e3,1)+"K"),t)}function finder_targetting_onchange(t){const e=t.value;$("[id^=tFe1_priceWrapper-]").hide();var i=$("#tFe1_priceWrapper-priceFrom"),s=$("#tFe1_priceWrapper-priceFrom .inputLabel"),a=$("#tFe1_priceWrapper-priceTo"),n=$("#tFe1_priceWrapper-priceTo .inputLabel");switch(e){case"range":return i.show(),a.show(),s.text("Price from:"),void n.text("Price to:");case"gt":return i.show(),void s.text("Higher than:");case"lt":return a.show(),void n.text("Lower than:");case"single":default:return i.show(),void s.text("Target price:")}}$(document).ready((function(){$(".touch #current_calc_header").click((function(){$("#tab_holder_tabs").hasClass("--show")?($("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide()):(setTimeout((function(){$("#invisible_shield").bind("click",closeCurrentTabs)}),10),$("#tab_holder_tabs").addClass("--show"),$("#invisible_shield").show())})),$("#strat_F").length&&$("#top_menu .id-optionFinder, #strat_F_button").click((function(){return $("#calcs_holder .jq_exclusive_target").hide(),$("#top_but-calculator").hide(),$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-optionFinder)").removeClass("--active"),$("#top_menu .dialog_tab.id-optionFinder").addClass("--active"),$("#tab_holder_tabs .dialog_tab").removeClass("dialog_tab_selected"),$("#strat_F_button").addClass("dialog_tab_selected"),setTimeout((function(){$("#strat_F").show()}),100),!1})),$(".id-calculator a").click((function(){$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-calculator)").removeClass("--active"),$("#top_menu .dialog_tab.id-calculator").addClass("--active")})),updateStratAdStickiness()}));var OP_FINDER_ENDPOINT=V3_API_PATH+"/finder";function finder_getWriteVal(){var t=document.querySelector('input[name="tF_write"]:checked');return t&&"1"===t.value?1:0}function finder_find(){const t=$("#tF_submit");var e=$("#tFe0-symbol").val(),i=$("#tFe0-curPrice").val(),s=$("#finder_priceDirection").val(),a=$("#tFe1_input_price-from").val(),n=$("#tFe1_input_price-to").val(),o=$("#tFe0-ivHist").val();"lt"===s&&(n=a,a="");var r=$("[name=finder_dateStyle]:checked").val(),l=$("#tFe1_input_date-date").val(),h=$("#tFe1_input_expiry-expiry").val(),c=$("#tFe1_input_cost-cost").val(),u={"option-purchase":"checked"===$("#finder-strat-option-purchase").attr("checked")||0===$("#finder-strat-option-purchase").length,"short-option":"checked"===$("#finder-strat-short-option").attr("checked"),"credit-spread":"checked"===$("#finder-strat-credit-spread").attr("checked"),"debit-spread":"checked"===$("#finder-strat-debit-spread").attr("checked")},d=finder_getWriteVal(),p=[];if(renderError(""),e||p.push("Please enter a symbol"),i||p.push("Please enter the current price"),a||n||p.push("Please enter expected price"),"date"!==r||l||p.push("Please enter expected date"),"date"===r||h||p.push("Please enter expected date"),p.length>0)renderError(" - "+p.join("<br/> - "));else{var f={symbol:e,targetting:s,priceFrom:a,priceTo:n,date:"date"===r?l:h,specificExpiry:"expiry"===r?"1":"0",currentPrice:i,ivHist:o,budgetCost:d?"":c,dataFormat:"v2",strategies:u,sell:d};$.getJSON(OP_FINDER_ENDPOINT,f,(function(t){finder_find_return(t,{sell:d})})),t.attr("disabled","disabled"),t.html(dotLoader),t.val("Finding..."),$(".finder_results").html('<p style="text-align: center"><em>Finding you the best options</em></p>'),$(".finder_results").addClass("translucentLoading")}}function renderError(t){var e=$("#tFe1_results");e.html(""),e.append('<p class="txt_error">'+t+"</p>")}function renderIn_single_option_ele(t,e){t.append("<h3>"+e.title+": "+ucFirst(e.legsById.option.act)+" "+e.legsById.option.num+"x "+expDescFromYMD(e.legsById.option.expiry)+" "+formatPrice(e.legsById.option.strike)+" "+ucFirst(e.legsById.option.opType)+" @ "+formatPrice(e.legsById.option.price)+"</h3>")}function renderIn_spread_ele(t,e){t.append("<h3>"+e.title+": "+e.legsById.long.num+"x "+expDescFromYMD(e.legsById.long.expiry)+" "+e.legsById.long.strike+"/"+e.legsById.short.strike+" "+ucFirst(e.legsById.long.opType)+" @ "+formatPrice(e.legsById.long.price-e.legsById.short.price)+"</h3>")}function renderIn_summary(t,e){const i=e.init>0?"(credit)":"(debit)";t.append("<p>Entry cost: "+formatPrice(Math.abs(e.init))+" "+i+"</p>"),t.append('<p>Maximum risk<sup style="font-size: xx-small;">1</sup>: '+(null===e.maxRisk?"Infinite":formatPrice(Math.max(0,-e.maxRisk)))+"</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append('<p>Est. return<sup style="font-size: xx-small;">1</sup> at target price: '+formatPrice(e.net)+" ("+(e.netMargin?roundTo(100*e.roiMargin,1):roundTo(100*e.roiMaxRisk,1))+"%"+(e.netMargin?'<sup style="font-size: xx-small;">2</sup>':"")+")</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append("<p>Probability of profit: "+(null===e.pop?"N/A":roundTo(Math.max(.99,100*e.pop),1)+"% <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>"))}var v2stratMap={"long-call":"long-call","long-put":"long-put","short-call":"short-call","short-put":"short-put","bearish-call-credit-spread":"credit-spread","bearish-put-debit-spread":"put-spread","bullish-call-debit-spread":"call-spread","bullish-put-credit-spread":"credit-spread"};function finder_add_and_open(t){finder_add_to_calcs(t,{thenShow:!0})}function finder_add_to_calcs(t,e){e||(e={thenShow:!1});var i=$("<span />",{class:"loading"}),s={show:e.thenShow,spanEle:i};i.text("Opening calculation..."),$("[data-outcome-id="+t+"] a.button").replaceWith(i);var a=((outcomes[t]||{}).vars||{}).strat||{},n={strat:v2stratMap[a.metadata.stratKey],"underlying-symbol":$("#tFe0-symbol").val(),"underlying-curPrice":$("#tFe0-curPrice").val(),"underlying-marketPrice":$("#tFe0-marketPrice").val(),"underlying-lastPrice":$("#tFe0-lastPrice").val(),"underlying-ivHist":$("#tFe0-ivHist").val(),"graph-rangeAuto":"1","graph-type":"roiRisk","graph-date":""};Object.keys(a.legsById).map((function(t){"option"===a.legsById[t].type&&(n[t+"-act"]=a.legsById[t].act,n[t+"-price"]=a.legsById[t].price,n[t+"-curPrice"]=a.legsById[t].curPrice,n[t+"-num"]=a.legsById[t].num,n[t+"-opType"]=a.legsById[t].opType[0],n[t+"-expiry"]=a.legsById[t].expiry,n[t+"-strike"]=a.legsById[t].strike,n[t+"-iv"]=a.legsById[t].iv)}));ajaxRequest("adding calculation","newTab",n,doFinder_newTab_return,{values:n,showCfg:s})}function doFinder_newTab_return(t,e){var i=Object.assign(t.values,{tabId:e.tabId,stratKey:t.values.strat});ajaxRequest("adding calculation","calculate",i,doFinder_calculation_return,{tabReturnData:e,showCfg:t.showCfg})}var tabsFromFinder=[],outcomes;function doFinder_calculation_return(t,e){t.showCfg.spanEle.text(" (added)"),t.showCfg.spanEle.removeClass("loading");var i=$("<a />",{class:"button button--outline smallButton"});i.text("Open calculation"),i.click((function(e){$("#strat_"+t.tabReturnData.tabId+"_button .jq_exclusive_switch_flash").click()})),t.showCfg.spanEle.prepend(i),tabsFromFinder[t.tabReturnData.tabId]=!0,newTab_return({},t.tabReturnData,t.showCfg),doCalculation_return({tab_num:t.tabReturnData.tabId},e)}function render_finder_results(t,e){var i=$("#tFe1_results");i.removeClass("translucentLoading"),i.html(""),(outcomes=t||[]).length?(i.append('<h2 style="margin-bottom: 0.3em">Top 5 options</h2>'),i.append('<p style="margin-bottom: 1em" class="minor">Sorted by % ROI of max risk (or % ROI initial collateral, for naked options)</p>'),outcomes.map((function(t,e){var s=$("<div />",{class:"finder_result","data-outcome-id":e}),a=((t||{}).vars||{}).strat;a&&(["long-put","long-call","short-put","short-call"].indexOf(a.metadata.stratKey)>=0&&renderIn_single_option_ele(s,a),["bearish-call-credit-spread","bullish-put-credit-spread","bearish-put-debit-spread","bullish-call-debit-spread"].indexOf(a.metadata.stratKey)>=0&&renderIn_spread_ele(s,a),renderIn_summary(s,t),s.append('<p class="finder__add-class"><a href="#" class="button smallButton button--outline" onclick="finder_add_and_open('+e+'); return false;">View detailed estimates</a></p>'),s.appendTo(i))})),i.append('<p class="minor"><sup>1</sup>Subject to changes in Implied Volatility for options with time left til expiry.</p>')):i.append('<p class="txt_error">Could not find any profitable call or put options for that target price and date.</p>')}function finder_updateStratPref(t){setCookie("finder_strat_"+t.name,t.checked?"1":"0",{expiry_days:365}),t.name}function finder_changeTargetPrice(){var t=$("#tFe1_input_price-from").val(),e=$("#tFe0-curPrice").val(),i=$("#finder_priceDirection").val(),s=parseFloat(t)>parseFloat(e);if("eq"===i?$("#finder_priceDirection").addClass("selectPlaceholder"):$("#finder_priceDirection").removeClass("selectPlaceholder"),s&&"lt"===i||!s&&"gt"===i){var a=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),$("#finder-strat-short-option").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),setCookie("finder_strat_option-purchase",a,{expiry_days:365}),setCookie("finder_strat_short-option",n,{expiry_days:365})}else{a=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked","0"!==a&&"checked").attr("disabled",!1).parent().removeClass("disabled"),$("#finder-strat-short-option").attr("checked","1"===n&&"checked").attr("disabled",!1).parent().removeClass("disabled")}$("#finder_long_opType").text(s?"call":"put"),$("#finder_short_opType").text(s?"put":"call")}function finder_find_return(t,e){const i=$("#tF_submit");i.attr("disabled",!1),i.html("Find options");var s=((t||{}).data||{}).outcomes;s?render_finder_results(s,e):addMsg("Options Finder is currently experiencing some issues")}function finder_options_loaded(t,e,i){var s=Object.keys(opCache[e.symbol]).filter((function(t){return"_data_source"!==t})),a=$("#tFe1_input_expiry-expiry");a[0].innerHTML='<option value="" disabled selected>—Select—</option>',s.forEach((function(t){a.append('<option value="'+t+'">'+t+"</option>")}))}function finder_changeDateType(t){$("input[name='finder_dateStyle'][value="+t+"]").click(),"expiry"===t?$("#tFe1_input_date-date").val(""):"date"===t&&$("#tFe1_input_expiry-expiry").val(""),$("#tFe1_input_date-date, #tFe1_input_expiry-expiry").addClass("appearDisabled"),$("#tFe1_input_"+t+"-"+t).removeClass("appearDisabled")}function finder_getDateFromExpiry(){$("#tFe1_input_date-date").val(""),finder_changeDateType("expiry")}function finder_resetExpiryDate(){$("#tFe1_input_expiry-expiry").val("")}function finder_clear_form(){($("#tFe0-symbol").val()||"").toUpperCase();$("#tFe1_input_price-from").val(""),$("#tFe1_input_date-date").val(""),finder_resetExpiryDate()}function finder_updatePreference(){var t=1===finder_getWriteVal();$("#tFe1_input_cost-cost").attr("disabled",t),t?$("#tF_budgetGroup").slideUp(100):$("#tF_budgetGroup").slideDown(100),setCookie("finderShortPreferred",t,{})}function ele_option_listen(t,e,i){if("underlying_symbol"==t)$("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-marketPrice").val(""),$("#"+i.ele_id+"-lastPrice").val(""),$("#"+i.ele_id+"-strike").val(""),$("#"+i.ele_id+"-expiry").val(""),$("#"+i.ele_id+"-option_selector").html(loadingHtml),$("#"+i.ele_id+"-opDesc").text(""),$("#"+i.ele_id+"-opDesc").removeClass("option-description--has-content"),$("#"+i.ele_id+"-option .select-button--full").removeClass("select-button--hidden"),$("#"+i.ele_id+"-option .select-button--compressed").addClass("select-button--hidden"),$("#"+i.ele_id+"-iv").val(""),getOptions({eleId:i.ele_id,uEleId:e.ele_id});else if("underlying_num"==t){var s=Math.round(parseInt($("#"+e.ele_id+"-num").val())/100);isNaN(s)&&(s=""),$("#"+i.ele_id+"-num").val(s)}else if("option_num"==t){if(null!=i.linked_ele&&i.linked_ele==e.ele_name)(i.strict||$("#"+i.ele_id+"-num").val()==i.default_num)&&$("#"+i.ele_id+"-num").val($("#"+e.ele_id+"-num").val()*i.link_ratio)}else"option"==t&&($("#"+i.ele_id+"-iv").val(""),""==$("#"+i.ele_id+"-expiry").val()&&$("#"+i.ele_id+"-expiry").val($("#"+e.ele_id+"-expiry").val()));if("option_price"==t||"option_num"==t){var a=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();if($("#"+e.ele_id+"-cost").val(isNaN(a)?"":commaVal(roundTo(100*a,2,!0))),triggerListener("option_cost",e),null!=i.linked_ele&&i.linked_ele==e.ele_name){a=$("#"+i.ele_id+"-num").val()*$("#"+i.ele_id+"-price").val();$("#"+i.ele_id+"-cost").val(isNaN(a)?"":commaVal(roundTo(100*a,2,!0)))}}}function ele_spread_listen(t,e,i){var s=0,a=!1;for(var n in i.op_ele_ids)s+=$("#"+i.op_ele_ids[n]+"-price").val()*($("#"+i.op_ele_ids[n]+"-num").val()||1)*("sell"==$("#"+i.op_ele_ids[n]+"-act").val()?1:-1),!1===a?a=$("#"+i.op_ele_ids[n]+"-num").val():a!==$("#"+i.op_ele_ids[n]+"-num").val()&&(a=-1);$("[for="+i.ele_id+"-spread]").text(-1===a?"Trade cost:":"Spread price:");var o=-1===a?100*s:s;$("#"+i.ele_id+"-spread").html(roundTo(o,2,!0)+" (net "+(s>=0?"credit":"debit")+")"),$("#"+i.ele_id+"-spread").css("color",s>=0?"black":"red")}function ele_stockAndUnderling_listen(t,e,i){"underlying_symbol"==t?($("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-curPrice").val(""),$("#"+i.ele_id+"-marketPrice").val(""),$("#"+i.ele_id+"-lastPrice").val(""),$("#"+i.ele_id+"-ivHist").val(""),$("#"+i.ele_id+"-updatePriceTime").val(""),getPrice({eleId:i.ele_id,button:i.ele_id+"-loading"}),triggerListener("underlying_price",e)):"underlying_price"==t&&console.log("*"),triggerListener("underlying",e,i)}function ele_stock_listen(t,e,i){if("underlying_price"==t||"underlying_num"==t){var s=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();$("#"+e.ele_id+"-cost").val(isNaN(s)?"":commaVal(roundTo(s,2,!0))),triggerListener("underlying_cost",e)}ele_stockAndUnderling_listen(t,e,i)}function ele_underlying_listen(t,e,i){ele_stockAndUnderling_listen(t,e,i)}function graph_price_range_listen(t,e,i){$("#t"+i.tab_num+"_graph-rangeAuto").val("0"),$("#t"+i.tab_num+"_graph-rangeShouldUpdate").val("1"),$("#t"+i.tab_num+"_graph-rangeUpdate").css("visibility","visible")}function graph_listen(t,e,i){"underlying_symbol"==t&&($("#t"+i.tab_num+"_graph-date").val(""),$("#t"+i.tab_num+"_graph-priceMin-val").val(""),$("#t"+i.tab_num+"_graph-priceMax-val").val(""),$("#"+i.tab_num+"_graph-priceMin-quick").val(""),$("#"+i.tab_num+"_graph-priceMax-quick").val(""))}function ivChangeOnFocus(t){var e,i=parseFloat($("#t"+t+"_ivChange-val").val());$("#t"+t+"_ivChange--input").val(i>0?"+"+i:i),$("#t"+t+"_ivSlider").slider("value",i),$("#t"+t+"_ivSlider--updateBtn").css("visibility","hidden"),$("#t"+t+"_ivChangeCard").fadeIn(100),e=function(i){i.target.id==="t"+t+"_ivChangeCard"||$(i.target).parents("#t"+t+"_ivChangeCard").length||($("#t"+t+"_ivChangeCard").fadeOut(100),$(document).off("click",e))},setTimeout((function(){$(document).on("click",e),$("#t"+t+"_ivChange--input").focus()}),30)}function ivChangeOnKeyup(t,e,i){i||$("#t"+t+"_ivSlider").slider("value",parseFloat(e))}function ivSetVal(t,e){var i=e>0?"+"+e:e;$("#t"+t+"_ivSlider").slider("value",e),$("#t"+t+"_ivChange--input").val(i),ivChangeChkUpdateNeeded(t)}function ivChangeChkUpdateNeeded(t){var e=$("#t"+t+"_ivChange--input").val(),i=$("#t"+t+"_ivChange-val").val();parseFloat(e||"0")!==parseFloat(i||"0")?$("#t"+t+"_ivSlider--updateBtn").css("visibility","visible"):$("#t"+t+"_ivSlider--updateBtn").css("visibility","hidden")}function ivChangeUpdate(t){$("#t"+t+"_ivChange-val").val(parseFloat($("#t"+t+"_ivChange--input").val())||"0"),$("#t"+t+"_submit").click()}function getSharingCode(t){return"<div class='shareHolder'>\n  <span>Share this on:</span>\n  <div class='shareMenu'>\n    <a href='#' onclick='loadShare({type:\"fb\", tab_num:"+t+", link_ele:this}); return false;' title='Share this calculation on facebook' class='facebook shareIcon'>Facebook</a>\n    <a href='#' onclick='loadShare({type:\"tw\", tab_num:"+t+", link_ele:this}); return false;' title='Tweet this calculation on twitter' class='twitter shareIcon'>Tweet this</a>\n    or <a href='#' onclick='loadShare({type:\"link\", tab_num:"+t+", link_ele:this}); return false;' title='Short-link' class='link subtle'>Get short-link to share</a>\n  </div>\n  <div class='sharePanel'></div>\n</div>"}function loadShare(t){if("link"==t.type){$(t.link_ele).parent().addClass("active").addClass(t.type);var e=$(".sharePanel",$(t.link_ele).parent().parent());e.show()}if(null!=results[t.tab_num].link_code)t.link_code=results[t.tab_num].link_code,
//!!! send request to update the saved tab
showShare(t);else if("link"==t.type){e.html("<P>"+getLoadingHtml("Getting link")+"</P>");ajaxRequest("getting share link","linkCode",{tab_num:t.tab_num},loadShare_return,t)}else window.open(WEB_PATH+"share.html?m="+t.type+"&t="+t.tab_num,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function loadShare_return(t,e){results[t.tab_num].link_code=e.link_code,$(t.addThis_ele).click(),t.link_code=e.link_code,showShare(t)}function showShare(t){var e,i=[["Check out this ",""],[""," is looking good"],["This "," is worth watching"],[""," worth keeping an eye on"],["Nice ",""]],s=Math.floor(Math.random()*i.length),a=i[s][0]+results[curTab].underlying_symb+" "+{"covered-call":"Covered Call","long-call":"Long call","short-call":"Naked call","long-put":"Long put","short-put":"Naked put","call-spread":"Call Spread","put-spread":"Put Spread","calendar-spread":"Calendar Spread",straddle:"Straddle",collar:"Collar","iron-condor":"Iron Condor",butterfly:"Butterfly"}[results[curTab].strat]+i[s][1],n=$(".sharePanel",$(t.link_ele).parent().parent());if("fb"==t.type?e="https://www.facebook.com/sharer.php?u="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code):"tw"==t.type?e="https://twitter.com/intent/tweet?status="+encodeURIComponent(a)+": "+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"+via+@opcalc&url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"&via=opcalc":"link"==t.type?n.html('<P>Copy this link to share via email, forums or other sharing services:</p><p><input type="text" style="font-weight:bold; width:100%;" value="'+BASE_SHORT_URL+WEB_PATH+t.link_code+'"/></p>'):"gg"==t.type&&(e="https://plus.google.com/share?url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)),e)window.open(e,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function getLinkBut(t){return $(".linkBox",$(t).parent()).slideDown()}function closeLinkBox(t){return $(t).parent().slideUp()}function validateCalcReq(t,e){var i=[];for(var s in t)""===t[s]&&(s.indexOf("-num")>0||s.indexOf("-strike")>0||s.indexOf("underlying-curPrice")>=0||s.indexOf("-expiry")>0||s.indexOf("-opType")>0||s.indexOf("-price")>0&&-1===s.indexOf("-priceMin")&&-1===s.indexOf("-priceMax"))&&(i[i.length]=s);return i}function highlightValErrors(t,e){var i="";for(var s in e){if(e[s].indexOf("-strike")>0||e[s].indexOf("-opType")>0||e[s].indexOf("-expiry")>0)i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s].slice(0,e[s].lastIndexOf("-"))+'-option"] .panel_button';else i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s]+'"]'}$(i).each((function(){$(this).addClass("field_error")}))}function updateStratAdStickiness(){var t=curTab,e=$(".ad.strat").innerWidth(),i=$("#content_holder_inner").innerWidth(),s=$("#t"+t+"_graph .graph").innerWidth()||$("#t"+t+"_graph .google_chart_holder").innerWidth(),a=$("#t"+t+"_summary").innerWidth(),n=Math.max(s,a)+e+15<i;$("#content_right").css("height",$("#strat_"+t+"_form").innerHeight()-(n?0:$("#t"+t+"_graph").innerHeight()))}function hideLoaderShowGraph(t){loadCtr.css("visibility","hidden"),$("#t"+t+"_submit").text("Calculate"),$("#t"+t+" .results").show()}function getTabNo(t){var e=null,i=t.match(/^t(\d*?)e/);return i&&2===i.length&&(e=parseInt(i[1],10)),e}function onAdChange(t,e){if(!!e||(t||[]).filter((function(t){return t.addedNodes.length>0})).length>0){var i=$(t[0].target).closest(".ad");(!i.css("minHeight")||i.height()>parseFloat(i.css("minHeight")))&&i.css("minHeight",i.height()+"px")}}function updatePriceRange(t){$("#t"+t+"_graph-priceMin-val").val($("#"+t+"_graph-priceMin-quick").val()),$("#t"+t+"_graph-priceMax-val").val($("#"+t+"_graph-priceMax-quick").val()),$("#t"+t+"_submit").click()}function graphRangeChange(t,e,i){i.relatedTarget&&"priceRange"!==(i.relatedTarget.attributes["data-app-inputset"]||{}).value&&$("#t"+e+"_graph-rangeShouldUpdate").val("1"),$("#t"+e+"_graph-rangeShouldUpdate").val("0")}function changeOutputType(t,e){var i,s;"vis"===t?(i=$("#t"+curTab+"_graph-typeChange").val(),s=e):"val"===t&&(i=initType=$(e).val(),s=0===$("#t"+curTab+"_graph-type").val().indexOf("riskGraph")?"line":"matrix");var a=({matrix:{roiRisk:"roiRisk",roiInit:"roiInit",price:"price",rawValue:"rawValue"},line:{roiRisk:"riskGraph",roiInit:"riskGraphInit",price:"riskGraphPrice",rawValue:"riskGraphRawValue"}}[s]||{})[i]||"roiRisk";$("#t"+curTab+"_graph [name=graphVisTypeIcon--"+s+"]").addClass("active"),_opcGaq.push(["_trackEvent","Change Output type",a]),ajaxRequest("","updatePreferredDisplayType",{type:a},(function(){})),a=checkForceGraphType(a,results[curTab]),results[curTab].graph_type=a,$("#t"+curTab+"_graph-type").val(a),renderResults(curTab,{noScroll:!0}),updateStratAdStickiness()}function updatePreferredDisplayType(t){t.value&&ajaxRequest("","updatePreferredDisplayType",{type:t.value},(function(){}))}function checkForceGraphType(t,e){var i=e;return"u"!==i.summary.maxrisk.g&&i.summary.maxrisk.g+i.initial.g<0?"roiRisk"==t||"roiInit"==t&&i.initial.g>=0?("roiInit"==t&&i.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="roiRisk"):("riskGraph"==t||"riskGraphInit"==t&&i.initial.g>=0)&&("riskGraphInit"==t&&i.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="riskGraph"):"u"===i.summary.maxrisk.g&&i.initial.g<0?"roiInit"==t||"roiRisk"==t?("roiRisk"==t&&addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="roiInit"):"riskGraph"!=t&&"riskGraphInit"!=t||(addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="riskGraphInit"):i.initial.g>=0&&(["riskGraph","roiRisk"].includes(t)?addMsg("Max risk is unlimited – Showing values as $P/L"):["riskGraphInit","roiInit"].includes(t)&&addMsg("Opening trade is a credit – Showing values as $P/L"),["riskGraph","riskGraphInit"].includes(t)?t="riskGraphPrice":["roiRisk","roiInit"].includes(t)&&(t="price")),t}function optionSelect(t){var e=$("#"+t.uEleId+"-symbol").val(),i=$("#"+t.uEleId+"-curPrice").val()||(priceCache[e]||{}).last,s=($("#"+t.eleId+"-strike").val(),$("#"+t.eleId+"-opType").val()),a=$("#"+t.eleId+"-act").val(),n=($("#"+t.eleId+"-expiry").val(),$("#"+t.eleId+"-option_selector"));if(""!==e){if(void 0!==viewStyle&&"mobile"===viewStyle){var o=$(window).width(),r=$(window).height();$(n).dialog("option",{width:o-5,height:r-5})}if(opCache[e]&&opCache[e]!==REQ_ERROR){var l=optionsSelectCode({eleId:t.eleId,underlying_price:i,opType:s,opAct:a},opCache[e]);$(n).dialog("open"),n.html('<div class="option_selector__inner">'+l+"</div>"),initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,stock:e})}else opCache[e]==REQ_ERROR?addMsg("Options not found for that symbol.","verbose"):t.showSelect||(getOptions({showSelect:!0,eleId:t.eleId,defaultType:t.defaultType,uEleId:t.uEleId}),$(n).dialog("open"),n.html(loadingHtml))}else addMsg('Enter an underlying symbol in the "Symbol" field above before trying to select options');return!1}function getOpenDialogEleId(t){var e=null;return $(".option_selector[id^=t"+t+"]").each((function(i,s){if($(s).dialog("isOpen")){var a=s.id.match(/^t\d*?e(.*)-option_selector/);a&&2===a.length&&(e="t"+t+"e"+a[1])}})),e}function refreshOpenOptionSelector(t){t||(t=curTab),optionSelect({uEleId:"t"+t+"e0_input_underlying",eleId:getOpenDialogEleId(t),showSelect:!0})}function optionsSelectCode(t,e){var i,s=e,a=[],n="<div class='options_set_holder'>",o=$("#"+t.eleId+"-expiry").val(),r=!1;""==o&&(o=!0);var l=[];for(var h in s)l.push(h);l.sort();for(var c=0;c<l.length;c++){oDate=l[c],"W"===(h=l[c])[h.length-1]&&(h=h.slice(0,h.length-1)),1==o||oDate==o?(r=(new Date).getTime()/1e3<timeFromYMD(h))?r=!0:(r=!1,o=!0):r=!1;var u="W"===oDate[oDate.length-1];""!==(i=10==h.length?dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",h)?"&\\nb\\sp;Y":""),h):7==h.length?dateFromYMD("M"+(date("y")!=dateFromYMD("y",h+"-15")?"&\\nb\\sp;Y":""),h+"-15"):"")&&a.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+(null==s[oDate]?" options_date_link_unfilled":"")+"' name=\""+oDate+'">'+i+(u?'<span class="weeklyIndicator">(weekly)</span>':"")+"</a>"),null!=s[oDate]&&r?n+=optionsSelectMonthCode({sData:t,selectMonth:r,tDate:oDate,tDateData:s[oDate]}):n+="<div class='options_set "+(r?"options_set_active ":"")+oDate+"' name='"+oDate+"'>\r\n</div>",1==r&&(r=!1,o=!1)}return n="<div class='dates'>"+a.join(" | ")+"</div>"+n+"</div>",n+="<div style='height: 60px'>&nbsp;</div>"}function optionsSelectMonthCode(t){var e="",i=t.selectMonth,s=t.tDate,a=t.tDateData,n=t.sData;e+="<div class='options_set "+(i?"options_set_active ":"")+s+"' name='"+s+"'>\r\n<p style='text-align: left; margin-bottom: 0.5em;' class='minor'>Options prices are delayed 15 minutes</p>\r\n<table cellspacing='0' cellpadding='0'><tbody>";var o,r={};function l(t){return Number(t).toFixed(2)}for(var h in e+='<tr class="type"><th colspan="3" align="center">Calls</th><th>&nbsp;</th><th colspan="3" align="center">Puts</th></tr><tr class="cols"><th>Bid</th><th>Mid</th><th>Ask</th><th class="s">Strike</th><th>Bid</th><th>Mid</th><th>Ask</th></tr>',a.c)o=in_array(a.c[h].b,["N",0,"0.00"])&&in_array(a.c[h].b,["N",0,"0.00"])?in_array(a.c[h].l,["N",0,"0.00"])?"N":a.c[h].l:avgPrice([a.c[h].b,a.c[h].a]),r[h]={c:"<td class='c"+("buy"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(a.c[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.c[h].b)+"</a>")+"</td><td class='c"+("p"!=n.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='c"+("sell"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(a.c[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.c[h].a)+"</a>")+"</td>",p:""};for(h in a.p)null==r[h]&&(r[h]={p:""}),o=in_array(a.p[h].b,["N",0,"0.00"])&&in_array(a.p[h].b,["N",0,"0.00"])?in_array(a.p[h].l,["N",0,"0.00"])?"N":a.p[h].l:avgPrice([a.p[h].b,a.p[h].a]),r[h].p="<td class='p"+("buy"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(a.p[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.p[h].b)+"</a>")+"</td><td class='p"+("c"!=n.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='p"+("sell"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(a.p[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.p[h].a)+"</a>")+"</td>",e+='<tr name="'+h+'" class="'+(parseFloat(h)<parseFloat(n.underlying_price)?"itm":"otm")+'">'+(r[h].c?r[h].c:"<td class='c'>-</td><td class='c'>-</td><td class='c'>-</td>")+"<td class='s'>"+h+"</td>"+(r[h].p?r[h].p:"<td class='p'>-</td><td class='p'>-</td><td class='p'>-</td>")+"</tr>";return e+="</tbody></table></div>"}function showOptions(t,e,i){if($(".options_set_active").removeClass("options_set_active").html("\n"),$(".options_date_link_active",$(e).parent()).removeClass("options_date_link_active"),$(e).addClass("options_date_link_active"),$(".options_set").hide(),null!==opCache[i.stock][t]){var s=$("#"+i.uEleId+"-curPrice").val(),a=$("#"+i.eleId+"-act").val(),n=$("#"+i.eleId+"-opType").val(),o={selectMonth:!0,tDate:t,tDateData:opCache[i.stock][t],sData:{eleId:i.eleId,opAct:a,opType:n,underlying_price:s}};$("."+t,$(e).parent().parent()).show().replaceWith(optionsSelectMonthCode(o))}else $("."+t,$(e).parent().parent()).show().html(loadingHtml);null!==opCache[i.stock][t]&&$("#"+i.eleId+"-option_selector .options_set[name='"+t+"'] td a").click((function(){return initOptionsSet(this,i)}))}function initOptionsSelector(t){var e=t.month?"[name='"+t.month+"']":"";$("#"+t.eleId+"-option_selector .options_date_link"+e).click((function(){return showOptions($(this).attr("name"),this,t),!1})),$("#"+t.eleId+"-option_selector .options_set"+e+" td a").click((function(){return initOptionsSet(this,t)})),$("#"+t.eleId+"-option_selector .options_date_link_unfilled").click((function(){var e=$(this).attr("name");getOptions({stock:t.stock,eleId:t.eleId,month:e,uEleId:t.uEleId}),$("#"+t.eleId+'-option_selector .options_set[name="'+e+'"]').html(loadingHtml)}))}function getMonthsOptions_return(t,e){var i="",s=$("#"+t.uEleId+"-curPrice").val(),a=$("#"+t.eleId+"-opType").val(),n=$("#"+t.eleId+"-act").val();delete opCache[t.stock][t.month];var o,r=!0,l=[],h=[];for(var c in e.options)h.push(c);h.sort();for(var u=0;u<h.length;u++){var d=h[u];null!=e.options[d]&&"_"!==d.substr(0,1)&&(o=dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",d)?"&\\nb\\sp;Y":""),d),l.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+"' name=\""+d+'">'+o+"</a> "),i+=optionsSelectMonthCode({sData:{eleId:t.eleId,underlying_price:s,opType:a,opAct:n},selectMonth:r,tDate:d,tDateData:e.options[d]}),opCache[t.stock][d]=e.options[d],r=!1)}for(d in $("#"+t.eleId+'-option_selector a[name="'+t.month+'"]').replaceWith(l.join(" | ")),$("#"+t.eleId+'-option_selector .options_set[name="'+t.month+'"]').replaceWith(i),e.options)null!=e.options[d]&&"_"!==d.substr(0,1)&&initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,month:d,stock:t.stock})}function initOptionsSet(t,e){var i=$(t).text(),s=$(t).parent().parent().parent().parent().parent().attr("name"),a=$(t).parent().parent().attr("name"),n=$(t).parent().hasClass("c")?"c":$(t).parent().hasClass("p")?"p":null,o=getBestPrice(opCache[e.stock][s][n][a]);null==n&&reportError("opType not Call (c) or Put (p)"),$("#"+e.eleId+"-opType").val(n),$("#"+e.eleId+"-price").val(i),$("#"+e.eleId+"-price").change(),$("#"+e.eleId+"-curPrice").val(o||i),$("#"+e.eleId+"-strike").val(a),$("#"+e.eleId+"-expiry").val(s);var r=parseInt(a,10)==a?parseInt(a,10):a;return $("#"+e.eleId+"-opDesc").html(expDescFromYMD(s)+" $"+r+" "+("c"==n?"Call":"Put")),$("#"+e.eleId+"-opDesc").addClass("option-description--has-content"),$("#"+e.eleId+"-option .select-button--full").addClass("select-button--hidden"),$("#"+e.eleId+"-option .select-button--compressed").removeClass("select-button--hidden"),$("#"+e.eleId+"-option_selector").dialog("close"),triggerListener("option",{tab_num:curTab,ele_id:e.eleId}),!1}function add_opSelector_dialog(t){var e=$(window).width(),i=$(window).height(),s={autoOpen:!1,modal:!0,title:"Choose an option",open:function(){$(".ui-widget-overlay").fadeTo(0,.2).hide().fadeIn().click((function(){$("#"+t+"-option_selector").dialog("close")}))},create:function(t){$(t.target).parent().css("position","fixed")},position:{at:"right-25 top+25"},dialogClass:"dialog-fixed dialog-optionSelector",height:i-50,width:600>e?e:600,show:{effect:"fade",duration:200},hide:{effect:"fade",duration:200},beforeClose:function(t,e){}};"mobile"==viewStyle&&(s.width=e,s.height=i,s.show=null,s.hide=null,s.modal=!0,s.position={at:"left top"},s.draggable=!1),$("#"+t+"-option_selector").dialog(s)}$(document).ready((function(){"undefined"!=typeof __ez&&!0!==(__ez.template||{}).isOrig&&$("[data-fuse]").remove();var t="undefined"!=typeof MutationObserver&&new MutationObserver(onAdChange);t.observe&&$(".ad").each((function(){t.observe(this,{subtree:!0,childList:!0}),onAdChange([{target:this}],!0)}))}));var priceCache={};function getPrice(t){var e=$("#"+t.eleId+"-symbol").val();if(""===e);else{getPriceButtonEleOrSelector="string"==typeof t.button?"#"+t.button:t.button,$(getPriceButtonEleOrSelector).addClass("loading").html("Loading");var i={button:getPriceButtonEleOrSelector,uEleId:t.eleId,eleId:t.eleId,stock:e};if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i,!0);ajaxRequest("getting price: "+e,"getStockPrice",{stock:e},getPrice_return,i);getOptions(i)}}function getPrice_return(t,e){if($(t.button).removeClass("loading").html(""),e.status==REQ_ERROR)addMsg(e.desc||"No prices found"),4==e.data_status&&_opcGaq.push(["_trackEvent","Symbol not found",t.stock]);else if(e.status==REQ_OK){var i=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),i=e.symbol_correction.toUpperCase()),_opcGaq.push(["_trackEvent","Symbol search",(i||"").toLowerCase()]),priceCache[i]=e.price;var s=roundTo(parseFloat(e.price.last)>0?e.price.last:(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2,2),a=roundTo(e.price.bid>0&&e.price.ask>0?(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2:e.price.last,2),n=parseFloat(e.price.ivHist)>0?parseFloat(e.price.ivHist):null;""===$("#"+t.eleId+"-price").val()&&$("#"+t.eleId+"-price").val(s),$("#"+t.eleId+"-curPrice").val(s),$("#"+t.eleId+"-lastPrice").val(s),$("#"+t.eleId+"-marketPrice").val(a),$("#"+t.eleId+"-ivHist").val(n),$("#"+t.eleId+"-updatePriceTime").val(Math.floor(Date.now()/1e3)),$("#"+t.eleId+"-curPrice").length>0&&$("#"+t.eleId+"-curPrice").get(0).onchange&&$("#"+t.eleId+"-curPrice").get(0).onchange(),isDialogOpen()&&refreshOpenOptionSelector(getTabNo(t.eleId))}}function isToStock(t){return t.indexOf(".to")===t.length-3&&t.length>=4}function getOptions(t){var e=$("#"+t.uEleId+"-symbol").val().trim(),i={stock:e,uEleId:t.uEleId,eleId:t.eleId};if(""===e);else{if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i);if(t.showSelect)for(var s in i.defaultType=t.defaultType,i.showSelect=!0,requests)requests[s].status==REQ_PENDING&&requests[s].desc=="getting options: "+e&&"getOptions"==requests[s].cmd&&requests[s].data==serialize1D({stock:e})&&(requests[s].localData=i);ajaxRequest("getting options: "+e,"getOptions",{stock:e},getOptions_return,i)}}var opCache={},curTab;function getOptions_return(t,e){$("#"+t.eleId+"-option .panel_button").removeClass("loading");var i=getTabNo(t.eleId);if(e.status==REQ_ERROR)opCache[t.stock]=REQ_ERROR,addMsg(e.desc||"Options not found"),_opcGaq.push(["_trackEvent","Options not found",t.stock]),t.showSelect&&$("#"+t.eleId+"-option_selector").dialog("close");else if(e.status==REQ_OK){$("#strat_"+i+'_form input[name$="-expiry"]').each((function(t,s){var a=$(s).attr("name").substr(0,$(s).attr("name").length-7),n=$(s).val(),o=$("#strat_"+i+'_form input[name="'+a+'-strike"]').val(),r=$("#strat_"+i+'_form select[name="'+a+'-opType"]').val(),l=(((e.options||{})[n]||{})[r]||{})[o];if(l){var h=$("#strat_"+i+'_form input[name="'+a+'-curPrice"]'),c=parseFloat(h.val()),u=getBestPrice(l);$("#strat_"+i+'_form input[name="'+a+'-curPrice"]').val(u),c!==u&&$("#strat_"+i+'_form input[name="'+a+'-iv"]').val("")}}));var s=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),s=e.symbol_correction.toUpperCase()),opCache[s]=sortChainOptions(e.options),t.showSelect&&optionSelect(t)}triggerListener("option_data",{tab_num:i,symbol:s})}function padStrikeKeys(t){return Object.keys(t).sort((function(t,e){return parseFloat(t)-parseFloat(e)})).reduce((function(e,i){return e[parseFloat(i).toFixed(2)]=t[i],e}),{})}function sortChainOptions(t){return Object.keys(t).reduce((function(e,i){return"_data_source"===i||(e[8===i.length?i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2):i]={c:padStrikeKeys(t[i].c),p:padStrikeKeys(t[i].p)}),e}),{})}function getV3priceData(t,e,i){$.getJSON(V3_API_PATH+"/price/"+t).always((function(t){if(!t||!t.data||"SUCCESS"===!t.data.result)return addMsg("Prices not found"),void $("#"+e.eleId+"-loading").hide();var s=sortChainOptions(t.data.options);getOptions_return(e,{status:REQ_OK,options:s}),i&&getPrice_return(e,{status:REQ_OK,price:t.data.stock})}))}function loadCharts(){google.charts.load("current",{packages:["corechart"]})}function renderRiskGraph(t,e){function i(){return"undefined"!=typeof google&&void 0!==google.visualization&&void 0!==google.visualization.arrayToDataTable&&void 0!==google.visualization.LineChart}if(i())setTimeout((function(){renderRiskGraph_1(t,e)}),5);else var s=Date.now(),a=setInterval((function(){var n=Date.now(),o=i();(o||n-s>5e3)&&clearInterval(a),o&&renderRiskGraph_1(t,e)}),250)}function renderRiskGraph_1(t,e){var i,s,a=["header_place_holder"],n=results[e].underlying_current_price,o=-1e7,r=1e7,l=["#ff8888","#ffcc00","#88ff88","#66ffff","#8888ff","#ff66ff","#996666","#999944","#669966","#449999","#666699","#994499"];tHeader=["Strike"],header=!1,dataLine=[],dataStr="",colors=[],tColor=0,tColor2=0,tTimeLen=!1,graphTimeScale=!1,timeIndex=[],dataIdx=index_assoc_array(t.data),graphPriceMin=!1;var h=t.initial.g<0;h&&(tHeader.push("(Stock comparison)"),colors.push("#18357F"));var c=!1;for(var u in dataIdx)if(dataIdx.hasOwnProperty(u)){if(s=dataIdx[u],!1===graphPriceMin&&(graphPriceMin=parseFloat(s)),dataLine=[parseFloat(s)],h&&dataLine.push(parseFloat(roundTo(getDisValByType(t,-t.initial.g+(parseFloat(s)-n)*(-t.initial.g/n)),2))),i=0,!1===header){var d={};for(var p in t.data[s])t.data[s].hasOwnProperty(p)&&(d[date("Y",parseInt(t.start_date,10)+86400*p)]=1);Object.keys&&(Object.keys(d)||[]).length>1&&(c=!0)}for(var p in t.data[s])if(t.data[s].hasOwnProperty(p)){if(!1===tTimeLen){for(var f in t.data[s])t.data[s].hasOwnProperty(f)&&(tTimeLen<parseInt(f,10)||!1===tTimeLen)&&(tTimeLen=parseInt(f,10));tTimeLen/t.time_scale>10?graphTimeScale=t.time_scale*Math.ceil(tTimeLen/(10*t.time_scale)):graphTimeScale=1}if((tTimeLen-p)%graphTimeScale==0){!1===header&&(tHeader.push(date("j M"+(c?" y":""),parseInt(t.start_date,10)+86400*p)),colors.push(0==i?"#cccccc":l[(i-1)%l.length]),timeIndex.push(p));var g=parseFloat(roundTo(getDisValByType(t,t.data[s][p].g),2));dataLine.push(g),g>o&&(o=g),g<r&&(r=g),i++}}a.push(dataLine),!1===header&&(header=tHeader)}for(header.push("Current"),colors.push("#666666"),a.push([parseFloat(n)]),a[a.length-1][header.length-1]=r-.1*(o-r),a.push([parseFloat(n)]),a[a.length-1][header.length-1]=o+.1*(o-r),a[0]=header,u=1;u<a.length-2;u++)a[u][a[u].length]=null;for(u=1;u<a[0].length-1;u++)a[a.length-1][u]=null,a[a.length-2][u]=null;var m={};m[i-1]={lineWidth:2},h&&(m[0]={lineDashStyle:[6,4]});var _={colors:colors,lineWidth:1,series:m,reverseCategories:!1,chartArea:{width:isMobile()?"83%":c?"69%":"75%",left:isMobile()?70:90,top:20,height:"85%"},vAxis:{viewWindow:{max:o+.1*(o-r),min:r-.1*(o-r)},title:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"Dollars":"Percent",format:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"$#,###.##":"#.##'%'",viewWindowMode:"maximized"},hAxis:{title:t.underlying_symb,format:"$#,###.##"},legend:isMobile()?{position:"bottom",alignment:"start"}:{}};array_includes(["price","riskGraphPrice","riskGraphRawValue"],t.graph_type)||(_.vAxis.minValue=-110);var v=google.visualization.arrayToDataTable(a);for(u=0;u<timeIndex.length;u++)v.setColumnProperty(u+2,"time",timeIndex[u]);v.setColumnProperty(a[0].length-1,"current",!0),v.setColumnProperty(1,"comparison",!0),results[e].riskChartData=v,results[e].riskChart=new google.visualization.LineChart($("#t"+e+"_graph .google_chart_holder")[0]),google.visualization.events.addListener(results[e].riskChart,"select",(function(t){var i=results[e].riskChart.getSelection();if(i.length>0&&null!=i[0].row){var s=i[0];if(1==results[e].riskChartData.getColumnProperty(s.column,"current")||1==results[e].riskChartData.getColumnProperty(s.column,"comparison"))return!1;results[e].riskChartData[0];var a=results[e].riskChartData.getColumnLabel(s.column),n=results[e].riskChartData.getColumnProperty(s.column,"time"),o=roundTo(results[e].riskChartData.getValue(s.row,0),2,!0,!1);if($("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: $"+o+" on "+a),"mobile"==viewStyle)$(window).width(),$(window).height();$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[o][n]))}})),results[e].riskChart.draw(v,_)}function getMatrixCode(t){for(var e,i,s,a,n,o,r='<table class="graph" cellpadding="1" cellspacing="0">',l=0,h="",c="",u="",d=date("m",t.start_date),p=Object.keys(t.data).sort((function(t,e){var i=parseFloat(t),s=parseFloat(e);return i>s?-1:i<s?1:0})),f=0;f<p.length;f++){var g=p[f];0==l&&(i=[[t.start_date,0]],u="<tr><th>"+t.underlying_symb+"</th>");var m=null!=o&&o>t.underlying_current_price&&g<t.underlying_current_price?"curPriceAbove":roundTo(g,2)==roundTo(t.underlying_current_price,2)?"curPriceRow":"";s="<tr name='"+g+"'"+(""!=m?" class='"+m+"'":"")+"><th class='x'>"+g+"</th>";var _=Object.keys(t.data[g]),v=_[_.length-1];for(var b in t.data[g])0==l&&(a=parseInt(t.start_date,10)+86400*b,(n=date("m",a))==d?i[i.length-1][1]++:(i.push([a,1]),d=n),b==v?(u+='<th class="t z'+((i.length-1)%2+1)+'" name="'+b+'">Exp</th>',u+='<th class="pct">+/-%</th>'):u+='<th class="t z'+((i.length-1)%2+1)+'" name="'+b+'">'+date("j",a)+"</th>"),h=colorByDis(c=fmtNumToFit(getDisValByType(t,t.data[g][b].g)),t.data[g][b].g,t),e="",(c.length?c:c.toString()).length>=4&&(e+=" four_digit"),(c.length?c:c.toString()).length>=5&&(e+=" five_digit"),s+="<td name='t"+b+"-x"+g+"' class='d"+e+" "+h+"'>"+c+"</td>",b==v&&(s+='<td class="pct">'+roundTo(100*(g-t.underlying_current_price)/t.underlying_current_price,2,!0)+"%</td>"),o=g;if(0==l){for(var y in r+="<tr><th>&nbsp;</th>",i)i[y][1]>0&&(r+="<th colspan='"+i[y][1]+"' align='center' class='z"+(y%2+1)+"'>"+date("M",i[y][0])+"</th>");r+="<td>&nbsp;</td>",r+="</tr>",r+=u+="</tr>"}r+=s+="</tr>",l++}return r+="</table>"}function showInitDetails(t){var e=$(t).parents(".stratContent").attr("id");if(e=e.substr(6,e.lastIndexOf("_")),$("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: Entry cost"),"mobile"==viewStyle)$(window).width(),$(window).height();$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(e,results[e].initial,!0))}function renderResults(t,e){var i=(e||{}).noScroll||!1;$("#t"+t+"_summary").html("<h2>Estimated returns</h2>"+getSummary(results[t])+getSharingCode(t));var s=renderGraph(results[t],t);for(var a in $("#t"+t+"_graph").html(s[0]),s[1]&&s[1](),$("#strat_"+t+" .results").show(),results[t].vars)$("#strat_"+t+' [name="'+a+'"]').val(results[t].vars[a]);initResults(t),i||$.scrollTo("#t"+t+"_summary",500)}function getSummary(t){var e,i=t.summary;for(var s in t.risk)e=s;var a="object"==typeof i.maxrisk.time&&i.maxrisk.time instanceof Array?removeArrayDupes(i.maxrisk.time):i.maxrisk.time;a=!("object"==typeof a&&a instanceof Array)||a.length>1?a:a[0];var n="object"==typeof i.maxprofit.time&&i.maxprofit.time instanceof Array?removeArrayDupes(i.maxrisk.time):i.maxrisk.time;if(n=!("object"==typeof n&&n instanceof Array)||n.length>1?n:n[0],"object"==typeof a&&a instanceof Array)var o=" on days "+descNumList(a);else if(a==e)o="";else if(void 0!==a)o=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxrisk.time*60*24,-5);else o="";if("object"==typeof i.maxprofit.time&&i.maxprofit.time instanceof Array)var r=" on days "+descNumList(i.maxprofit.time);else if(i.maxprofit.time==e)r="";else if(void 0!==i.maxprofit.time)r=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxprofit.time*60*24,-5);else r="";function l(t,e){return"<span style='color:#900;"+(e?"font-weight: bold;":"")+"'>"+t+"</span>"}function h(t,e){return"<span style='"+(e?"font-weight: bold;":"")+"'>"+t+"</span>"}var c=i.maxrisk.g>-t.initial.g,u=formatPrice(Math.abs(i.maxrisk.g+t.initial.g)),d="u"===i.maxrisk.g?l("infinite",!0)+' <span class="minor">(on upside)</span>':("i"===i.maxrisk.p?l(u)+' <span class="minor">(on upside)</span>':l("<span"+(c?' style="color:#370;font-weight:bold;">+':">")+u+"</span>")+" <span class='minor'>(at "+t.underlying_symb+formatPrice(i.maxrisk.p)+o+")</span>")+(i.maxrisk.g+t.initial.g>=0?'<br/><span class="minor">(calculator found no risk.  This can be due to low or high implied volatility, or out of date prices)</span>':""),p="u"===i.maxprofit.g||i.maxprofit.g+t.initial.g<=0?null:"u"===i.maxrisk.g?0:(i.maxprofit.g+t.initial.g)/-(i.maxrisk.g+t.initial.g),f=null===p?null:roundTo(100*p,100*p>=10?1:2)+"%",g=Object.keys(t.data[Object.keys(t.data)[0]]),m=g[g.length-1]/365,_=null===p?null:p/m,v=null===_?null:100*_>1e5?"+100000%":roundTo(100*_,_>=1?0:_>=.1?1:2)+"%";c=i.maxprofit.g<-t.initial.g;var b=formatPrice(Math.abs(i.maxprofit.g+t.initial.g)),y="u"===i.maxprofit.g?h("infinite")+' <span class="minor">(on upside)</span>':("i"===i.maxprofit.p?h(b)+' <span class="minor">(on upside)</span>':h("<span"+(c?' style="color:#F00;">-':">")+b+"</span>")+" <span class='minor'>(at "+t.underlying_symb+formatPrice(i.maxprofit.p)+r+")</span>")+(i.maxprofit.g+t.initial.g<=0?'<br/><span class="minor">(calculator found no positive profit.  This can be due to low or high implied volatility, or out of date prices)</span>':""),k=null===v||"u"===i.maxprofit.g||"u"===i.maxrisk.g?"N/A":f+" ("+v+" ann.)",w=!!(i.PoP||{}).pop,x=w?roundTo(100*(i.PoP||{}).pop,1)+"%":"";for(var s in t.breakeven);var C=implode(", ",(t.breakeven[s]||[]).map(formatPrice)),D='<span style="'+((c=t.initial.g<0)?"color:#900;":"color:#370;")+'">'+formatPrice(Math.abs(t.initial.g))+"</span><span class='minor'>"+(c?"":" net credit")+"</span>";return"<p class='asAt minor'>As at "+date("jS M Y",t.start_date)+" ("+t.underlying_symb+" "+formatPrice(t.underlying_current_price)+")</p><p>Entry "+(c?"cost":"credit")+": "+D+" <a href='#' class='subtle initDetail' onclick='showInitDetails(this); return false;'>see details</a></p><p><span class='hideTabPlus'>Max</span> <span class='hideMobile'>Maximum</span> risk: "+d+"</p><p><span class='hideTabPlus'>Max</span> <span class='hideMobile'>Maximum</span> return: "+y+"</p>"+(k?"<p>Max return on risk: "+k+"</p>":"")+"<p>Breakevens at expiry: "+C+"</p>"+(w?"<p>Probability of profit: "+x+" <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>":"")}function renderGraph(t,e){t.graph_type=checkForceGraphType(t.graph_type,t);var i="",s=0===(t.graph_type||"").indexOf("riskGraph")?"line":"matrix",a="",n=parseFloat($("#t"+e+"_ivChange-val").val())||0,o="";o+='<div class="graphToolbar graphToolbar--riskGraph">'+(a+="<div style='display: flex; margin-bottom: 5px; margin-top: 5px;'> <div class='fieldLabel' style='position: relative;'>   <span class='inputLabelSmall' style='position: relative; z-index: 10;'>     IV change     <a href=\"#\" onclick=\"alert('The expected increase or decrease in Implied Volatility.\\n\\nE.g. For stock with IV of 30, entering 10% here will show estimates for if the stock\\'s IV increases to 33');return false;\" class=\"help\">?</a>   </span>   <div style='position: relative; flex: 1; display: flex; align-items: center' onclick='ivChangeOnFocus("+e+")'>     <select class='input noLeftMargin'><option>"+(0===n?"±":n>0?"+":"")+n+"%</option></select>     <div style='position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 3'></div>   </div>   <div class='id--ivChangePanel card jq_start_hidden' id='t"+e+"_ivChangeCard'     style='position: absolute; top: -0.2rem; left: -0.3rem; padding: 1.3em 0.3rem 0.3rem; min-width: 4.2em; z-index: 3'   >   <span>    <input class=\"input inputNumeric noLeftMargin\"      type=\"text\" inputmode=\"decimal\"     style='width: 40px;'     name='ivChange' id='t"+e+"_ivChange--input'      oninput='ivChangeOnKeyup("+e+", event.target.value); ivChangeChkUpdateNeeded("+e+")'    />%   </span>   <div class='ivSlider__ctnr'>     <div class='ivSlider__notch-ctnr'>       <span class='ivSlider__notch ivSlider__notch--has-negative ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -100)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>100         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -75)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>75         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -50)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>50         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -25)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>25         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-percent ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 0)'>           ±0%         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 25)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>25         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 50)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>50         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 75)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>75         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 100)'>           <span class='ivSlider__notch__plusMinusIndicator'>+</span>100         </span>       </span>     </div>     <div id=\"t"+e+'_ivSlider" class="ivSlider__holder" style="width: 12rem">       <div id="t'+e+'_ivSlider_custom-handle" class="ui-slider-handle">         <div class="custSlider-rail" />       </div>     </div>   </div>   <a href=\'javascript:void(0)\'      id=\'t'+e+"_ivSlider--updateBtn'      onclick='ivChangeUpdate("+e+")'      style='padding: 0.2em 0; text-decoration: none; visibility: hidden'   >           <span style='text-decoration: underline'>Update Calculation</span>     <img src='"+WEB_PATH_STATIC+"images/icon-refresh.svg' width='14' height='14' valign='bottom' />   </a> </div></div><div class='fieldLabel' style='margin-left: 10px;'>  <span class='inputLabelSmall'>Chart style</span>  <div class='graphVisTypeIconCtnr'>    <span onclick=\"changeOutputType('vis', 'matrix');\" class='graphVisTypeIcon"+("matrix"===s?" __active":"")+'\' name=\'graphVisTypeIcon--matrix\'><svg width="38" height="38" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">          <path d="M15.5 3V15.5H3" stroke="currentColor" stroke-opacity="0.36"/>          <rect opacity="0.7" x="3" width="13" height="3" fill="currentColor"/>          <rect opacity="0.7" x="0.5" y="3.5" width="2" height="12" fill="currentColor" stroke="currentColor"/>          <rect opacity="0.55" width="4" height="3" transform="matrix(-1 0 0 1 15 3)" fill="currentColor"/>          <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 11 3)" fill="currentColor"/>          <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 7 3)" fill="currentColor"/>          <rect opacity="0.9" width="4" height="3" transform="matrix(-1 0 0 1 15 6)" fill="currentColor"/>          <rect opacity="0.4" width="4" height="3" transform="matrix(-1 0 0 1 11 6)" fill="currentColor"/>          <rect opacity="0.25" width="4" height="3" transform="matrix(-1 0 0 1 7 6)" fill="currentColor"/>          <rect opacity="0.55" width="4" height="3" transform="matrix(-1 0 0 1 15 9)" fill="currentColor"/>          <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 11 9)" fill="currentColor"/>          <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 7 9)" fill="currentColor"/>          <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 15 12)" fill="currentColor"/>          <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 11 12)" fill="currentColor"/>          <rect opacity="0.4" width="3" height="3" fill="currentColor"/>        </svg>    </span>    <span onclick="changeOutputType(\'vis\', \'line\');" class=\'graphVisTypeIcon'+("line"===s?" __active":"")+'\' style=\'padding: 2px\' name=\'graphVisTypeIcon--line\'><svg width="33" height="28" viewBox="0 0 33 28" fill="none" xmlns="http://www.w3.org/2000/svg">        <path opacity="0.23" d="M31.624 14.484H0.624023" stroke="black"/>        <path opacity="0.23" d="M16.124 0.984009L16.124 27.984" stroke="black"/>        <path opacity="0.3" d="M32.0125 11C15.7744 11 9.86959 19.1818 1.01245 20" stroke="currentColor"/>        <path d="M31.4958 6.5H13.4125L7.21251 24.5H0.495847" stroke="currentColor"/>        </svg>    </span></div></div></div>')+"</div>","riskGraph"==t.graph_type.substr(0,9)?o+='<div class="graphCtnr"><div class="google_chart_holder" style="height:500px;"></div></div>\n      <script>\n      renderRiskGraph(results['+e+"], "+e+");\n      <\/script>":(o+='<div class="graphCtnr">',o+=getMatrixCode(t),o+="</div>",i="<p>Click a cell to view the trade's exit.</p>");var r=Math.min(Math.round(t.graph_priceMax||0).toString().length+5,8);return o+='<div style=\'display: flex; margin-top: 5px\'> <div class=\'fieldLabel\'>   <span class=\'inputLabelSmall\'>Stock price range</span>   <div>     $<input data-app-inputset="priceRange" placeholder="auto" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text" inputmode="decimal"        id="'+e+'_graph-priceMin-quick" name="graph-priceMin-quick" value="'+roundTo(t.graph_priceMin,2)+"\"        onchange=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+"', ele_name:'graph'});\"        onkeyup=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+'\', ele_name:\'graph\'});"        class="inputWithDollar inputNumeric input" style="width: '+r+"ch\"       onblur=\"graphRangeChange('min', "+e+', event);" />     &hyphen;<input data-app-inputset="priceRange" placeholder="auto" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text" inputmode="decimal"        id="'+e+'_graph-priceMax-quick" name="graph-priceMax-quick" value="'+roundTo(t.graph_priceMax,2)+"\"        onchange=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+"', ele_name:'graph'});\"        onkeyup=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+'\', ele_name:\'graph\'});"        class="inputWithDollar inputNumeric input" style="width: '+r+"ch\"       onblur=\"graphRangeChange('max', "+e+', event);" />     <input type="hidden" id="t'+e+'_graph-rangeShouldUpdate" name="graph-rangeShouldUpdate" value="0" />   </div>   <div id=\'t'+e+"_graph-rangeUpdate' style='visibility: hidden'>     <a href='javascript:void(0)' onClick='updatePriceRange("+e+")') style='padding: 0.2em 0; text-decoration: none'><span style='text-decoration: underline'>Update price range</span>       <img src='"+WEB_PATH_STATIC+"images/icon-refresh.svg' width='14' height='14' valign='bottom' /></a>   </div></div><div class='fieldLabel' style='margin-left: 5px;'>  <label class='inputLabelSmall'>Chart values <a href='#' onclick='alert(\"Changes how the trade is represented in the table or graph... \\n\\n% of maximum risk.: Percentage of the maximum risk of the trade, where -100 is the maximum risk, and 100 is 100% return compared to the maximum risk. \\n\\n% of entry: Percentage of the entry cost of the trade, where -100 is no return from your initial investment, and 100 is 100% return compared to the entry cost.  Note: if opening the trade results in a credit, % of maximum risk is used instead.\\n\\nDollar value: Profit or loss in net dollar value.\\n\\nOption/Spread value: shows the value of the purchased option, or the spread, without multiplying x100 for each contract.\");return false;' class='help'>?</a></label>  <div>    <select name='graph-typeChange' id='t"+e+"_graph-typeChange' class='input noLeftMargin' onchange='changeOutputType(\"val\", this);' style='margin-right:5px'>       <option value='roiRisk'"+("roiRisk"==t.graph_type||"riskGraph"==t.graph_type?" selected":"")+">% of maximum risk</option>       <option value='roiInit'"+("roiInit"==t.graph_type||"riskGraphInit"==t.graph_type?" selected":"")+">% of entry cost</option>       <option value='price'"+("price"==t.graph_type||"riskGraphPrice"==t.graph_type?" selected":"")+">$ Profit/loss</option>       <option value='rawValue'"+("rawValue"==t.graph_type||"riskGraphRawValue"==t.graph_type?" selected":"")+">Option/spread value</option>       </optgroup>    </select>  </div></div></div>",[o+=i,function(){$("#t"+e+"_ivSlider").slider({value:n,min:-100,max:100,create:function(){},slide:function(t,i){$("#t"+e+"_ivChange--input").val(i.value>0?"+"+i.value:i.value),ivChangeChkUpdateNeeded(e)}})}]}function initResults(t){$("#t"+t+"_graph").prepend('<div class="popup" id="t'+t+'_graph-detail"></div>');var e=$(window).width(),i=($(window).height(),{autoOpen:!1,position:{at:"right top"},dialogClass:"detailPopup",title:"Detail",maxHeight:300,minHeight:120,width:e<450?e:450,draggable:"mobile"!==viewStyle,create:function(t){$(t.target).parent().css("position","fixed"),$(t.target).parent().css("bottom","0 !important")}});"mobile"==viewStyle&&(i.width=e,i.resizable=!1,i.position={at:"center bottom"});try{$("#t"+t+"_graph-detail").dialog("close")}catch(t){}$("#t"+t+"_graph-detail").dialog(i),$("th.t:last-child").hover((function(){$(this).addClass("hover"),$(this).append("<div class='hover'>At&nbsp;expiry</div>")}),(function(){$(this).removeClass("hover"),$(".hover",this).remove()})),$("#t"+t+"_graph table td.d").each((function(){$(this).html("<div><a href='#' class='subtle'>"+$(this).html()+"</a></div>");var e=$(this).attr("name"),i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2);$(this).hover((function(){var t,e,a,n;$(this).addClass("hover");var o=results[curTab].graph_type.toLowerCase();e=o.indexOf("rawvalue")>=0?"$"+roundTo(results[curTab].data[s][i].g/100,2,!0):"$"+roundTo(results[curTab].data[s][i].g+results[curTab].initial.g,2,!0),a="number"==typeof(n=getDisValByType($.extend({},results[curTab],{graph_type:o.indexOf("price")>=0||o.indexOf("rawvalue")>=0?"roiRisk":results[curTab].graph_type}),results[curTab].data[s][i].g))?roundTo(n,Math.abs(n)<100?Math.abs(n)<10?2:1:0)+"%":n,t=o.indexOf("price")>=0?e+("N/A"!==a?"<br/>("+a+")":""):o.indexOf("rawvalue")>=0?e+"<br/>("+a+")":a+"<br/>("+e+")",$("a",this).append("<div class='hover'>"+t+"</div>")}),(function(){$(this).removeClass("hover");var t=e.substring(1,e.indexOf("-x")),i=e.substring(e.indexOf("-x")+2);$("a",this).html(fmtNumToFit(getDisValByType(results[curTab],results[curTab].data[i][t].g)))})),$("div a",this).click((function(){var i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2),a=parseInt(results[t].start_date,10)+86400*parseInt(i,10);return $("#t"+t+"_graph-detail").html("").dialog("option","title","Detail: $"+roundTo(s,2,1)+" on "+date("jS M Y",a)),$("#t"+t+"_graph-detail").html("").dialog("open"),$("#t"+t+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[s][i])),!1}))}))}function getCellSummary(t,e,i){var s,a,n,o,r,l,h,c,u,d=[],p=0;if(null!=e.S)for(var f in e.S)h="buy"==(r=e.S[f]).a?-1:1,c=parseInt($("#strat_"+t+' [name="'+f+'-num"]').val()),l=null!=r.T?parseFloat(r.T):h*parseFloat(c)*u,u=null!=r.p?parseFloat(r.p):l/c,o=$("#strat_"+t+' [name="'+f+'-symbol"]').val(),p+=l,d.push([r.a,c,o+" stocks",roundTo(u,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.O)for(var f in e.O)h="buy"==(r=e.O[f]).a?-1:1,l=null!=r.T?parseFloat(r.T):h*parseFloat(r.n)*100*r.p,a=$("#strat_"+t+' [name="'+f+'-opType"]').val(),n=$("#strat_"+t+' [name="'+f+'-expiry"]').val(),s=dateFromYMD("j<\\s\\up>S</\\s\\up> M"+(dateFromYMD("Y",n)==date("Y")?"":" Y"),n)+" $"+r.X+" "+("c"==a?"Call":"Put"),p+=l,d.push([r.a,r.n+"x100",s,roundTo(r.p,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.C)for(var f in e.C){l=(r=e.C[f]).T;var g="buy"===r.a?"Cash held":"Cash released";p+=l,d.push([g,"","",void 0,roundTo(l,2,!0,!1)])}var m='<table class="trade_summary" cellpadding="1" cellspacing="0"><tr><th>Trades to '+(i?"open":"close")+" position</th><th>No.</th><th>Price</th><th>Total</th></tr>";for(f=0;f<d.length;f++)m+="<tr><td align='left'>"+ucFirst(d[f][0])+" "+d[f][2]+"</td><td align='right'>"+d[f][1]+"</td><td align='right'>"+(d[f][3]?"$"+d[f][3]:"")+"</td><td align='right'>$"+d[f][4]+"</td></tr>";if(m+=d.length>1?"<tr class='subtotal'><td align='left'>Total"+(i?"":" (closing trade)")+"</td><td colspan='3' align='right'>$"+roundTo(p,2,!0,!1)+"</td></tr>":"",!0!==i){var _=results[t].initial.g+p;m+="<tr class='init'><td align='left'>Entry cost</td><td colspan='3' align='right'>$"+roundTo(results[t].initial.g,2,!0,!1)+"</td></tr><tr class='total'><td align='left'>Total</td><td colspan='3' align='right'>$"+roundTo(_,2,!0,!1)+"</td></tr>"}return m+"</table>"}function newTab(t,e){return void 0!==window.viewStyle&&"full"!==viewStyle&&$("#top_but-calculator").hide(),e=e||ajaxRequest("creating new tab: "+t,"newTab",{strat:t},newTab_return,{strat:t}),$(".popup").dialog("close"),$("[name='strat_tabs']").hide(),$("#calcs_holder").append('<div class="jq_exclusive_target" id="newTab_req'+e+'" name="strat_tabs"><span class="loading">Loading</span></div>'),!1}function newTab_return(_reqData,data,cfg){if(cfg=Object.assign({show:!0},cfg||{}),null!=data["strat-info"]&&null!=data["strat-info"].text){_opcGaq.push(["_trackPageview","/calculator/"+data["strat-info"].name+".html"]);var code='<li class="stratTab dialog_tab"name="strat_tabs:strat_'+data.tabId+'" id="strat_'+data.tabId+'_button"><div><a href="#" name="strat_tabs:strat_'+data.tabId+'" class="jq_exclusive_switch_flash name" onclick="showTab(this); return false;">New '+data["strat-info"].text+"</a> <a href='#' class='close_x' onclick=\"return closeTab(this);\" title='close'>&times;</a><img src='"+WEB_PATH_STATIC+"images/tab-fade-top.gif' class='tab_fade_top'/><img src='"+WEB_PATH_STATIC+"images/tab-fade-bot.gif' class='tab_fade_bot'/></div></li>";$("#tab_holder_tabs .stratTab").first().before(code)}$("#newTab_req"+data.reqId).remove();var hideClass=!1===cfg.show?" jq_start_hidden":"";$("#calcs_holder").append('<div class="jq_exclusive_target stratContent'+hideClass+'" id="strat_'+data.tabId+'" name="strat_tabs">'+data.code+"</div>"),$("[name='strat_tabs:strat_"+data.tabId+"']").click((function(){return jq_exclusive_switch($(this),0)})),null!=data.script&&""!=data.script&&eval(data.script),null!=data.js_files&&data.js_files,null!=data.css_files&&data.css_files,cfg.show&&($("[name='strat_tabs:strat_"+data.tabId+"']").click(),refreshIntraStratAd(data.tabId)),updateStratAdStickiness()}function showTab(t,e,i){closeCurrentTabs&&closeCurrentTabs(),void 0===e&&_opcGaq.push(["_trackEvent","Tabs","Show"]);var s="number"==typeof t?t:$(t).attr("name").substring(17);return $(".popup").dialog("close"),"F"!==s&&$("#strat_F_button").removeClass("dialog_tab_selected"),refreshIntraStratAd(s),updateStratFormInsets(s),tabsFromFinder&&tabsFromFinder[s]&&$("#strat_"+s+" .breadcrumb").html('<a href="/option-finder.html" onclick="switchToTabVisually(\'F\'); return false;">Option Finder Results</a> &gt;'),!0!==i&&safeSelect(window,(function(t){return t.history.state.tabNo}))!==s&&pushTabToHistory(s),curTab=s,ajaxRequest("activating tab","activateTab",{stratNo:s},(function(){})),updateStratAdStickiness(),!1}function closeTab(t){var e=$(t).parent().parent(),i=$(e).next(),s=$(e).prev(),a=$("a:first",e).attr("name"),n=a.indexOf(":"),o=a.substring(n+1),r=o.substring(6);if($("#"+o+".jq_exclusive_target").remove(),$(e).remove(),rq=ajaxRequest("closing tab","closeTab",{stratNo:r},(function(){})),r==curTab){var l=r;i.length?l=i[0].id.substr(6,i[0].id.length-13):s.length&&(l=s[0].id.substr(6,s[0].id.length-13)),jq_exclusive_switch($('a[name="strat_tabs:strat_'+l+'"]'),0),_opcGaq.push(["_trackEvent","Tabs","Close"]),showTab(parseInt(l),!0)}return!1}function closeCurrentTabs(){$("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide(),$("#invisible_shield").unbind("click",closeCurrentTabs)}function switchToTabVisually(t){$("#strat_"+t).length>0&&($(".stratTab.dialog_tab").removeClass("dialog_tab_selected"),$(".stratContent").hide(),$("#strat_"+t+"_button").addClass("dialog_tab_selected"),$("#strat_"+t).show())}function pushTabToHistory(t){if(window.history&&window.history.pushState){var e=getRouteData(t);window.history.pushState({tabNo:t},e.title,BASE_URL+e.url),$("head title").text(e.title)}else document.location.hash="tab="+t}function getRouteData(t){if("F"===t)return{title:"Option finder - by Options Profit Calculator",url:"/option-finder.html"};var e=$("#t"+t+"_stratKey").val(),i=$("#strat_"+t+"_button div a .minor").eq(0).text(),s=$("#strat_"+t+"_button div a").eq(0).text();return{title:s.slice(0,s.length-i.length)+" "+i,url:"/calculator/"+e+".html"}}function updateStratFormInsets(t){var e=$("#strat_"+t+" .stratArticle").attr("data-article"),i=$("#strat_"+t+" .stratStats").attr("data-stats");$("#feedback_section").html(i?decodeURIComponent(i)+decodeURIComponent(statsCommon):decodeURIComponent(statsDefaultContent)),$("#stratArticle").html(decodeURIComponent(e))}function refreshIntraStratAd(t){window.fusetag&&window.fusetag.loadSlotById&&($("#fuse-21977025922-"+t).attr("data-fuse")||($("#fuse-21977025922-"+t).attr("data-fuse","21977025922"),window.fusetag.loadSlotById(21977025922,"fuse-21977025922-"+t)))}
/*! jQuery UI - v1.12.1 - 2021-07-15
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/resizable.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/slider.js, widgets/tooltip.js, effect.js, effects/effect-slide.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */$(document).ready((function(){var t=Date.now(),e=setInterval((function(){var i=Date.now(),s="undefined"!=typeof google&&void 0!==google.charts;s&&loadCharts(),(s||i-t>5e3)&&clearInterval(e)}),250)})),window.addEventListener("popstate",(function(t){var e=safeSelect(t,(function(t){return t.state.tabNo}),!1);!1!==e&&switchToTabVisually(e)})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}((function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i,s,a,n,o,r,l,h,c,u,d=0,p=Array.prototype.slice;function f(t,e,i){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?i/100:1)]}function g(e,i){return parseInt(t.css(e,i),10)||0}t.cleanData=(e=t.cleanData,function(i){for(var s,a,n=0;null!=(a=i[n]);n++)try{(s=t._data(a,"events"))&&s.remove&&t(a).triggerHandler("remove")}catch(i){}e(i)}),t.widget=function(e,i,s){var a,n,o,r={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},a=t[l][e],n=t[l][e]=function(t,e){if(!this._createWidget)return new n(t,e);arguments.length&&this._createWidget(t,e)},t.extend(n,a,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(s,(function(e,s){function a(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}t.isFunction(s)?r[e]=function(){var t,e=this._super,i=this._superApply;return this._super=a,this._superApply=n,t=s.apply(this,arguments),this._super=e,this._superApply=i,t}:r[e]=s})),n.prototype=t.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||e},r,{constructor:n,namespace:l,widgetName:e,widgetFullName:h}),a?(t.each(a._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)})),delete a._childConstructors):i._childConstructors.push(n),t.widget.bridge(e,n),n},t.widget.extend=function(e){for(var i,s,a=p.call(arguments,1),n=0,o=a.length;n<o;n++)for(i in a[n])s=a[n][i],a[n].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(a){var n="string"==typeof a,o=p.call(arguments,1),r=this;return n?this.length||"instance"!==a?this.each((function(){var i,n=t.data(this,s);return"instance"===a?(r=n,!1):n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,o))!==n&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):r=void 0:(o.length&&(a=t.widget.extend.apply(null,[a].concat(o))),this.each((function(){var e=t.data(this,s);e?(e.option(a||{}),e._init&&e._init()):t.data(this,s,new i(a,this))}))),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,a,n,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(s=e.split(".")).shift(),s.length){for(a=o[e]=t.widget.extend({},this.options[e]),n=0;n<s.length-1;n++)a[s[n]]=a[s[n]]||{},a=a[s[n]];if(e=s.pop(),1===arguments.length)return void 0===a[e]?null:a[e];a[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,a;for(i in e)a=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&a&&a.length&&(s=t(a.get()),this._removeClass(a,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function a(a,n){for(var o,r=0;r<a.length;r++)o=s.classesElementLookup[a[r]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),s.classesElementLookup[a[r]]=o,i.push(a[r]),n&&e.classes[a[r]]&&i.push(e.classes[a[r]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&a(e.keys.match(/\S+/g)||[],!0),e.extra&&a(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,a){-1!==t.inArray(e.target,a)&&(i.classesElementLookup[s]=t(a.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var a="string"==typeof t||null===t;return(t={extra:a?e:i,keys:a?t:e,element:a?this.element:t,add:s}).element.toggleClass(this._classes(t),s),this},_on:function(e,i,s){var a,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=a=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),t.each(s,(function(s,o){function r(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?n[o]:o).apply(n,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l;s=(l=s.match(/^([\w:-]*)\s*(.*)$/))[1]+n.eventNamespace;(l=l[2])?a.on(s,l,r):i.on(s,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var a,n,o=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,a,n){var o;"string"==typeof a&&(a={effect:a});var r=a?!0!==a&&"number"!=typeof a&&a.effect||i:e;"number"==typeof(a=a||{})&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),o&&t.effects&&t.effects.effect[r]?s[e](a):r!==e&&s[r]?s[r](a.duration,a.easing,n):s.queue((function(i){t(this)[e](),n&&n.call(s[0]),i()}))}})),t.widget,s=Math.max,a=Math.abs,n=/left|center|right/,o=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,h=/%$/,c=t.fn.position,t.position={scrollbarWidth:function(){if(void 0!==i)return i;var e,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return t("body").append(s),e=a.offsetWidth,s.css("overflow","scroll"),e===(a=a.offsetWidth)&&(a=s[0].clientWidth),s.remove(),i=e-a},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y");i="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:i?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),a=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:a,offset:s||a?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var i,h,u,d,p,m,_=t(e.of),v=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(v),y=(e.collision||"flip").split(" "),k={},w=9===(m=(w=_)[0]).nodeType?{width:w.width(),height:w.height(),offset:{top:0,left:0}}:t.isWindow(m)?{width:w.width(),height:w.height(),offset:{top:w.scrollTop(),left:w.scrollLeft()}}:m.preventDefault?{width:0,height:0,offset:{top:m.pageY,left:m.pageX}}:{width:w.outerWidth(),height:w.outerHeight(),offset:w.offset()};return _[0].preventDefault&&(e.at="left top"),h=w.width,u=w.height,d=w.offset,p=t.extend({},d),t.each(["my","at"],(function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=n.test(s[0])?s.concat(["center"]):o.test(s[0])?["center"].concat(s):["center","center"]),s[0]=n.test(s[0])?s[0]:"center",s[1]=o.test(s[1])?s[1]:"center",t=r.exec(s[0]),i=r.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[l.exec(s[0])[0],l.exec(s[1])[0]]})),1===y.length&&(y[1]=y[0]),"right"===e.at[0]?p.left+=h:"center"===e.at[0]&&(p.left+=h/2),"bottom"===e.at[1]?p.top+=u:"center"===e.at[1]&&(p.top+=u/2),i=f(k.at,h,u),p.left+=i[0],p.top+=i[1],this.each((function(){var n,o,r=t(this),l=r.outerWidth(),c=r.outerHeight(),m=g(this,"marginLeft"),w=g(this,"marginTop"),x=l+m+g(this,"marginRight")+b.width,C=c+w+g(this,"marginBottom")+b.height,D=t.extend({},p),T=f(k.my,r.outerWidth(),r.outerHeight());"right"===e.my[0]?D.left-=l:"center"===e.my[0]&&(D.left-=l/2),"bottom"===e.my[1]?D.top-=c:"center"===e.my[1]&&(D.top-=c/2),D.left+=T[0],D.top+=T[1],n={marginLeft:m,marginTop:w},t.each(["left","top"],(function(s,a){t.ui.position[y[s]]&&t.ui.position[y[s]][a](D,{targetWidth:h,targetHeight:u,elemWidth:l,elemHeight:c,collisionPosition:n,collisionWidth:x,collisionHeight:C,offset:[i[0]+T[0],i[1]+T[1]],my:e.my,at:e.at,within:v,elem:r})})),e.using&&(o=function(t){var i=d.left-D.left,n=i+h-l,o=d.top-D.top,p=o+u-c,f={target:{element:_,left:d.left,top:d.top,width:h,height:u},element:{element:r,left:D.left,top:D.top,width:l,height:c},horizontal:n<0?"left":0<i?"right":"center",vertical:p<0?"top":0<o?"bottom":"middle"};h<l&&a(i+n)<h&&(f.horizontal="center"),u<c&&a(o+p)<u&&(f.vertical="middle"),s(a(i),a(n))>s(a(o),a(p))?f.important="horizontal":f.important="vertical",e.using.call(this,t,f)}),r.offset(t.extend(D,{using:o}))}))},t.ui.position={fit:{left:function(t,e){var i=e.within,a=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,o=t.left-e.collisionPosition.marginLeft,r=a-o,l=o+e.collisionWidth-n-a;e.collisionWidth>n?0<r&&l<=0?(i=t.left+r+e.collisionWidth-n-a,t.left+=r-i):t.left=!(0<l&&r<=0)&&l<r?a+n-e.collisionWidth:a:0<r?t.left+=r:0<l?t.left-=l:t.left=s(t.left-o,t.left)},top:function(t,e){var i=e.within,a=i.isWindow?i.scrollTop:i.offset.top,n=e.within.height,o=t.top-e.collisionPosition.marginTop,r=a-o,l=o+e.collisionHeight-n-a;e.collisionHeight>n?0<r&&l<=0?(i=t.top+r+e.collisionHeight-n-a,t.top+=r-i):t.top=!(0<l&&r<=0)&&l<r?a+n-e.collisionHeight:a:0<r?t.top+=r:0<l?t.top-=l:t.top=s(t.top-o,t.top)}},flip:{left:function(t,e){var i=(h=e.within).offset.left+h.scrollLeft,s=h.width,n=h.isWindow?h.scrollLeft:h.offset.left,o=(c=t.left-e.collisionPosition.marginLeft)-n,r=c+e.collisionWidth-s-n,l="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,c=-2*e.offset[0];o<0?((i=t.left+l+h+c+e.collisionWidth-s-i)<0||i<a(o))&&(t.left+=l+h+c):0<r&&(0<(n=t.left-e.collisionPosition.marginLeft+l+h+c-n)||a(n)<r)&&(t.left+=l+h+c)},top:function(t,e){var i=(h=e.within).offset.top+h.scrollTop,s=h.height,n=h.isWindow?h.scrollTop:h.offset.top,o=(c=t.top-e.collisionPosition.marginTop)-n,r=c+e.collisionHeight-s-n,l="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,c=-2*e.offset[1];o<0?((i=t.top+l+h+c+e.collisionHeight-s-i)<0||i<a(o))&&(t.top+=l+h+c):0<r&&(0<(n=t.top-e.collisionPosition.marginTop+l+h+c-n)||a(n)<r)&&(t.top+=l+h+c)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:(u="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(u+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(e,i){var s,a,n,o,r=e.nodeName.toLowerCase();return"area"===r?(a=(s=e.parentNode).name,!(!e.href||!a||"map"!==s.nodeName.toLowerCase())&&0<(a=t("img[usemap='#"+a+"']")).length&&a.is(":visible")):(/^(input|select|textarea|button|object)$/.test(r)?(n=!e.disabled)&&(o=t(e).closest("fieldset")[0])&&(n=!o.disabled):n="a"===r&&e.href||i,n&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){var t;this.form=this.element.form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var e;this.form.length&&((e=this.form.data("ui-form-reset-instances")).splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=(m=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(m,"\\$1")}),t.fn.labels=function(){var e,i,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(e=this.attr("id"))&&(s=(s=this.eq(0).parents().last()).add((s.length?s:this).siblings()),e="label[for='"+t.ui.escapeSelector(e)+"']",i=i.add(s.find(e).addBack(e))),this.pushStack(i))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,a=e?/(auto|scroll|hidden)/:/(auto|scroll)/;e=this.parents().filter((function(){var e=t(this);return(!s||"static"!==e.css("position"))&&a.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&e.length?e:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||0<=i)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:(_=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++_)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var m,_,v=!1;t(document).on("mouseup",(function(){v=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!v){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,a=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!a&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),v=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,v=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var a,n=t.ui[e].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(t,e,i,s){var a,n=t.plugins[e];if(n&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(a=0;a<n.length;a++)t.options[n[a][0]]&&n[a][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return(e=e||t.body).nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||0<t(e.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper);return(e=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element).parents("body").length||e.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,a=this.options,n=this.document[0];this.relativeContainer=null,a.containment?"window"!==a.containment?"document"!==a.containment?a.containment.constructor!==Array?("parent"===a.containment&&(a.containment=this.helper[0].parentNode),(s=(i=t(a.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=a.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1;t=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:t?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:t?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s=this.options,a=this._isRootNode(this.scrollParent[0]),n=t.pageX,o=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(i=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(n=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(n=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),s.grid&&(t=s.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,o=!i||t-this.offset.click.top>=i[1]||t-this.offset.click.top>i[3]?t:t-this.offset.click.top>=i[1]?t-s.grid[1]:t+s.grid[1],t=s.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,n=!i||t-this.offset.click.left>=i[0]||t-this.offset.click.left>i[2]?t:t-this.offset.click.left>=i[0]?t-s.grid[0]:t+s.grid[0]),"y"===s.axis&&(n=this.originalPageX),"x"===s.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var a=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,a))}))},stop:function(e,i,s){var a=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,(function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,a))}))},drag:function(e,i,s){t.each(s.sortables,(function(){var a=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(a=!0,t.each(s.sortables,(function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(a=!1),a}))),a?(n.isOver||(n.isOver=1,s._parent=i.helper.parent(),n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return i.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",e),s.dropped=n.element,t.each(s.sortables,(function(){this.refreshPositions()})),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(e),i.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var a=t("body");s=s.options;a.css("cursor")&&(s._cursor=a.css("cursor")),a.css("cursor",s.cursor)},stop:function(e,i,s){(s=s.options)._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(e,i,s){(s=s.options)._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var a=s.options,n=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(a.axis&&"x"===a.axis||(s.overflowOffset.top+o.offsetHeight-e.pageY<a.scrollSensitivity?o.scrollTop=n=o.scrollTop+a.scrollSpeed:e.pageY-s.overflowOffset.top<a.scrollSensitivity&&(o.scrollTop=n=o.scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(s.overflowOffset.left+o.offsetWidth-e.pageX<a.scrollSensitivity?o.scrollLeft=n=o.scrollLeft+a.scrollSpeed:e.pageX-s.overflowOffset.left<a.scrollSensitivity&&(o.scrollLeft=n=o.scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(e.pageY-t(r).scrollTop()<a.scrollSensitivity?n=t(r).scrollTop(t(r).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<a.scrollSensitivity&&(n=t(r).scrollTop(t(r).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(e.pageX-t(r).scrollLeft()<a.scrollSensitivity?n=t(r).scrollLeft(t(r).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<a.scrollSensitivity&&(n=t(r).scrollLeft(t(r).scrollLeft()+a.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var a=s.options;s.snapElements=[],t(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each((function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,s){for(var a,n,o,r,l,h,c,u,d,p=s.options,f=p.snapTolerance,g=i.offset.left,m=g+s.helperProportions.width,_=i.offset.top,v=_+s.helperProportions.height,b=s.snapElements.length-1;0<=b;b--)h=(l=s.snapElements[b].left-s.margins.left)+s.snapElements[b].width,u=(c=s.snapElements[b].top-s.margins.top)+s.snapElements[b].height,m<l-f||h+f<g||v<c-f||u+f<_||!t.contains(s.snapElements[b].item.ownerDocument,s.snapElements[b].item)?(s.snapElements[b].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[b].item})),s.snapElements[b].snapping=!1):("inner"!==p.snapMode&&(a=Math.abs(c-v)<=f,n=Math.abs(u-_)<=f,o=Math.abs(l-m)<=f,r=Math.abs(h-g)<=f,a&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),d=a||n||o||r,"outer"!==p.snapMode&&(a=Math.abs(c-_)<=f,n=Math.abs(u-v)<=f,o=Math.abs(l-g)<=f,r=Math.abs(h-m)<=f,a&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[b].snapping&&(a||n||o||r||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[b].item})),s.snapElements[b].snapping=a||n||o||r||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var a;s=s.options;(s=t.makeArray(t(s.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}))).length&&(a=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each((function(e){t(this).css("zIndex",a+e)})),this.css("zIndex",a+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(e,i,s){(s=s.options)._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop";i=!1;return 0<e[s]||(e[s]=1,i=0<e[s],e[s]=0,i)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())})).on("mouseleave",(function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){function e(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var i;return this._mouseDestroy(),this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){this._super(t,e),"handles"===t&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var e,i,s,a,n,o=this.options,r=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;i<s.length;i++)a="ui-resizable-"+(e=t.trim(s[i])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+a),n.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(n);this._renderAxis=function(e){var i,s,a;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){r.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=n&&n[1]?n[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,a=!1;for(i in this.handles)(s=t(this.handles[i])[0])!==e.target&&!t.contains(s,e.target)||(a=!0);return!this.options.disabled&&a},_mouseStart:function(e){var i,s,a=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=t(a.containment).scrollLeft()||0,s+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===a?this.axis+"-resize":a),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i=this.originalMousePosition,s=this.axis,a=e.pageX-i.left||0;i=e.pageY-i.top||0,s=this._change[s];return this._updatePrevProperties(),s&&(i=s.apply(this,[e,a,i]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var i,s,a,n=this.options,o=this;return this._helper&&(a=(i=(s=this._proportionallyResizeElements).length&&/textarea/i.test(s[0].nodeName))&&this._hasScroll(s[0],"left")?0:o.sizeDiff.height,s=i?0:o.sizeDiff.width,i={width:o.helper.width()-s,height:o.helper.height()-a},s=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,a=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(t.extend(i,{top:a,left:s})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!n.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s=this.options,a={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0};(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,i=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,t=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),i>a.minHeight&&(a.minHeight=i),s<a.maxWidth&&(a.maxWidth=s),t<a.maxHeight&&(a.maxHeight=t)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,a=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i);i=/nw|ne|n/.test(i);return n&&(t.width=e.minWidth),o&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),a&&(t.height=e.maxHeight),n&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),o&&i&&(t.top=l-e.minHeight),a&&i&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],a=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(a[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,a=i._proportionallyResizeElements,n=(r=a.length&&/textarea/i.test(a[0].nodeName))&&i._hasScroll(a[0],"left")?0:i.sizeDiff.height,o=r?0:i.sizeDiff.width,r={width:i.size.width-o,height:i.size.height-n};o=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,n=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(r,n&&o?{top:n,left:o}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};a&&a.length&&t(a[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s=t(this).resizable("instance"),a=s.options,n=s.element,o=a.containment,r=o instanceof t?o.get(0):/parent/.test(o)?n.parent().get(0):o;r&&(s.containerElement=t(r),/document/.test(o)||o===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(r),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,a){i[t]=s._num(e.css("padding"+a))})),s.containerOffset=e.offset(),s.containerPosition=e.position(),s.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},a=s.containerOffset,n=s.containerSize.height,o=s.containerSize.width,o=s._hasScroll(r,"left")?r.scrollWidth:o,n=s._hasScroll(r)?r.scrollHeight:n,s.parentData={element:r,left:a.left,top:a.top,width:o,height:n}))},resize:function(e){var i=t(this).resizable("instance"),s=i.options,a=i.containerOffset,n=i.position,o=i._aspectRatio||e.shiftKey,r={top:0,left:0},l=i.containerElement;e=!0;l[0]!==document&&/static/.test(l.css("position"))&&(r=a),n.left<(i._helper?a.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-a.left:i.position.left-r.left),o&&(i.size.height=i.size.width/i.aspectRatio,e=!1),i.position.left=s.helper?a.left:0),n.top<(i._helper?a.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-a.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio,e=!1),i.position.top=i._helper?a.top:0),s=i.containerElement.get(0)===i.element.parent().get(0),n=/relative|absolute/.test(i.containerElement.css("position")),s&&n?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top),n=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-r.left:i.offset.left-a.left)),a=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-r.top:i.offset.top-a.top)),n+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-n,o&&(i.size.height=i.size.width/i.aspectRatio,e=!1)),a+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-a,o&&(i.size.width=i.size.height*i.aspectRatio,e=!1)),e||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,a=e.containerPosition,n=e.containerElement,o=(l=t(e.helper)).offset(),r=l.outerWidth()-e.sizeDiff.width,l=l.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:o.left-a.left-s.left,width:r,height:l}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:o.left-a.left-s.left,width:r,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var s=t(this).resizable("instance"),a=s.options,n=s.originalSize,o=s.originalPosition,r={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(a.alsoResize).each((function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),a={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,(function(t,e){var i=(s[e]||0)+(r[e]||0);i&&0<=i&&(a[e]=i||null)})),e.css(a)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,a=i.size,n=i.originalSize,o=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((a.width-n.width)/h)*h,d=Math.round((a.height-n.height)/c)*c,p=n.width+u,f=n.height+d,g=s.maxWidth&&s.maxWidth<p,m=s.maxHeight&&s.maxHeight<f,_=s.minWidth&&s.minWidth>p;a=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),a&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-u):((f-c<=0||p-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),0<f-c?(i.size.height=f,i.position.top=o.top-d):(f=c-e.height,i.size.height=f,i.position.top=o.top+n.height-f),0<p-h?(i.size.width=p,i.position.left=o.left-u):(p=h-e.width,i.size.width=p,i.position.left=o.left+n.width-p))}}),t.ui.resizable,t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i,s;this.previousFilter||(i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget),i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s)))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay((function(){t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,s,a,n=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:n=!1,i=this.previousFilter||"",a=!1,s=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===i?a=!0:s=i+s,i=this._filterMenuItems(s),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}n&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s=this,a=this.options.icons.submenu,n=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=n.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);s._addClass(n,"ui-menu-icon","ui-icon "+a),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=n.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")})),n=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){var i;"icons"===t&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,a;this._hasScroll()&&(s=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,a=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,i=e.offset().top-this.activeMenu.offset().top-s-a,s=this.activeMenu.scrollTop(),a=this.activeMenu.height(),e=e.outerHeight(),i<0?this.activeMenu.scrollTop(s+i):a<i+e&&this.activeMenu.scrollTop(s+i-a+e))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,a;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-s-a<0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,s,a;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return 0<(i=t(this)).offset().top-s+a})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var i=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,a="textarea"===(n=this.element[0].nodeName.toLowerCase()),n="input"===n;this.isMultiLine=a||!n&&this._isContentEditable(this.element),this.valueMethod=this.element[a||n?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))i=s=e=!0;else{i=s=e=!1;var n=t.ui.keyCode;switch(a.keyCode){case n.PAGE_UP:e=!0,this._move("previousPage",a);break;case n.PAGE_DOWN:e=!0,this._move("nextPage",a);break;case n.UP:e=!0,this._keyEvent("previous",a);break;case n.DOWN:e=!0,this._keyEvent("next",a);break;case n.ENTER:this.menu.active&&(e=!0,a.preventDefault(),this.menu.select(a));break;case n.TAB:this.menu.active&&this.menu.select(a);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}}},keypress:function(s){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var a=t.ui.keyCode;switch(s.keyCode){case a.PAGE_UP:this._move("previousPage",s);break;case a.PAGE_DOWN:this._move("nextPage",s);break;case a.UP:this._keyEvent("previous",s);break;case a.DOWN:this._keyEvent("next",s)}}},input:function(t){if(s)return s=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,i){var s;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),(s=i.item.attr("aria-label")||s.value)&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion))},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),a=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=a,this._delay((function(){this.previous=a,this.selectedItem=s}))),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return(e=e&&(e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)))&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,a){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){a(t)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||s)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,(function(t,i){s._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return s.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var b,y,k=/ui-corner-([a-z]){2,6}/g;function w(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=x(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function x(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,C)}function C(){t.datepicker._isDisabledDatepicker((y.inline?y.dpDiv.parent():y.input)[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function D(e,i){for(var s in t.extend(e,i),i)null==i[s]&&(e[s]=i[s]);return e}t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(s,a){var n,o={};if(a)return"controlgroupLabel"===s?((n=e.element.find(a)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(n,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(n.get()))):void(t.fn[s]&&(o=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(a).each((function(){var a=t(this),n=a[s]("instance"),r=t.widget.extend({},o);"button"===s&&a.parent(".ui-spinner").length||((n=n||a[s]()[s]("instance"))&&(r.classes=e._resolveClassesValues(r.classes,n)),a[s](r),r=a[s]("widget"),t.data(r[0],"ui-controlgroup-data",n||a[s]("instance")),i.push(r[0]))}))))})),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label,this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){return(t=this._buildSimpleOptions(t,"ui-spinner")).classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,(function(a){var n=i.options.classes[a]||"";n=t.trim(n.replace(k,""));s[a]=(n+" "+e[a]).replace(/\s+/g," ")})),s},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,s){var a,n=e[s]().data("ui-controlgroup-data");n&&i["_"+n.widgetName+"Options"]?((a=i["_"+n.widgetName+"Options"](1===e.length?"only":s)).classes=i._resolveClassesValues(a.classes,n),n.element[n.widgetName](a)):i._updateCornerClass(e[s](),s)})),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i=this,s=this._super()||{};return this._readType(),e=this.element.labels(),this.label=t(e[e.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(s.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(s.disabled=e),s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this).form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,a=s?this.options.iconPosition:i;e="top"===a||"bottom"===a;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(a),e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(a))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=(void 0===t.showLabel?this.options:t).showLabel,i=(void 0===t.icon?this.options:t).icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(b=t.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}}),t.extend(w.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return D(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,a=e.nodeName.toLowerCase(),n="div"===a||"span"===a;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(t(e),n)).settings=t.extend({},i||{}),"input"===a?this._connectDatepicker(e,s):n&&this._inlineDatepicker(e,s)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?x(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,a=this._get(i,"appendText"),n=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[n?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(s=this._get(i,"showOn"))&&"both"!==s||e.on("focus",this._showDatepicker),"button"!==s&&"both"!==s||(a=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:s,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(s?t("<img/>").attr({src:s,alt:a,title:a}):a)),e[n?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():(t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]&&t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])),!1})))},_autoSize:function(t){var e,i,s,a,n,o;this._get(t,"autoSize")&&!t.inline&&(n=new Date(2009,11,20),(o=this._get(t,"dateFormat")).match(/[DM]/)&&(e=function(t){for(a=s=i=0;a<t.length;a++)t[a].length>i&&(i=t[a].length,s=a);return s},n.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),t.input.attr("size",this._formatDate(t,n).length))},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,a,n){var o,r=this._dialogInst;return r||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(r=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",r)),D(r.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(r,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,i=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+i,a/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",r),this},_destroyDatepicker:function(e){var i,s=t(e),a=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty(),y===a&&(y=null))},_enableDatepicker:function(e){var i,s=t(e),a=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,a.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,s=t(e),a=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,a.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var a,n,o,r,l=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null;a=i||{},"string"==typeof i&&((a={})[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),n=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(l,"min"),r=this._getMinMaxDate(l,"max"),D(l.settings,a),null!==o&&void 0!==a.dateFormat&&void 0===a.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==r&&void 0!==a.dateFormat&&void 0===a.maxDate&&(l.settings.maxDate=this._formatDate(l,r)),"disabled"in a&&(a.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,n),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){(t=this._getInst(t))&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){(t=this._getInst(t))&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){return(t=this._getInst(t))&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(e){var i,s,a=t.datepicker._getInst(e.target),n=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),n=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv))[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,s[0]),(i=t.datepicker._get(a,"onSelect"))?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||s<" "||!i||-1<i.indexOf(s)},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(e){var i,s,a,n;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(s=(a=t.datepicker._get(n,"beforeShow"))?a.apply(e,[e,n]):{})&&(D(n.settings,s),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),i=!1,t(e).parents().each((function(){return!(i|="fixed"===t(this).css("position"))})),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),a=t.datepicker._checkOffset(n,a,i),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":i?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(s=t.datepicker._get(n,"showAnim"),a=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[s]?n.dpDiv.show(s,t.datepicker._get(n,"showOptions"),a):n.dpDiv[s||"show"](s?a:null),t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),t.datepicker._curInst=n)))},_updateDatepicker:function(e){this.maxRows=4,(y=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),a=s[1],n=e.dpDiv.find("."+this._dayOverClass+" a");0<n.length&&C.apply(n.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<a&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null}),0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var a=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?a-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&a<l?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+n>h&&n<h?Math.abs(n+r):0),i},_findPos:function(e){for(var i=this._getInst(e),s=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,s,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),e=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,e):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,e),i||e(),this._datepickerShowing=!1,(e=this._get(a,"onClose"))&&e.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var i;t.datepicker._curInst&&(i=t(e.target),e=t.datepicker._getInst(i[0]),(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===e)||t.datepicker._hideDatepicker())},_adjustDate:function(e,i,s){var a=t(e);e=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,i+("M"===s?this._get(e,"showCurrentAtPos"):0),s),this._updateDatepicker(e))},_gotoToday:function(e){var i=t(e),s=this._getInst(i[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(e=new Date,s.selectedDay=e.getDate(),s.drawMonth=s.selectedMonth=e.getMonth(),s.drawYear=s.selectedYear=e.getFullYear()),this._notifyChange(s),this._adjustDate(i)},_selectMonthYear:function(e,i,s){var a=t(e);(e=this._getInst(a[0]))["selected"+("M"===s?"Month":"Year")]=e["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(a)},_selectDay:function(e,i,s,a){var n=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=t("a",a).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){e=t(e),this._selectDate(e,"")},_selectDate:function(e,i){var s=t(e);e=this._getInst(s[0]);i=null!=i?i:this._formatDate(e),e.input&&e.input.val(i),this._updateAlternate(e),(s=this._get(e,"onSelect"))?s.apply(e.input?e.input[0]:null,[i,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),e=this.formatDate(i,s,this._getFormatConfig(e)),t(a).val(e))},noWeekends:function(t){return[0<(t=t.getDay())&&t<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;function a(t){return(t=w+1<e.length&&e.charAt(w+1)===t)&&w++,t}function n(t){var e=a(t);e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,e=new RegExp("^\\d{"+("y"===t?e:1)+","+e+"}");if(!(e=i.substring(u).match(e)))throw"Missing number at position "+u;return u+=e[0].length,parseInt(e[0],10)}function o(e,s,n){var o=-1;s=t.map(a(e)?n:s,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(s,(function(t,e){var s=e[1];if(i.substr(u,s.length).toLowerCase()===s.toLowerCase())return o=e[0],u+=s.length,!1})),-1!==o)return o+1;throw"Unknown name at position "+u}function r(){if(i.charAt(u)!==e.charAt(w))throw"Unexpected literal at position "+u;u++}for(var l,h,c,u=0,d="string"!=typeof(d=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff)?d:(new Date).getFullYear()%100+parseInt(d,10),p=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,f=(s?s.dayNames:null)||this._defaults.dayNames,g=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,_=-1,v=-1,b=-1,y=-1,k=!1,w=0;w<e.length;w++)if(k)"'"!==e.charAt(w)||a("'")?r():k=!1;else switch(e.charAt(w)){case"d":b=n("d");break;case"D":o("D",p,f);break;case"o":y=n("o");break;case"m":v=n("m");break;case"M":v=o("M",g,m);break;case"y":_=n("y");break;case"@":_=(c=new Date(n("@"))).getFullYear(),v=c.getMonth()+1,b=c.getDate();break;case"!":_=(c=new Date((n("!")-this._ticksTo1970)/1e4)).getFullYear(),v=c.getMonth()+1,b=c.getDate();break;case"'":a("'")?r():k=!0;break;default:r()}if(u<i.length&&(h=i.substr(u),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=d?0:-100)),-1<y)for(v=1,b=y;!(b<=(l=this._getDaysInMonth(_,v-1)));)v++,b-=l;if((c=this._daylightSavingAdjust(new Date(_,v-1,b))).getFullYear()!==_||c.getMonth()+1!==v||c.getDate()!==b)throw"Invalid date";return c},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";function s(e){return(e=o+1<t.length&&t.charAt(o+1)===e)&&o++,e}function a(t,e,i){var a=""+e;if(s(t))for(;a.length<i;)a="0"+a;return a}function n(t,e,i,a){return(s(t)?a:i)[e]}var o,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,l=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,c=(i?i.monthNames:null)||this._defaults.monthNames,u="",d=!1;if(e)for(o=0;o<t.length;o++)if(d)"'"!==t.charAt(o)||s("'")?u+=t.charAt(o):d=!1;else switch(t.charAt(o)){case"d":u+=a("d",e.getDate(),2);break;case"D":u+=n("D",e.getDay(),r,l);break;case"o":u+=a("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=a("m",e.getMonth()+1,2);break;case"M":u+=n("M",e.getMonth(),h,c);break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":s("'")?u+="'":d=!0;break;default:u+=t.charAt(o)}return u},_possibleChars:function(t){function e(e){return(e=a+1<t.length&&t.charAt(a+1)===e)&&a++,e}for(var i="",s=!1,a=0;a<t.length;a++)if(s)"'"!==t.charAt(a)||e("'")?i+=t.charAt(a):s=!1;else switch(t.charAt(a)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":e("'")?i+="'":s=!0;break;default:i+=t.charAt(a)}return i},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),n=a,o=this._getFormatConfig(t);try{n=this.parseDate(i,s,o)||a}catch(t){s=e?"":s}t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),t.currentDay=s?n.getDate():0,t.currentMonth=s?n.getMonth():0,t.currentYear=s?n.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var a,n;return(i=(i=null==i||""===i?s:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(i){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=s.getFullYear(),n=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":n+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,n));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,n))}l=r.exec(i)}return new Date(a,n,o)}(i):"number"==typeof i?isNaN(i)?s:(a=i,(n=new Date).setDate(n.getDate()+a),n):new Date(i.getTime()))&&"Invalid Date"===i.toString()?s:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,a=t.selectedMonth,n=t.selectedYear;e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),a===t.selectedMonth&&n===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,s,a,n,o,r,l,h,c,u,d,p,f,g,m,_,v,b,y,k,w,x,C,D,T,I,M,S,$,P,O=new Date,F=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),E=this._get(t,"isRTL"),z=this._get(t,"showButtonPanel"),N=this._get(t,"hideIfNoPrevNext"),R=this._get(t,"navigationAsDateFormat"),A=this._getNumberOfMonths(t),H=this._get(t,"showCurrentAtPos"),W=(O=this._get(t,"stepMonths"),1!==A[0]||1!==A[1]),L=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),B=this._getMinMaxDate(t,"min"),Y=this._getMinMaxDate(t,"max"),j=t.drawMonth-H,V=t.drawYear;if(j<0&&(j+=12,V--),Y)for(e=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-A[0]*A[1]+1,Y.getDate())),e=B&&e<B?B:e;this._daylightSavingAdjust(new Date(V,j,1))>e;)--j<0&&(j=11,V--);for(t.drawMonth=j,t.drawYear=V,H=this._get(t,"prevText"),H=R?this.formatDate(H,this._daylightSavingAdjust(new Date(V,j-O,1)),this._getFormatConfig(t)):H,i=this._canAdjustMonth(t,-1,V,j)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"e":"w")+"'>"+H+"</span></a>":N?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"e":"w")+"'>"+H+"</span></a>",H=this._get(t,"nextText"),H=R?this.formatDate(H,this._daylightSavingAdjust(new Date(V,j+O,1)),this._getFormatConfig(t)):H,s=this._canAdjustMonth(t,1,V,j)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"w":"e")+"'>"+H+"</span></a>":N?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"w":"e")+"'>"+H+"</span></a>",N=this._get(t,"currentText"),H=this._get(t,"gotoCurrent")&&t.currentDay?L:F,N=R?this.formatDate(N,H,this._getFormatConfig(t)):N,R=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",R=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(E?R:"")+(this._isInRange(t,H)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+N+"</button>":"")+(E?"":R)+"</div>":"",a=parseInt(this._get(t,"firstDay"),10),a=isNaN(a)?0:a,n=this._get(t,"showWeek"),o=this._get(t,"dayNames"),r=this._get(t,"dayNamesMin"),l=this._get(t,"monthNames"),h=this._get(t,"monthNamesShort"),c=this._get(t,"beforeShowDay"),u=this._get(t,"showOtherMonths"),d=this._get(t,"selectOtherMonths"),p=this._getDefaultDate(t),f="",m=0;m<A[0];m++){for(_="",this.maxRows=4,v=0;v<A[1];v++){if(b=this._daylightSavingAdjust(new Date(V,j,t.selectedDay)),x=" ui-corner-all",y="",W){if(y+="<div class='ui-datepicker-group",1<A[1])switch(v){case 0:y+=" ui-datepicker-group-first",x=" ui-corner-"+(E?"right":"left");break;case A[1]-1:y+=" ui-datepicker-group-last",x=" ui-corner-"+(E?"left":"right");break;default:y+=" ui-datepicker-group-middle",x=""}y+="'>"}for(y+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===m?E?s:i:"")+(/all|right/.test(x)&&0===m?E?i:s:"")+this._generateMonthYearHeader(t,j,V,B,Y,0<m||0<v,l,h)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=n?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",g=0;g<7;g++)k+="<th scope='col'"+(5<=(g+a+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+o[w=(g+a)%7]+"'>"+r[w]+"</span></th>";for(y+=k+"</tr></thead><tbody>",C=this._getDaysInMonth(V,j),V===t.selectedYear&&j===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,C)),x=(this._getFirstDayOfMonth(V,j)-a+7)%7,C=Math.ceil((x+C)/7),D=W&&this.maxRows>C?this.maxRows:C,this.maxRows=D,T=this._daylightSavingAdjust(new Date(V,j,1-x)),I=0;I<D;I++){for(y+="<tr>",M=n?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(T)+"</td>":"",g=0;g<7;g++)S=c?c.apply(t.input?t.input[0]:null,[T]):[!0,""],P=($=T.getMonth()!==j)&&!d||!S[0]||B&&T<B||Y&&Y<T,M+="<td class='"+(5<=(g+a+6)%7?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(T.getTime()===b.getTime()&&j===t.selectedMonth&&t._keyEvent||p.getTime()===T.getTime()&&p.getTime()===b.getTime()?" "+this._dayOverClass:"")+(P?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!u?"":" "+S[1]+(T.getTime()===L.getTime()?" "+this._currentClass:"")+(T.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+($&&!u||!S[2]?"":" title='"+S[2].replace(/'/g,"&#39;")+"'")+(P?"":" data-handler='selectDay' data-event='click' data-month='"+T.getMonth()+"' data-year='"+T.getFullYear()+"'")+">"+($&&!u?"&#xa0;":P?"<span class='ui-state-default'>"+T.getDate()+"</span>":"<a class='ui-state-default"+(T.getTime()===F.getTime()?" ui-state-highlight":"")+(T.getTime()===L.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#'>"+T.getDate()+"</a>")+"</td>",T.setDate(T.getDate()+1),T=this._daylightSavingAdjust(T);y+=M+"</tr>"}11<++j&&(j=0,V++),_+=y+="</tbody></table>"+(W?"</div>"+(0<A[0]&&v===A[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}f+=_}return f+=R,t._keyEvent=!1,f},_generateMonthYearHeader:function(t,e,i,s,a,n,o,r){var l,h,c,u,d,p,f,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",b="";if(n||!g)b+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=a&&a.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=s.getMonth())&&(!h||c<=a.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(_||(v+=b+(!n&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",n||!m)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=(o=function(t){return t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10),isNaN(t)?d:t})(u[0]),f=Math.max(p,o(u[1]||"")),p=s?Math.max(p,s.getFullYear()):p,f=a?Math.min(f,a.getFullYear()):f,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),_&&(v+=(!n&&g&&m?"":"&#xa0;")+b),v+"</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),a=t.selectedMonth+("M"===i?e:0);e=Math.min(t.selectedDay,this._getDaysInMonth(s,a))+("D"===i?e:0),e=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,a,e)));t.selectedDay=e.getDate(),t.drawMonth=t.selectedMonth=e.getMonth(),t.drawYear=t.selectedYear=e.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min");e=i&&e<i?i:e;return(t=this._getMinMaxDate(t,"max"))&&t<e?t:e},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){return null==(t=this._get(t,"numberOfMonths"))?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var a=this._getNumberOfMonths(t);a=this._daylightSavingAdjust(new Date(i,s+(e<0?e:a[0]*a[1]),1));return e<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),a=null,n=null,o=this._get(t,"yearRange");return o&&(t=o.split(":"),o=(new Date).getFullYear(),a=parseInt(t[0],10),n=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(a+=o),t[1].match(/[+\-].*/)&&(n+=o)),(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())&&(!a||e.getFullYear()>=a)&&(!n||e.getFullYear()<=n)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){return e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear),e=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay)),this.formatDate(this._get(t,"dateFormat"),e,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}))},t.datepicker=new w,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,a=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get();return(a=Math.max.apply(null,a))>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=t||this.element.find("[autofocus]")).length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);var i,s,a;e.keyCode!==t.ui.keyCode.TAB||e.isDefaultPrevented()||(i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),a=i.filter(":last"),e.target!==a[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){a.trigger("focus")})),e.preventDefault()):(this._delay((function(){s.trigger("focus")})),e.preventDefault()))},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,s){var a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),a=s.click,i={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(i).appendTo(e.uiButtonSet).on("click",(function(){a.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,a){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,s(a))},drag:function(t,i){e._trigger("drag",t,s(i))},stop:function(a,n){var o=n.offset.left-e.document.scrollLeft(),r=n.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=r?"+":"")+r,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",a,s(n))}})},_makeResizable:function(){var e=this,i=this.options,s=i.resizable,a=this.uiDialog.css("position");s="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,s){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,n(s))},resize:function(t,i){e._trigger("resize",t,n(i))},stop:function(s,a){var o=(r=e.uiDialog.offset()).left-e.document.scrollLeft(),r=r.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=r?"+":"")+r,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",s,n(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,a={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(a[t]=e)})),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,i){var s,a=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((s=a.is(":data(ui-draggable)"))&&!i&&a.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((s=a.is(":data(ui-resizable)"))&&!i&&a.resizable("destroy"),s&&"string"==typeof i&&a.resizable("option","handles",i),s||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var e;this.options.modal&&(e=!0,this._delay((function(){e=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var t;this.options.modal&&this.overlay&&((t=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i=this.options,s=this.element.find(".ui-slider-handle"),a=[],n=i.values&&i.values.length||1;for(s.length>n&&(s.slice(n).remove(),s=s.slice(0,n)),e=s.length;e<n;e++)a.push("<span tabindex='0'></span>");this.handles=s.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,a,n,o,r,l=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(o<s||s===o&&(e===l._lastChangedValue||l.values(e)===h.min))&&(s=o,a=t(this),n=e)})),!1!==this._start(e,n)&&(this._mouseSliding=!0,this._handleIndex=n,this._addClass(a,null,"ui-state-active"),a.trigger("focus"),o=a.offset(),r=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:e.pageX-o.left-a.width()/2,top:e.pageY-o.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,n,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY};e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return 1<(t=(t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,a=this.value(),n=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),a=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),n[e]=i),i!==a&&!1!==this._trigger("slide",t,this._uiHash(e,i,n))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,a,n;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,a=e,n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(e,i){var s,a=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(a=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=a-1;0<=s;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e;t-=i;return 2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,a,n,o=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each((function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i})):(s=this.value(),a=this._valueMin(),n=this._valueMax(),i=n!==a?(s-a)/(n-a)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,a,n=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,n)))return}switch(a=this.options.step,i=s=this._hasMultipleValues()?this.values(n):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-a)}this._slide(e,n,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/);-1!==(i=t.inArray(i,s))&&s.splice(i,1),e.removeData("ui-tooltip-id"),(s=t.trim(s.join(" ")))?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,(function(t,e){s._updateContent(e.element)}))},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,(function(i,s){var a=t.Event("blur");a.target=a.currentTarget=s.element[0],e.close(a,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each((function(){var e,s=t(this);s.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))})),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i=this.options.content,s=this,a=e?e.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(e,t,i);(i=i.call(t[0],(function(i){s._delay((function(){t.data("ui-tooltip-open")&&(e&&(e.type=a),this._open(e,t,i))}))})))&&this._open(e,t,i)},_open:function(e,i,s){var a,n,o,r=t.extend({},this.options.position);function l(t){r.of=t,n.is(":hidden")||n.position(r)}s&&((a=this._find(i))?a.tooltip.find(".ui-tooltip-content").html(s):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),n=a.tooltip,this._addDescribedBy(i,n.attr("id")),n.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),(s=t("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:l}),l(e)):n.position(t.extend({of:i},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval((function(){n.is(":visible")&&(l(r.of),clearInterval(o))}),t.fx.interval)),this._trigger("open",e,{tooltip:n})))},_registerCloseHandlers:function(e,i){var s={keyup:function(e){e.keyCode===t.ui.keyCode.ESCAPE&&((e=t.Event(e)).currentTarget=i[0],this.close(e,!0))}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,a=t(e?e.currentTarget:this.element),n=this._find(a);n?(i=n.tooltip,n.closing||(clearInterval(this.delayedShow),a.data("ui-tooltip-title")&&!a.attr("title")&&a.attr("title",a.data("ui-tooltip-title")),this._removeDescribedBy(a),n.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){s._removeTooltip(t(this))})),a.removeData("ui-tooltip-open"),this._off(a,"mouseleave focusout keyup"),a[0]!==this.element[0]&&this._off(a,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,(function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]})),n.closing=!0,this._trigger("close",e,{tooltip:i}),n.hiding||(n.closing=!1))):a.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),a=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[a]={element:e,tooltip:i}},_find:function(t){return(t=t.data("ui-tooltip-id"))?this.tooltips[t]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){return(t=t.closest(".ui-front, dialog")).length||(t=this.document[0].body),t},_destroy:function(){var e=this;t.each(this.tooltips,(function(i,s){var a=t.Event("blur");s=s.element;a.target=a.currentTarget=s[0],e.close(a,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var T,I,M,S,$,P,O,F,E,z,N,R,A,H,W,L,B,Y,j,V,q,U="ui-effects-",G="ui-effects-style",K="ui-effects-animated",X=t;function Q(t,e,i){var s=F[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:t<0?0:s.max<t?s.max:t)}function J(t){var e=P(),i=e._rgba=[];return t=t.toLowerCase(),N($,(function(s,a){var n=(n=a.re.exec(t))&&a.parse(n);a=a.space||"rgba";if(n)return n=e[a](n),e[O[a].cache]=n[O[a].cache],i=e._rgba=n._rgba,!1})),i.length?("0,0,0,0"===i.join()&&T.extend(i,M.transparent),e):M[t]}function Z(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function tt(e){var i,s,a=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,n={};if(a&&a.length&&a[0]&&a[a[0]])for(s=a.length;s--;)"string"==typeof a[i=a[s]]&&(n[t.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(n[i]=a[i]);return n}function et(e,i,s,a){return t.isPlainObject(e)&&(e=(i=e).effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(a=i,s=null,i={}),"number"!=typeof i&&!t.fx.speeds[i]||(a=s,s=i,i={}),t.isFunction(s)&&(a=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=a||i.complete,e}function it(e){return!e||"number"==typeof e||t.fx.speeds[e]||"string"==typeof e&&!t.effects.effect[e]||t.isFunction(e)||"object"==typeof e&&!e.effect}function st(t,e){var i=e.outerWidth();e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}t.effects={effect:{}},S=/^([\-+])=\s*(\d+\.?\d*)/,$=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],P=(T=X).Color=function(t,e,i,s){return new T.Color.fn.parse(t,e,i,s)},O={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},F={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},E=P.support={},z=T("<p>")[0],N=T.each,z.style.cssText="background-color:rgba(1,1,1,.5)",E.rgba=-1<z.style.backgroundColor.indexOf("rgba"),N(O,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),P.fn=T.extend(P.prototype,{parse:function(t,e,i,s){if(t===I)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=T(t).css(e),e=I);var a=this,n=T.type(t),o=this._rgba=[];return e!==I&&(t=[t,e,i,s],n="array"),"string"===n?this.parse(J(t)||M._default):"array"===n?(N(O.rgba.props,(function(e,i){o[i.idx]=Q(t[i.idx],i)})),this):"object"===n?(N(O,t instanceof P?function(e,i){t[i.cache]&&(a[i.cache]=t[i.cache].slice())}:function(e,i){var s=i.cache;N(i.props,(function(e,n){if(!a[s]&&i.to){if("alpha"===e||null==t[e])return;a[s]=i.to(a._rgba)}a[s][n.idx]=Q(t[e],n,!0)})),a[s]&&T.inArray(null,a[s].slice(0,3))<0&&(a[s][3]=1,i.from&&(a._rgba=i.from(a[s])))}),this):void 0},is:function(t){var e=P(t),i=!0,s=this;return N(O,(function(t,a){var n,o=e[a.cache];return o&&(n=s[a.cache]||a.to&&a.to(s._rgba)||[],N(a.props,(function(t,e){if(null!=o[e.idx])return i=o[e.idx]===n[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return N(O,(function(i,s){e[s.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=(o=P(t))._space(),s=O[i],a=(t=0===this.alpha()?P("transparent"):this)[s.cache]||s.to(t._rgba),n=a.slice(),o=o[s.cache];return N(s.props,(function(t,i){var s=i.idx,r=a[s],l=o[s],h=F[i.type]||{};null!==l&&(null===r?n[s]=l:(h.mod&&(h.mod/2<l-r?r+=h.mod:h.mod/2<r-l&&(r-=h.mod)),n[s]=Q((l-r)*e+r,i)))})),this[i](n)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),s=P(t)._rgba;return P(T.map(e,(function(t,e){return(1-i)*s[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=T.map(this._rgba,(function(t,e){return null==t?2<e?1:0:t}));return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=T.map(this.hsla(),(function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+T.map(e,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),P.fn.parse.prototype=P.fn,O.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,i=t[1]/255,s=t[2]/255,a=t[3],n=Math.max(e,i,s),o=Math.min(e,i,s),r=n-o,l=(t=.5*(l=n+o),i=o===n?0:e===n?60*(i-s)/r+360:i===n?60*(s-e)/r+120:60*(e-i)/r+240,0==r?0:t<=.5?r/l:r/(2-l));return[Math.round(i)%360,l,t,null==a?1:a]},O.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2];t=t[3],s=2*s-(i=s<=.5?s*(1+i):s+i-s*i);return[Math.round(255*Z(s,i,e+1/3)),Math.round(255*Z(s,i,e)),Math.round(255*Z(s,i,e-1/3)),t]},N(O,(function(t,e){var i=e.props,s=e.cache,a=e.to,n=e.from;P.fn[t]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===I)return this[s].slice();var e,o=T.type(t),r="array"===o||"object"===o?t:arguments,l=this[s].slice();return N(i,(function(t,e){null==(t=r["object"===o?t:e.idx])&&(t=l[e.idx]),l[e.idx]=Q(t,e)})),n?((e=P(n(l)))[s]=l,e):P(l)},N(i,(function(e,i){P.fn[e]||(P.fn[e]=function(s){var a,n=T.type(s),o="alpha"===e?this._hsla?"hsla":"rgba":t,r=this[o](),l=r[i.idx];return"undefined"===n?l:("function"===n&&(s=s.call(this,l),n=T.type(s)),null==s&&i.empty?this:("string"===n&&(a=S.exec(s))&&(s=l+parseFloat(a[2])*("+"===a[1]?1:-1)),r[i.idx]=s,this[o](r)))})}))})),P.hook=function(t){t=t.split(" "),N(t,(function(t,e){T.cssHooks[e]={set:function(t,i){var s,a,n="";if("transparent"!==i&&("string"!==T.type(i)||(s=J(i)))){if(i=P(s||i),!E.rgba&&1!==i._rgba[3]){for(a="backgroundColor"===e?t.parentNode:t;(""===n||"transparent"===n)&&a&&a.style;)try{n=T.css(a,"backgroundColor"),a=a.parentNode}catch(t){}i=i.blend(n&&"transparent"!==n?n:"_default")}i=i.toRgbaString()}try{t.style[e]=i}catch(t){}}},T.fx.step[e]=function(t){t.colorInit||(t.start=P(t.elem,e),t.end=P(t.end),t.colorInit=!0),T.cssHooks[e].set(t.elem,t.start.transition(t.end,t.pos))}}))},P.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),T.cssHooks.borderColor={expand:function(t){var e={};return N(["Top","Right","Bottom","Left"],(function(i,s){e["border"+s+"Color"]=t})),e}},M=T.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},W=["add","remove","toggle"],L={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(X.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,i,s,a){var n=t.speed(i,s,a);return this.queue((function(){var i=t(this),s=i.attr("class")||"",a=(a=n.children?i.find("*").addBack():i).map((function(){return{el:t(this),start:tt(this)}})),o=function(){t.each(W,(function(t,s){e[s]&&i[s+"Class"](e[s])}))};o(),a=a.map((function(){return this.end=tt(this.el[0]),this.diff=function(e,i){var s,a,n={};for(s in i)a=i[s],e[s]!==a&&(L[s]||!t.fx.step[s]&&isNaN(parseFloat(a))||(n[s]=a));return n}(this.start,this.end),this})),i.attr("class",s),a=a.map((function(){var e=this,i=t.Deferred(),s=t.extend({},n,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()})),t.when.apply(t,a.get()).done((function(){o(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),n.complete.call(i[0])}))}))},t.fn.extend({addClass:(H=t.fn.addClass,function(e,i,s,a){return i?t.effects.animateClass.call(this,{add:e},i,s,a):H.apply(this,arguments)}),removeClass:(A=t.fn.removeClass,function(e,i,s,a){return 1<arguments.length?t.effects.animateClass.call(this,{remove:e},i,s,a):A.apply(this,arguments)}),toggleClass:(R=t.fn.toggleClass,function(e,i,s,a,n){return"boolean"==typeof i||void 0===i?s?t.effects.animateClass.call(this,i?{add:e}:{remove:e},s,a,n):R.apply(this,arguments):t.effects.animateClass.call(this,{toggle:e},i,s,a)}),switchClass:function(e,i,s,a,n){return t.effects.animateClass.call(this,{add:i,remove:e},s,a,n)}}),t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=(B=t.expr.filters.animated,function(e){return!!t(e).data(K)||B(e)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;i<s;i++)null!==e[i]&&t.data(U+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,a=e.length;s<a;s++)null!==e[s]&&(i=t.data(U+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:e.width(),height:e.height()},n=document.activeElement;try{n.id}catch(s){n=document.body}return e.wrap(s),e[0]!==n&&!t.contains(e[0],n)||t(n).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(a),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]!==i&&!t.contains(e[0],i)||t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1;e="vertical"!==i?(e||100)/100:1;return{height:t.height()*e,width:t.width()*s,outerHeight:t.outerHeight()*e,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();1<e&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(G,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(G)||"",t.removeData(G)},mode:function(t,e){return t=t.is(":hidden"),"toggle"===e&&(e=t?"show":"hide"),(t?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),a=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(U+"placeholder",i)),e.css({position:s,left:a.left,top:a.top}),i},removePlaceholder:function(t){var e=U+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,a){return a=a||{},t.each(i,(function(t,i){var n=e.cssUnit(i);0<n[0]&&(a[i]=n[0]*s+n[1])})),a}}),t.fn.extend({effect:function(){function e(e){var i=t(this),s=t.effects.mode(i,l)||a;i.data(K,!0),h.push(s),a&&("show"===s||s===a&&"hide"===s)&&i.show(),a&&"none"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()}var i=et.apply(this,arguments),s=t.effects.effect[i.effect],a=s.mode,n=i.queue,o=n||"fx",r=i.complete,l=i.mode,h=[];return t.fx.off||!s?l?this[l](i.duration,r):this.each((function(){r&&r.call(this)})):!1===n?this.each(e).each(c):this.queue(o,e).queue(o,c);function c(e){var n=t(this);function o(){t.isFunction(r)&&r.call(n[0]),t.isFunction(e)&&e()}i.mode=h.shift(),!1===t.uiBackCompat||a?"none"===i.mode?(n[l](),o()):s.call(n[0],i,(function(){n.removeData(K),t.effects.cleanUp(n),"hide"===i.mode&&n.hide(),o()})):(n.is(":hidden")?"hide"===l:"show"===l)?(n[l](),o()):s.call(n[0],i,o)}},show:(V=t.fn.show,function(t){if(it(t))return V.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(j=t.fn.hide,function(t){if(it(t))return j.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(Y=t.fn.toggle,function(t){if(it(t)||"boolean"==typeof t)return Y.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],(function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])})),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):st(this.css("clip"),this)},transfer:function(e,i){var s=t(this),a="fixed"===(l=t(e.to)).css("position"),n=t("body"),o=a?n.scrollTop():0,r=a?n.scrollLeft():0,l=(n={top:(n=l.offset()).top-o,left:n.left-r,height:l.innerHeight(),width:l.innerWidth()},s.offset()),h=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:l.top-o,left:l.left-r,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(n,e.duration,e.easing,(function(){h.remove(),t.isFunction(i)&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=st(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})},q={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,e){q[e]=function(e){return Math.pow(e,t+2)}})),t.extend(q,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(q,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})),t.effects,t.effects.define("slide","show",(function(e,i){var s,a,n=t(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=e.mode,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u=e.distance||n["top"==h?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(n),s=n.cssClip(),a=n.position()[h],d[h]=(c?-1:1)*u+a,d.clip=n.cssClip(),d.clip[o[l][1]]=d.clip[o[l][0]],"show"===r&&(n.cssClip(d.clip),n.css(h,d[h]),d.clip=s,d[h]=a),n.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}))})),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(s)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,s=t.ui.mouse.prototype,a=s._mouseInit,n=s._mouseDestroy;s._touchStart=function(t){!i&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,this._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},s._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},s._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},s._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),a.call(e)},s._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),n.call(e)}}}(jQuery);
