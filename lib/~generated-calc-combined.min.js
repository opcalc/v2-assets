"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,s,n,a,o,r=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;i<a;i+=1)o[i]=str(i,l)||"null";return n=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+r+"]":"["+o.join(",")+"]",gap=r,n}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;i<a;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&o.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&o.push(quote(s)+(gap?": ":":")+n);return n=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+r+"}":"{"+o.join(",")+"}",gap=r,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(void 0!==(s=walk(n,i))?n[i]=s:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.onerror=function(t,e,i,s,n){var a=n?n.stack:"N/A",o={reqId:-1,message:t,fileName:e,lineNumber:i,url:window.location.protocol+"//"+window.location.host+"/"+window.location.pathname,callstack:a};$.ajax("/ajax/reportError",{type:"POST",data:o})};var tzOffset=-5,tzOffsetStr="-0500";function getInternetExplorerVersion(){var t=!1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}var ieVer=getInternetExplorerVersion();function openInNew(t,e){null==e&&(e={});var i={directories:"no",fullscreen:"no",height:parseInt(.8*$(window).height(),10),top:parseInt(.1*$(window).height(),10),width:parseInt(.8*$(window).width(),10),left:parseInt(.1*$(window).width(),10),location:"no",menubar:"no",status:"no",toolbar:"no"};for(var s in i)null==e[s]&&(e[s]=i[s]);var n="";for(s in e)n+=s+"="+e[s]+",";return window.open(t.href,"opc_popup",n),!1}function obj2str(t,e){(e=void 0)&&(e=0);var i="",s=0;if("object"==typeof t)for(var n in t){for(s=0;s<e;s++)i+=" ";i+=n+"=>"+t[n]+"\r\n","object"==typeof t[n]&&(i+=obj2str(t[n],e+1))}else i+=t;return i}function descNumList(t){for(var e="",i=0;i<t.length;i++)0==i?e+=t[i]:t[i]-t[i-1]>1?e+=("-"==e.slice(-1)?t[i-1]+", ":", ")+t[i]:t[i]-t[i-1]==1&&(e+=("-"==e.slice(-1)?"":"-")+(i==t.length-1?t[i]:""));return e}function commaVal(t){x=(t+="").split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1,$2");return x1+x2}function roundTo(t,e,i,s){null==e&&(e=0),null==i&&(i=!1),null==s&&(s=!0);var n=""+Math.round(parseFloat(t)*Math.pow(10,e))/Math.pow(10,e);if(i){-1==n.indexOf(".")&&(n+=".");for(var a=n.length-n.indexOf("."),o=0;o<e+1-a;o++)n+="0";s&&".00"==n.substr(n.length-3)&&(n=n.substring(0,n.length-3))}return n}function build_url_query(t,e,i){var s,n=[];for(k in t)s=t[k],null==i?n.push("array"==typeof s?build_url_query(s,!1,i+k):k+"="+urlencode(s)):n.push("array"==typeof s?build_url_query(s,!1,i+"["+k+"]"):i+"["+k+"]="+urlencode(s));return implode("&",n)}function urlencode(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function implode(t,e){var i="",s="",n="";if(1===arguments.length&&(e=t,t=""),"object"==typeof e){if(e instanceof Array)return e.join(t);for(i in e)s+=n+e[i],n=t;return s}return e}function explode(t,e,i){var s={0:""};if(arguments.length<2||void 0===arguments[0]||void 0===arguments[1])return null;if(""===t||!1===t||null===t)return!1;if("function"==typeof t||"object"==typeof t||"function"==typeof e||"object"==typeof e)return s;if(!0===t&&(t="1"),i){var n=e.toString().split(t.toString()),a=n.splice(0,i-1),o=n.join(t.toString());return a.push(o),a}return e.toString().split(t.toString())}function in_array(t,e,i){var s="";if(!!i){for(s in e)if(e[s]===t)return!0}else for(s in e)if(e[s]==t)return!0;return!1}function array_includes(t,e){return Array.prototype.includes?t.includes(e):!!~t.indexOf(e)}function index_assoc_array(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e.sort((function(t,e){return t-e})),e}function date(t,e,i){null==i&&(i=tzOffset);var s,n,a,o=/\\?([a-z])/gi,r=function(t,e){return(t+="").length<e?new Array(++e-t.length).join("0")+t:t},l=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],h={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};return a=function(t,e){return n[t]?n[t]():e},n={d:function(){return r(n.j(),2)},D:function(){return n.l().slice(0,3)},j:function(){return s.getDate()},l:function(){return l[n.w()]+"day"},N:function(){return n.w()||7},S:function(){return h[n.j()]||"th"},w:function(){return s.getDay()},z:function(){var t=new Date(n.Y(),n.n()-1,n.j()),e=new Date(n.Y(),0,1);return Math.round((t-e)/864e5)+1},W:function(){var t=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),e=new Date(t.getFullYear(),0,4);return 1+Math.round((t-e)/864e5/7)},F:function(){return l[6+n.n()]},m:function(){return r(n.n(),2)},M:function(){return n.F().slice(0,3)},n:function(){return s.getMonth()+1},t:function(){return new Date(n.Y(),n.n(),0).getDate()},L:function(){return 1===new Date(n.Y(),1,29).getMonth()|0},o:function(){var t=n.n(),e=n.W();return n.Y()+(12===t&&e<9?-1:1===t&&e>9)},Y:function(){return s.getFullYear()},y:function(){return(n.Y()+"").slice(-2)},a:function(){return s.getHours()>11?"pm":"am"},A:function(){return n.a().toUpperCase()},B:function(){var t=3600*s.getUTCHours(),e=60*s.getUTCMinutes(),i=s.getUTCSeconds();return r(Math.floor((t+e+i+3600)/86.4)%1e3,3)},g:function(){return n.G()%12||12},G:function(){return s.getHours()},h:function(){return r(n.g(),2)},H:function(){return r(n.G(),2)},i:function(){return r(s.getMinutes(),2)},s:function(){return r(s.getSeconds(),2)},u:function(){return r(1e3*s.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){return 0+(new Date(n.Y(),0)-Date.UTC(n.Y(),0)!=new Date(n.Y(),6)-Date.UTC(n.Y(),6))},O:function(){var t=s.getTimezoneOffset();return(t>0?"-":"+")+r(Math.abs(t/60*100),4)},P:function(){var t=n.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-s.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(o,a)},r:function(){return"D, d M Y H:i:s O".replace(o,a)},U:function(){return s.getTime()/1e3|0}},this.date=function(t,e){return this,(s=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e)).setTime(s.getTime()+6e4*s.getTimezoneOffset()+36e5*i),t.replace(o,a)},this.date(t,e)}function ucFirst(t){return void 0===t&&(t=""),t.length?t[0].toUpperCase()+t.substr(1):t}function formatPrice(t){void 0===t&&(t=0);const e=Math.abs(t),i=t<0?"-":"";return Number(e).toLocaleString?i+"$"+Number(e).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}):i+"$"+roundTo(e,2,!0,!1)}function dateFromYMD(t,e,i,s){null==i&&(i=0),null==s&&(s=0);var n=tzOffset;return date(t,mktime(i,s,0,e.substr(5,2),e.substr(8,2),e.substr(0,4)),n)}function safeSelect(t,e,i){try{var s=e(t);return void 0===s?i:s}catch(t){return i}}function expDescFromYMD(t){var e=8===t.length?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,4):t,i=dateFromYMD("Y",e)==date("Y")?"":" "+dateFromYMD("Y",e);return dateFromYMD("j<\\s\\up>S</\\s\\up> M"+i,e)}function timeFromYMD(t,e,i){return null==e&&(e=0),null==i&&(i=0),mktime(e,i,0,t.substr(5,2),t.substr(8,2),t.substr(0,4))}function mktime(t,e,i,s,n,a){var o=n+" "+[0,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][parseInt(s,10)]+" "+a+" "+t+":"+(e<10?"0":"")+parseInt(e,10)+":"+(i<10?"0":"")+parseInt(i,10)+" "+tzOffsetStr;return new Date(o).getTime()/1e3}function getCallStack(){var t=[],e=!1;try{i.dont.exist+=0}catch(o){if(o.stack){for(var i=0,s=(n=o.stack.split("\n")).length;i<s;i++)n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&t.push(n[i]);t.shift(),e=!0}else if(window.opera&&o.message){var n;for(i=0,s=(n=o.message.split("\n")).length;i<s;i++)if(n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var a=n[i];n[i+1]&&(a+=" at "+n[i+1],i++),t.push(a)}t.shift(),e=!0}}if(!e)for(var o=arguments.callee.caller;o;){var r=o.toString(),l=r.substring(r.indexOf("function")+8,r.indexOf(""))||"anonymous";t.push(l),o=o.caller}return t}function openSMSurvey(){$("#sm-survey-wrapper").fadeIn(100),$(".survey-teaser").fadeOut(100),setCookie("survey_completed",!0,{expiry_days:365})}function closeSMSurvey(){$("#sm-survey-wrapper").fadeOut(100)}function jq_exclusive_switch(t,e,i,s){null==i?i="":i+="_";var n=t.attr("name"),a=n.indexOf(":"),o=n.substring(0,a),r=n.substring(a+1),l=$("#"+r+".jq_exclusive_"+i+"target"),h=$(t[0]);array_includes(["tablet","mobile"],viewStyle)&&l.attr("data-switch-toggle")?setTimeout((function(){l.toggle(e),h.hasClass("_-selected")?h.removeClass("_-selected"):h.addClass("_-selected")}),s?100:0):setTimeout((function(){l.show(e)}),s?100:0),$(".jq_exclusive_"+i+"target").filter("[name='"+o+"']").not(l).hide(e);var u=t.parents(".dialog_tab, .unique_switch");return u.is(".dialog_tab")?(u.siblings().removeClass("dialog_tab_selected"),u.siblings().addClass("dialog_tab"),u.addClass("dialog_tab_selected")):u.is(".unique_switch")&&(u.siblings().removeClass("unique_switch_selected"),u.siblings().addClass("unique_switch"),u.addClass("unique_switch_selected")),!1}function loadSliders(){$(".jq_exclusive_switch").click((function(){return jq_exclusive_switch($(this),0)})),$(".jq_exclusive_switch_flash").click((function(){return jq_exclusive_switch($(this),0,void 0,!0)})),$(".jq_exclusive_slide_switch").click((function(){return jq_exclusive_switch($(this),200,"slide")}))}function init_funcs(t){loadSliders(),$("#msg").ajaxError((function(t,e,i,s){}))}function ajaxRequest(t,e,i,s,n){for(var a in requests)if(requests.hasOwnProperty(a)){if(delete requests[a].data.reqId,requests[a].status==REQ_PENDING&&requests[a].desc==t&&requests[a].cmd==e&&requests[a].data==serialize1D(i)&&requests[a].time>(new Date).getTime()-1e3)return!1}return i.reqId=nextRequest(t,e,i,n),ajaxCall(e,i,(function(t){requests[i.reqId].status=t.status,s(requests[i.reqId].localData,t)})),i.reqId}function ajaxCall(t,e,i){$.getJSON(BASE_URL+WEB_PATH+"ajax/"+t,e,i)}var requests=new Array,numRequests=0;function nextRequest(t,e,i,s){return requests[numRequests]=new Array,requests[numRequests].time=(new Date).getTime(),requests[numRequests].checker=setInterval("checkRequest("+numRequests+")",1e3),requests[numRequests].desc=t,requests[numRequests].cmd=e,requests[numRequests].localData=s,requests[numRequests].data=serialize1D(i),requests[numRequests].status=REQ_PENDING,++numRequests-1}function checkRequest(t){var e=(new Date).getTime()-requests[t].time,i=requests[t].cmd;requests[t].status==REQ_OK||requests[t].status==REQ_ERROR||"activateTab"==i||"closeTab"==i?clearInterval(requests[t].checker):(e>=5e3&&"newTab"==i||e>=15e3&&"getStockPrice"==i||e>=3e4&&("getOptions"==i||"calculate"==i))&&(inputError("It's taking a while "+requests[t].desc+", please refresh the page and try again"),clearInterval(requests[t].checker))}function serialize1D(t){var e="";for(var i in t)e+=i+"="+t[i]+"&";return e}function reportError(t){alert(t)}function alert_return(t){alert(obj2str(t))}$.fn.extend({getTH:function(){var t=$(this).prevAll().length;return $(this).parents("table").find("td, th").eq(t)}}),$.fn.extend({getRowTH:function(){return $(this).parents("tr").find("th").eq(0)}}),function(t){t.scrollTo=function(e,i){var s,n=t("html").scrollTop(),a=t(e).offset().top,o=t(window).innerHeight();!1!==(s=a<n?a:!(a<n+2*o/3)&&a-o*(1/3))&&t("html, body").animate({scrollTop:s},void 0===i?500:i)}}(jQuery);var listeners=new Array,curTab;function addListener(t,e,i){null==listeners[t]&&(listeners[t]=new Array),listeners[t].push({func:e,data:i})}function triggerListener(t,e){if(null!=listeners[t])for(i in listeners[t])e.tab_num==listeners[t][i].data.tab_num&&listeners[t][i].func(t,e,listeners[t][i].data);return!0}function newTab(t,e){void 0!==window.viewStyle&&"full"!==viewStyle&&$("#top_but-calculator").hide();var i=null==e?ajaxRequest("creating new tab: "+t,"newTab",{strat:t},newTab_return,{strat:t}):e;return $(".popup").dialog("close"),$("[name='strat_tabs']").hide(),$("#calcs_holder").append('<div class="jq_exclusive_target" id="newTab_req'+i+'" name="strat_tabs"><p><span class="loading">Loading</span></p></div>'),!1}function newTab_return(reqData,data,cfg){if(cfg=Object.assign({show:!0},cfg||{}),null!=data["strat-info"]&&null!=data["strat-info"].text){_opcGaq.push(["_trackPageview","/calculator/"+data["strat-info"].name+".html"]);var code='<li class="stratTab dialog_tab"name="strat_tabs:strat_'+data.tabId+'" id="strat_'+data.tabId+'_button"><div><a href="#" name="strat_tabs:strat_'+data.tabId+'" class="jq_exclusive_switch_flash name" onclick="showTab(this); return false;">New '+data["strat-info"].text+"</a> <a href='#' class='close_x' onclick=\"return closeTab(this);\" title='close'>X</a><img src='"+WEB_PATH_STATIC+"images/tab-fade-top.gif' class='tab_fade_top'/><img src='"+WEB_PATH_STATIC+"images/tab-fade-bot.gif' class='tab_fade_bot'/></div></li>";$("#tab_holder_tabs").prepend(code)}$("#newTab_req"+data.reqId).remove();var hideClass=!1===cfg.show?" jq_start_hidden":"";$("#calcs_holder").append('<div class="jq_exclusive_target stratContent'+hideClass+'" id="strat_'+data.tabId+'" name="strat_tabs">'+data.code+"<div class='results jq_start_hidden' id='t0_results'>\r\n <div id='t"+data.tabId+"_summary' class='summary'></div>\r\n <div id='t"+data.tabId+"_ads' class='ads'></div>\r\n <div id='t"+data.tabId+"_graph' class='graph'></div></div>\r\n</div>"),$("[name='strat_tabs:strat_"+data.tabId+"']").click((function(){return jq_exclusive_switch($(this),0)})),null!=data.script&&""!=data.script&&eval(data.script),null!=data.js_files&&data.js_files,null!=data.css_files&&data.css_files,cfg.show&&($("[name='strat_tabs:strat_"+data.tabId+"']").click(),refreshIntraStratAd(data.tabId))}function showTab(t,e,i){closeCurrentTabs&&closeCurrentTabs(),void 0===e&&_opcGaq.push(["_trackEvent","Tabs","Show"]);var s="number"==typeof t?t:$(t).attr("name").substring(17);return $(".popup").dialog("close"),"F"!==s&&$("#strat_F_button").removeClass("dialog_tab_selected"),refreshIntraStratAd(s),tabsFromFinder&&tabsFromFinder[s]&&$("#strat_"+s+" .breadcrumb").html('<a href="/option-finder.html" onclick="switchToTabVisually(\'F\'); return false;">Option Finder Results</a> &gt;'),!0!==i&&safeSelect(window,(function(t){return t.history.state.tabNo}))!==s&&openTabHandleRoutes(s),curTab=s,ajaxRequest("activating tab","activateTab",{stratNo:s},general_return),!1}function getRouteData(t){if("F"===t)return{title:"Option finder - by Options Profit Calculator",url:"/option-finder.html"};var e=$("#t"+t+"_stratKey").val(),i=$("#strat_"+t+"_button div a .minor").eq(0).text(),s=$("#strat_"+t+"_button div a").eq(0).text();return{title:s.slice(0,s.length-i.length)+" "+i,url:"/calculator/"+e+".html"}}function openTabHandleRoutes(t){if(window.history&&window.history.pushState){var e=getRouteData(t);window.history.pushState({tabNo:t},e.title,BASE_URL+e.url),$("head title").text(e.title)}else document.location.hash="tab="+t}function switchToTabVisually(t){$("#strat_"+t).length>0&&($(".stratTab.dialog_tab").removeClass("dialog_tab_selected"),$(".stratContent").hide(),$("#strat_"+t+"_button").addClass("dialog_tab_selected"),$("#strat_"+t).show())}function refreshIntraStratAd(t){window.fusetag&&window.fusetag.loadSlotById&&($("#fuse-21977025922-"+t).attr("data-fuse")||($("#fuse-21977025922-"+t).attr("data-fuse","21977025922"),window.fusetag.loadSlotById(21977025922,"fuse-21977025922-"+t)))}function closeTab(t){var e=$(t).parent().parent(),i=$(e).next(),s=$(e).prev(),n=$("a:first",e).attr("name"),a=n.indexOf(":"),o=(n.substring(0,a),n.substring(a+1)),r=o.substring(6);if($("#"+o+".jq_exclusive_target").remove(),$(e).remove(),rq=ajaxRequest("closing tab","closeTab",{stratNo:r},general_return),r==curTab){var l=r;i.length?l=i[0].id.substr(6,i[0].id.length-13):s.length&&(l=s[0].id.substr(6,s[0].id.length-13)),jq_exclusive_switch($('a[name="strat_tabs:strat_'+l+'"]'),0),_opcGaq.push(["_trackEvent","Tabs","Close"]),showTab(parseInt(l),!0)}return!1}function general_return(t){}function viewMore(t){return $(".more",$(t.currentTarget).parent()).slideToggle(),$(this).hasClass("expanded")?$(t.currentTarget).removeClass("expanded"):$(t.currentTarget).addClass("expanded"),!1}function addMsg(t,e){inputError(t,e)}function inputError(t,e){if(null==e&&(e="error"),"verbose"==e)return alert(t),!1;$("#status_messages").append("<div class='msg txt_"+e+"' style='display:none;'>"+t+" <a href='#close' class='close_x' title='close' onclick='return closeMsg(this);'>x</a></div>"),$("#status_messages").show(),$("#status_messages .msg:last").delay(500).hide().slideDown(500).delay(5e3).slideUp(1e3,(function(){var t=$(this).parent();$(this).remove(),0==$(".msg",t).length&&t.show().slideUp(200).fadeOut()}))}function closeMsg(t){$(t).parent().clearQueue().slideUp(1e3,(function(){var t=$(this).parent();$(this).remove(),0==$(".msg",t).length&&t.show().slideUp(200).fadeOut()}))}function setCookie(t,e,i){null==i.expiry_days&&(i.expiry_days=30),null==i.path&&(i.path="/");var s=new Date;s.setDate(s.getDate()+i.expiry_days);var n=escape(e)+";path="+escape(i.path)+";expires="+s.toUTCString()+";max-age="+60*i.expiry_days*60*24+";domain="+(COOKIE_DOMAIN||"");document.cookie=t+"="+n;var a=";path="+escape(i.path)+";expires=Thu, 01 Jan 1970 00:00:01 GMTNaN"+(BASE_URL||"").replace(/(http)?s?:?\/?\/?/,"");document.cookie=t+"="+a}function getCookie(t){var e,i,s,n=document.cookie.split(";");for(e=0;e<n.length;e++)if(i=n[e].substr(0,n[e].indexOf("=")),s=n[e].substr(n[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return unescape(s)}function onAdChange(t,e){if(!!e||(t||[]).filter((function(t){return t.addedNodes.length>0})).length>0){var i=$(t[0].target).closest(".ad");(!i.css("minHeight")||i.height()>parseFloat(i.css("minHeight")))&&i.css("minHeight",i.height()+"px")}}function isTransitionalTheme(){return $("body").hasClass("transitional")}function getLoadingHtml(t){return"<span class='loading-wrapper'><em class='loading'>"+t+"</em></span>"}window.addEventListener("popstate",(function(t){var e=safeSelect(t,(function(t){return t.state.tabNo}),!1);!1!==e&&switchToTabVisually(e)})),function(){var t=getCookie("first_use");setCookie("first_use",null==t?parseInt((new Date).getTime()/1e3,10):t,{expiry_days:36500});var e=getCookie("PHPSESSID"),i=getCookie("num_visits");null==i&&(i=0),setCookie("num_visits",parseInt(i)+1,{expiry_days:36500}),setCookie("last_session_id",e,{expiry_days:36500})}(),$(document).click((function(t){isTransitionalTheme()&&$("#top_menu .id-calculator").hasClass("dialog_tab_selected")&&"calc-menu-toggler"!==$(t.target).attr("data-special")&&setTimeout((function(){(0===$(t.target).closest("#top_but-calculator").length||$(t.target).closest("#options_menu a").length>0)&&($("#top_but-calculator").hide(),$("#top_menu .id-calculator").removeClass("dialog_tab_selected"))}),100)})),$(document).ready((function(){"undefined"!=typeof __ez&&!0!==(__ez.template||{}).isOrig&&$("[data-fuse]").remove();var t="undefined"!=typeof MutationObserver&&new MutationObserver(onAdChange);t.observe&&$(".ad").each((function(){t.observe(this,{subtree:!0,childList:!0}),onAdChange([{target:this}],!0)}))}));var loadingHtml=getLoadingHtml("Loading"),results=[];function getPrice(t){var e=$("#"+t.eleId+"-symbol").val();if(""===e);else{t.button="string"==typeof t.button?"#"+t.button:t.button,$(t.button).addClass("loading").html("Loading");var i={button:t.button,uEleId:t.eleId,eleId:t.eleId,stock:e};if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i,!0);ajaxRequest("getting price: "+e,"getStockPrice",{stock:e},getPrice_return,{eleId:t.eleId,button:t.button,stock:e});getOptions(i)}}var underlying_symb=[];function getPrice_return(t,e){if($(t.button).removeClass("loading").html(""),e.status==REQ_ERROR)inputError(e.desc||"No prices found"),4==e.data_status&&_opcGaq.push(["_trackEvent","Symbol not found",t.stock]);else if(e.status==REQ_OK){var i=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),i=e.symbol_correction.toUpperCase()),_opcGaq.push(["_trackEvent","Symbol search",(i||"").toLowerCase()]),underlying_symb[curTab]=i;var s=parseFloat(e.price.last)>0?e.price.last:(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2,n=e.price.bid>0&&e.price.ask>0?(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2:e.price.last,a=parseFloat(e.price.ivHist)>0?parseFloat(e.price.ivHist):null;""===$("#"+t.eleId+"-price").val()&&$("#"+t.eleId+"-price").val(s),$("#"+t.eleId+"-curPrice").val(s),$("#"+t.eleId+"-lastPrice").val(s),$("#"+t.eleId+"-marketPrice").val(n),$("#"+t.eleId+"-ivHist").val(a),$("#"+t.eleId+"-curPrice").length>0&&$("#"+t.eleId+"-curPrice").get(0).onchange&&$("#"+t.eleId+"-curPrice").get(0).onchange()}}function isToStock(t){return t.indexOf(".to")===t.length-3&&t.length>=4}function getOptions(t){var e=$("#"+t.uEleId+"-symbol").val().trim(),i={stock:e,uEleId:t.uEleId,eleId:t.eleId};if(""===e);else{if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i);if(t.showSelect)for(var s in i.defaultType=t.defaultType,i.showSelect=!0,requests)requests[s].status==REQ_PENDING&&requests[s].desc=="getting options: "+e&&"getOptions"==requests[s].cmd&&requests[s].data==serialize1D({stock:e})&&(requests[s].localData=i);ajaxRequest("getting options: "+e,"getOptions",{stock:e},getOptions_return,i)}}function sortChainOptions(t){return Object.keys(t).reduce((function(e,i){return"_data_source"===i||(e[8===i.length?i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2):i]={c:padStrikeKeys(t[i].c),p:padStrikeKeys(t[i].p)}),e}),{})}function padStrikeKeys(t){return Object.keys(t).sort((function(t,e){return parseFloat(t)-parseFloat(e)})).reduce((function(e,i){return e[parseFloat(i).toFixed(2)]=t[i],e}),{})}function getV3priceData(t,e,i){$.getJSON(V3_API_PATH+"/price/"+t).always((function(t){if(!t||!t.data||"SUCCESS"===!t.data.result)return inputError("Prices not found"),void $("#"+e.eleId+"-loading").hide();var s=sortChainOptions(t.data.options);getOptions_return(e,{status:REQ_OK,options:s}),i&&getPrice_return(e,{status:REQ_OK,price:t.data.stock})}))}var opCache={};function getOptions_return(t,e){$("#"+t.eleId+"-option .panel_button").removeClass("loading");var i=t.eleId.slice(1,t.eleId.indexOf("e"));if(e.status==REQ_ERROR)opCache[t.stock]=REQ_ERROR,inputError(e.desc||"Options not found"),t.showSelect&&(inputError("Options not found for that symbol.","verbose"),_opcGaq.push(["_trackEvent","Options not found",t.stock]),$("#"+t.eleId+"-option_selector").dialog("close"));else if(e.status==REQ_OK){$("#strat_"+i+'_form input[name$="-expiry"]').each((function(t,s){var n=$(s).attr("name").substr(0,$(s).attr("name").length-7),a=$(s).val(),o=$("#strat_"+i+'_form input[name="'+n+'-strike"]').val(),r=$("#strat_"+i+'_form select[name="'+n+'-opType"]').val(),l=(((e.options||{})[a]||{})[r]||{})[o];if(l){var h=$("#strat_"+i+'_form input[name="'+n+'-curPrice"]'),u=parseFloat(h.val()),c=getBestPrice(l);$("#strat_"+i+'_form input[name="'+n+'-curPrice"]').val(c),u!==c&&$("#strat_"+i+'_form input[name="'+n+'-iv"]').val("")}}));var s=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),s=e.symbol_correction.toUpperCase()),opCache[s]=sortChainOptions(e.options),t.showSelect&&optionSelect(t)}triggerListener("option_data",{tab_num:i,symbol:s})}function optionSelect(t){var e=$("#"+t.uEleId+"-symbol").val(),i=$("#"+t.uEleId+"-curPrice").val(),s=($("#"+t.eleId+"-strike").val(),$("#"+t.eleId+"-opType").val()),n=$("#"+t.eleId+"-act").val(),a=($("#"+t.eleId+"-expiry").val(),$("#"+t.eleId+"-option_selector"));if(""!==e){if(void 0!==viewStyle&&"mobile"===viewStyle){var o=$(window).width(),r=$(window).height();$(a).dialog("option",{width:o-5,height:r-5})}if(opCache[e]&&opCache[e]!==REQ_ERROR){$(a).html(loadingHtml);var l=optionsSelectCode({eleId:t.eleId,underlying_price:i,opType:s,opAct:n},opCache[e]);$(a).dialog("open"),a.html(l),initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,stock:e})}else opCache[e]==REQ_ERROR?inputError("Options not found for that symbol.","verbose"):t.showSelect||(getOptions({showSelect:!0,eleId:t.eleId,defaultType:t.defaultType,uEleId:t.uEleId}),$(a).dialog("open"))}else inputError('Enter an underlying symbol in the "Symbol" field above before trying to select options');return!1}var shownAds=!1,showAds_intId=!1,showAds_timeDur=5,min_adShow_time=2,showAds_timeLeft,loadCtr=$("#loading-ctnr");function doCalculation(t,e,i){var s={replaceWithLoader:!1};i||(i={}),Object.keys(s).forEach((function(t){void 0===i[t]&&(i[t]=s[t])})),0===loadCtr.length&&(loadCtr=$("#loading-ctnr")),$("body").hasClass("full")&&(showAds_timeDur=0,min_adShow_time=0),$(".field_error").removeClass("field_error");var n={};$.each($("#strat_"+t+" form").serializeArray(),(function(t,e){n[e.name]=e.value})),n.tabId=t;var a=validateCalcReq(e,n);if($("#t"+t+"_agree_tc").length>0&&void 0===$("#t"+t+"_agree_tc").attr("checked")&&(!1===a&&(a=[]),a.push("agree_tc_label")),a)inputError("Please complete the fields below..."),highlightValErrors(t,a);else if($("#t"+t+"_graph-newTab").attr("checked")){"undefined"!=typeof fromClose&&_opcGaq.push(["_trackEvent","Tabs","Re-calc in new tab"]),newTab(!1,ajaxRequest("calculating results","calculate",n,doCalculation_return,{tab_num:t})),$.scrollTo("#top_menu",500)}else{var o=($("#t"+t+"_graph").html()||"").length>0;$("#t"+t+"_submit").attr("disabled","disabled"),$("#t"+t+"_submit").attr("value","Calculating..."),i.replaceWithLoader||!o?($("#t"+t+"_graph-newTab_holder").css("display",""),$("#strat_"+t+" .results").hide(),$("#t"+t+"_graph").html(""),$(".loading-wrapper",loadCtr).replaceWith(loadingHtml),loadCtr.show(),$.scrollTo("#load-anchor",500)):$("#strat_"+t+" .results").css("opacity",.4),shownAds=!0,$(".popup").dialog("close"),ajaxRequest("calcuating results","calculate",n,doCalculation_return,{tab_num:t,noScroll:!i.replaceWithLoader})}}function updateShowCountdown(t){showAds_timeLeft<=1?(clearInterval(showAds_intId),loadCtr.hasClass("load-timeout")?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t)):(showAds_timeLeft=Math.max(0,showAds_timeLeft-1),$("#loading-ctnr .showResultsBut .time-left").html("("+showAds_timeLeft+")"))}function validateCalcReq(t,e){var i=[];for(var s in e)""===e[s]&&(s.indexOf("-num")>0||s.indexOf("-strike")>0||s.indexOf("underlying-curPrice")>=0||s.indexOf("-expiry")>0||s.indexOf("-opType")>0||s.indexOf("-price")>0&&-1===s.indexOf("-priceMin")&&-1===s.indexOf("-priceMax"))&&(i[i.length]=s);return i.length>0&&i}function highlightValErrors(t,e){var i="";for(var s in e){if(e[s].indexOf("-strike")>0||e[s].indexOf("-opType")>0||e[s].indexOf("-expiry")>0)i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s].slice(0,e[s].lastIndexOf("-"))+'-option"] .panel_button';else i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s]+'"]'}$(i).each((function(){$(this).addClass("field_error")}))}function hideLoaderShowGraph(t){loadCtr.hide(),$("#t"+t+"_submit").attr("value","Calculate"),$(".results").show()}function wrapInParensIfReq(t,e,i,s){if("("===e[0])return e;var n=i[0].toUpperCase()+i.substr(1),a=$("#t"+t+"_graph-price"+n).val();return"1"==s||""===a||a.length&&"("===a[0]?"(auto:"+e+")":e}function stripNonNumeric(t){return(""+t).replace(/\D\./g,"")}function doCalculation_return(t,e){$("#t"+t.tab_num+"_submit").removeAttr("disabled"),$("#t"+t.tab_num+"_graph-newTab_holder").css("display",""),$("#strat_"+t.tab_num+" .results").css("opacity",1),$("#t"+t.tab_num+"_graph-priceMin").val(roundTo(stripNonNumeric(e.results.graph_priceMin),2)),$("#t"+t.tab_num+"_graph-priceMax").val(roundTo(stripNonNumeric(e.results.graph_priceMax),2)),$("#t"+t.tab_num+"_graph-rangeAuto").val(e.results.graph_rangeAuto?"1":"0");var i=loadCtr.hasClass("load-timeout");if(i?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t.tab_num),null!=e.newTab){var s=$("#strat_"+t.tab_num+" .results"),n=$("#strat_"+t.tab_num);$("#strat_"+t.tab_num).attr("id","#strat_"+t.tab_num+"-old"),e.oldTab.tabId=t.tab_num,newTab_return(t,e.oldTab,{show:!1}),$("#strat_"+t.tab_num+" .results").replaceWith(s),i&&$("#t"+e.newTab.tabId+"results").hide(),n.remove(),t.tab_num=e.newTab.tabId,newTab_return(t,e.newTab)}e.status==REQ_ERROR?(inputError(e.desc),$("#t"+t.tab_num+"_summary").html("")):e.status==REQ_OK&&(results[t.tab_num]=e.results,_opcGaq.push(["_trackEvent","Calculation: "+e.results.strat,e.results.underlying_symb,e.tab_desc_long.desc.substring(e.results.underlying_symb.length+1)]),$("#strat_"+t.tab_num+"_button .name").html(e.tab_desc.desc+"<br/><span class='minor'>"+e.tab_desc.type+"</span>"),renderResults(t.tab_num,{noScroll:t.noScroll||!1}))}function renderResults(t,e){var i=(e||{}).noScroll||!1;$("#t"+t+"_summary").html("<h2>Estimated returns</h2>"+getSummary(results[t])+getSharingCode(t));var s=renderGraph(results[t],t);for(var n in $("#t"+t+"_graph").html(s[0]),s[1]&&s[1](),$("#strat_"+t+" .results").show(),results[t].vars)$("#strat_"+t+' [name="'+n+'"]').val(results[t].vars[n]);initResults(t),i||$.scrollTo("#t"+t+"_summary",500)}function getSharingCode(t){return"<div class='shareHolder'>\n  <span>Share this on:</span>\n  <div class='shareMenu'>\n    <a href='#' onclick='loadShare({type:\"fb\", tab_num:"+t+", link_ele:this}); return false;' title='Share this calculation on facebook' class='facebook shareIcon'>Facebook</a>\n    <a href='#' onclick='loadShare({type:\"tw\", tab_num:"+t+", link_ele:this}); return false;' title='Tweet this calculation on twitter' class='twitter shareIcon'>Tweet this</a>\n    or <a href='#' onclick='loadShare({type:\"link\", tab_num:"+t+", link_ele:this}); return false;' title='Short-link' class='link'>Get short-link to share</a>\n  </div>\n  <div class='sharePanel'></div>\n</div>"}function loadShare(t){if("link"==t.type){$(t.link_ele).parent().addClass("active").addClass(t.type);var e=$(".sharePanel",$(t.link_ele).parent().parent());e.show()}if(null!=results[t.tab_num].link_code)t.link_code=results[t.tab_num].link_code,
//!!! send request to update the saved tab
showShare(t);else if("link"==t.type){e.html("<P>"+getLoadingHtml("Getting link")+"</P>");ajaxRequest("getting share link","linkCode",{tab_num:t.tab_num},loadShare_return,t)}else window.open(WEB_PATH+"share.html?m="+t.type+"&t="+t.tab_num,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function loadShare_return(t,e){results[t.tab_num].link_code=e.link_code,$(t.addThis_ele).click(),t.link_code=e.link_code,showShare(t)}function showShare(t){var e,i=[["Check out this ",""],[""," is looking good"],["This "," is worth watching"],[""," worth keeping an eye on"],["Nice ",""]],s=Math.floor(Math.random()*i.length),n=i[s][0]+results[curTab].underlying_symb+" "+{"covered-call":"Covered Call","long-call":"Long call","short-call":"Naked call","long-put":"Long put","short-put":"Naked put","call-spread":"Call Spread","put-spread":"Put Spread","calendar-spread":"Calendar Spread",straddle:"Straddle",collar:"Collar","iron-condor":"Iron Condor",butterfly:"Butterfly"}[results[curTab].strat]+i[s][1],a=$(".sharePanel",$(t.link_ele).parent().parent());if("fb"==t.type?e="https://www.facebook.com/sharer.php?u="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code):"tw"==t.type?e="https://twitter.com/intent/tweet?status="+encodeURIComponent(n)+": "+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"+via+@opcalc&url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"&via=opcalc":"link"==t.type?a.html('<P>Copy this link to share via email, forums or other sharing services:</p><p><input type="text" style="font-weight:bold; width:100%;" value="'+BASE_SHORT_URL+WEB_PATH+t.link_code+'"/></p>'):"gg"==t.type&&(e="https://plus.google.com/share?url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)),e)window.open(e,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function avgPrice(t){var e,i=0;for(e=0;e<t.length;e++)i+=parseFloat(t[e]);return(Math.round(i/t.length*100)/100).toFixed(2)}function optionsSelectCode(t,e){var i,s=e,n=[],a="<div class='options_set_holder'>",o=$("#"+t.eleId+"-expiry").val(),r=!1;""==o&&(o=!0);var l=[];for(var h in s)l.push(h);l.sort();for(var u=0;u<l.length;u++){oDate=l[u],"W"===(h=l[u])[h.length-1]&&(h=h.slice(0,h.length-1)),1==o||oDate==o?(r=(new Date).getTime()/1e3<timeFromYMD(h))?r=!0:(r=!1,o=!0):r=!1;var c="W"===oDate[oDate.length-1];""!==(i=10==h.length?dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",h)?"&\\nb\\sp;Y":""),h):7==h.length?dateFromYMD("M"+(date("y")!=dateFromYMD("y",h+"-15")?"&\\nb\\sp;Y":""),h+"-15"):"")&&n.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+(null==s[oDate]?" options_date_link_unfilled":"")+"' name=\""+oDate+'">'+i+(c?'<span class="weeklyIndicator">(weekly)</span>':"")+"</a>"),null!=s[oDate]&&r?a+=optionsSelectMonthCode({sData:t,selectMonth:r,tDate:oDate,tDateData:s[oDate]}):a+="<div class='options_set "+(r?"options_set_active ":"")+oDate+"' name='"+oDate+"'>\r\n</div>",1==r&&(r=!1,o=!1)}return a="<div class='dates'>"+n.join(" | ")+"</div>"+a+"</div>"}function optionsSelectMonthCode(t){var e="",i=t.selectMonth,s=t.tDate,n=t.tDateData,a=t.sData;e+="<div class='options_set "+(i?"options_set_active ":"")+s+"' name='"+s+"'>\r\n<p style='text-align: left; margin-bottom: 0.5em;' class='minor'>Options prices are delayed 15 minutes</p>\r\n<table cellspacing='0' cellpadding='0'><tbody>";var o,r={};function l(t){return Number(t).toFixed(2)}for(var h in e+='<tr class="type"><th colspan="3" align="center">Calls</th><th>&nbsp;</th><th colspan="3" align="center">Puts</th></tr><tr class="cols"><th>Bid</th><th>Mid</th><th>Ask</th><th class="s">Strike</th><th>Bid</th><th>Mid</th><th>Ask</th></tr>',n.c)o=in_array(n.c[h].b,["N",0,"0.00"])&&in_array(n.c[h].b,["N",0,"0.00"])?in_array(n.c[h].l,["N",0,"0.00"])?"N":n.c[h].l:avgPrice([n.c[h].b,n.c[h].a]),r[h]={c:"<td class='c"+("buy"!=a.opAct&&"p"!=a.opType?" r":"")+"'>"+(in_array(n.c[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(n.c[h].b)+"</a>")+"</td><td class='c"+("p"!=a.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='c"+("sell"!=a.opAct&&"p"!=a.opType?" r":"")+"'>"+(in_array(n.c[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(n.c[h].a)+"</a>")+"</td>",p:""};for(h in n.p)null==r[h]&&(r[h]={p:""}),o=in_array(n.p[h].b,["N",0,"0.00"])&&in_array(n.p[h].b,["N",0,"0.00"])?in_array(n.p[h].l,["N",0,"0.00"])?"N":n.p[h].l:avgPrice([n.p[h].b,n.p[h].a]),r[h].p="<td class='p"+("buy"!=a.opAct&&"c"!=a.opType?" r":"")+"'>"+(in_array(n.p[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(n.p[h].b)+"</a>")+"</td><td class='p"+("c"!=a.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='p"+("sell"!=a.opAct&&"c"!=a.opType?" r":"")+"'>"+(in_array(n.p[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(n.p[h].a)+"</a>")+"</td>",e+='<tr name="'+h+'" class="'+(parseFloat(h)<parseFloat(a.underlying_price)?"itm":"otm")+'">'+(r[h].c?r[h].c:"<td class='c'>-</td><td class='c'>-</td><td class='c'>-</td>")+"<td class='s'>"+h+"</td>"+(r[h].p?r[h].p:"<td class='p'>-</td><td class='p'>-</td><td class='p'>-</td>")+"</tr>";return e+="</tbody></table></div>"}function getBestPrice(t){return parseFloat(t.b)&&parseFloat(t.a)?(parseFloat(t.b)+parseFloat(t.a))/2:parseFloat(t.l)}function showOptions(t,e,i){if($(".options_set_active").removeClass("options_set_active").html("\n"),$(".options_date_link_active",$(e).parent()).removeClass("options_date_link_active"),$(e).addClass("options_date_link_active"),$(".options_set").hide(),null!==opCache[i.stock][t]){var s=$("#"+i.uEleId+"-curPrice").val(),n=$("#"+i.eleId+"-act").val(),a=$("#"+i.eleId+"-opType").val(),o={selectMonth:!0,tDate:t,tDateData:opCache[i.stock][t],sData:{eleId:i.eleId,opAct:n,opType:a,underlying_price:s}};$("."+t,$(e).parent().parent()).show().replaceWith(optionsSelectMonthCode(o))}else $("."+t,$(e).parent().parent()).show().html(loadingHtml);null!==opCache[i.stock][t]&&$("#"+i.eleId+"-option_selector .options_set[name='"+t+"'] td a").click((function(){return initOptionsSet(this,i)}))}function initOptionsSelector(t){var e=t.month?"[name='"+t.month+"']":"";$("#"+t.eleId+"-option_selector .options_date_link"+e).click((function(){return showOptions($(this).attr("name"),this,t),!1})),$("#"+t.eleId+"-option_selector .options_set"+e+" td a").click((function(){return initOptionsSet(this,t)})),$("#"+t.eleId+"-option_selector .options_date_link_unfilled").click((function(){var e=$(this).attr("name");getOptions({stock:t.stock,eleId:t.eleId,month:e,uEleId:t.uEleId}),$("#"+t.eleId+'-option_selector .options_set[name="'+e+'"]').html(loadingHtml)}))}function initOptionsSet(t,e){var i=$(t).text(),s=$(t).parent().parent().parent().parent().parent().attr("name"),n=$(t).parent().parent().attr("name"),a=$(t).parent().hasClass("c")?"c":$(t).parent().hasClass("p")?"p":null,o=getBestPrice(opCache[e.stock][s][a][n]);return null==a&&reportError("opType not Call (c) or Put (p)"),$("#"+e.eleId+"-opType").val(a),$("#"+e.eleId+"-price").val(i),$("#"+e.eleId+"-price").change(),$("#"+e.eleId+"-curPrice").val(o||i),$("#"+e.eleId+"-strike").val(n),$("#"+e.eleId+"-expiry").val(s),$("#"+e.eleId+"-opDesc").html(expDescFromYMD(s)+" $"+n+" "+("c"==a?"Call":"Put")),$("#"+e.eleId+"-option_selector").dialog("close"),triggerListener("option",{tab_num:curTab,ele_id:e.eleId}),!1}function getMonthsOptions_return(t,e){var i="",s=$("#"+t.uEleId+"-curPrice").val(),n=$("#"+t.eleId+"-opType").val(),a=$("#"+t.eleId+"-act").val();delete opCache[t.stock][t.month];var o,r=!0,l=[],h=[];for(var u in e.options)h.push(u);h.sort();for(var c=0;c<h.length;c++){var d=h[c];null!=e.options[d]&&"_"!==d.substr(0,1)&&(o=dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",d)?"&\\nb\\sp;Y":""),d),l.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+"' name=\""+d+'">'+o+"</a> "),i+=optionsSelectMonthCode({sData:{eleId:t.eleId,underlying_price:s,opType:n,opAct:a},selectMonth:r,tDate:d,tDateData:e.options[d]}),opCache[t.stock][d]=e.options[d],r=!1)}for(d in $("#"+t.eleId+'-option_selector a[name="'+t.month+'"]').replaceWith(l.join(" | ")),$("#"+t.eleId+'-option_selector .options_set[name="'+t.month+'"]').replaceWith(i),e.options)null!=e.options[d]&&"_"!==d.substr(0,1)&&initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,month:d,stock:t.stock})}function renderRiskGraph(t,e){setTimeout((function(){renderRiskGraph_1(t,e)}),20)}function renderRiskGraph_1(t,e){var i,s,n=["header_place_holder"],a=results[e].underlying_current_price,o=-1e5,r=1e5,l=["#ff8888","#ffcc00","#88ff88","#66ffff","#8888ff","#ff66ff","#996666","#999944","#669966","#449999","#666699","#994499"];tHeader=["Strike"],header=!1,dataLine=[],dataStr="",colors=[],tColor=0,tColor2=0,tTimeLen=!1,graphTimeScale=!1,timeIndex=[],dataIdx=index_assoc_array(t.data),graphPriceMin=!1;var h=t.initial.g<0;h&&(tHeader.push("(Stock comparison)"),colors.push("#18357F"));var u=!1;for(var c in dataIdx)if(dataIdx.hasOwnProperty(c)){if(s=dataIdx[c],!1===graphPriceMin&&(graphPriceMin=parseFloat(s)),dataLine=[parseFloat(s)],h&&dataLine.push(parseFloat(roundTo(getDisValByType(t,-t.initial.g+(parseFloat(s)-a)*(-t.initial.g/a)),2))),i=0,!1===header){var d={};for(var p in t.data[s])t.data[s].hasOwnProperty(p)&&(d[date("Y",parseInt(t.start_date,10)+86400*p)]=1);Object.keys&&(Object.keys(d)||[]).length>1&&(u=!0)}for(var p in t.data[s])if(t.data[s].hasOwnProperty(p)){if(!1===tTimeLen){for(var f in t.data[s])t.data[s].hasOwnProperty(f)&&(tTimeLen<parseInt(f,10)||!1===tTimeLen)&&(tTimeLen=parseInt(f,10));tTimeLen/t.time_scale>10?graphTimeScale=t.time_scale*Math.ceil(tTimeLen/(10*t.time_scale)):graphTimeScale=1}if((tTimeLen-p)%graphTimeScale==0){!1===header&&(tHeader.push(date("j M"+(u?" y":""),parseInt(t.start_date,10)+86400*p)),colors.push(0==i?"#cccccc":l[(i-1)%l.length]),timeIndex.push(p));var g=parseFloat(roundTo(getDisValByType(t,t.data[s][p].g),2));dataLine.push(g),g>o&&(o=g),g<r&&(r=g),i++}}n.push(dataLine),!1===header&&(header=tHeader)}for(header.push("Current"),colors.push("#666666"),n.push([parseFloat(a)]),n[n.length-1][header.length-1]=r-.1*(o-r),n.push([parseFloat(a)]),n[n.length-1][header.length-1]=o+.1*(o-r),n[0]=header,c=1;c<n.length-2;c++)n[c][n[c].length]=null;for(c=1;c<n[0].length-1;c++)n[n.length-1][c]=null,n[n.length-2][c]=null;var m={};m[i-1]={lineWidth:2},h&&(m[0]={lineDashStyle:[6,4]});var _={colors:colors,lineWidth:1,series:m,reverseCategories:!1,chartArea:{width:u?"69%":"75%",left:90,top:20,height:"85%"},vAxis:{viewWindow:{max:o+.1*(o-r),min:r-.1*(o-r)},title:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"Dollars":"Percent",format:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"$#,###.##":"#.##'%'",viewWindowMode:"maximized"},hAxis:{title:"Underlying price",format:"$#,###.##"}};if(array_includes(["price","riskGraphPrice","riskGraphRawValue"],t.graph_type)||(_.vAxis.minValue=-110),google&&google.visualization){var v=google.visualization.arrayToDataTable(n);for(c=0;c<timeIndex.length;c++)v.setColumnProperty(c+1,"time",timeIndex[c]);v.setColumnProperty(n[0].length-1,"current",!0),results[e].riskChartData=v,results[e].riskChart=new google.visualization.LineChart($("#t"+e+"_graph .google_chart_holder")[0]),google.visualization.events.addListener(results[e].riskChart,"select",(function(t){var i=results[e].riskChart.getSelection();if(i.length>0&&null!=i[0].row){var s=i[0];if(1==results[e].riskChartData.getColumnProperty(s.column,"current"))return!1;results[e].riskChartData[0];var n=results[e].riskChartData.getColumnLabel(s.column),a=results[e].riskChartData.getColumnProperty(s.column,"time"),o=roundTo(results[e].riskChartData.getValue(s.row,0),2,!0,!1);if($("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: $"+o+" on "+n),"mobile"==viewStyle){var r=$(window).width(),l=$(window).height();$("#t"+e+"_graph-detail").dialog("option",{width:r-5,height:l-5})}$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[o][a]))}})),results[e].riskChart.draw(v,_)}}function ivChangeOnFocus(t){var e,i=parseFloat($("#t"+t+"_ivChange-val").val());$("#t"+t+"_ivChange--input").val(i>0?"+"+i:i),$("#t"+t+"_ivSlider").slider("value",i),$("#t"+t+"_ivSlider--updateBtn").css("visibility","hidden"),$("#t"+t+"_ivChangeCard").fadeIn(100),e=function(i){i.target.id==="t"+t+"_ivChangeCard"||$(i.target).parents("#t"+t+"_ivChangeCard").length||($("#t"+t+"_ivChangeCard").fadeOut(100),$(document).off("click",e))},setTimeout((function(){$(document).on("click",e),$("#t"+t+"_ivChange--input").focus()}),30)}function ivChangeOnKeyup(t,e,i){i||$("#t"+t+"_ivSlider").slider("value",parseFloat(e))}function ivSetVal(t,e){var i=e>0?"+"+e:e;$("#t"+t+"_ivSlider").slider("value",e),$("#t"+t+"_ivChange--input").val(i),ivChangeChkUpdateNeeded(t)}function ivChangeChkUpdateNeeded(t){var e=$("#t"+t+"_ivChange--input").val(),i=$("#t"+t+"_ivChange").val();parseFloat(e)!==i?$("#t"+t+"_ivSlider--updateBtn").css("visibility","visible"):$("#t"+t+"_ivSlider--updateBtn").css("visibility","hidden")}function ivChangeUpdate(t){$("#t"+t+"_ivChange-val").val($("#t"+t+"_ivChange--input").val()),$("#t"+t+"_submit").click()}function renderGraph(t,e){t.graph_type=checkForceGraphType(t.graph_type,t);var i="",s=0===(t.graph_type||"").indexOf("riskGraph")?"line":"matrix",n="",a=parseFloat($("#t"+e+"_ivChange-val").val())||0,o="";if(o+=n+="<div style='display: flex; margin-bottom: 5px; margin-top: 5px;'> <div class='fieldLabel' style='position: relative;'>   <span class='inputLabelSmall' style='position: relative; z-index: 10;'>IV change</span>   <div style='position: relative;' onclick='ivChangeOnFocus("+e+")'>     <select class='input noLeftMargin'><option>"+(0===a?"±":a>0?"+":"")+a+"%</option></select>     <div style='position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 3'></div>   </div>   <div class='id--ivChangePanel card jq_start_hidden' id='t"+e+"_ivChangeCard'     style='position: absolute; top: -0.2rem; left: -0.3rem; padding: 1.3em 0.3rem 0.3rem; min-width: 4.2em; z-index: 3'   >   <input id='t"+e+"_ivChange' type='hidden' />   <span>    <input class=\"input inputNumeric noLeftMargin\"      style='width: 40px;'     name='ivChange' id='t"+e+"_ivChange--input'      onkeyup='ivChangeOnKeyup("+e+", event.target.value)'    />%   </span>   <div class='ivSlider__ctnr'>     <div class='ivSlider__notch-ctnr'>       <span class='ivSlider__notch ivSlider__notch--has-negative ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -100)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>100         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -75)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>75         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -50)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>50         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-negative'>         <span class='linkSubtle' onclick='ivSetVal("+e+", -25)'>          <span class='ivSlider__notch__plusMinusIndicator'>-</span>25         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-percent ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 0)'>           ±0%         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 25)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>25         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 50)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>50         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 75)'>          <span class='ivSlider__notch__plusMinusIndicator'>+</span>75         </span>       </span>       <span class='ivSlider__notch ivSlider__notch--has-positive ivSlider__notch--large'>         <span class='linkSubtle' onclick='ivSetVal("+e+", 100)'>           <span class='ivSlider__notch__plusMinusIndicator'>+</span>100         </span>       </span>     </div>     <div id=\"t"+e+'_ivSlider" class="ivSlider__holder" style="width: 12rem">       <div id="t'+e+'_ivSlider_custom-handle" class="ui-slider-handle">         <div class="custSlider-rail" />       </div>     </div>   </div>   <a href=\'javascript:void\'      id=\'t'+e+"_ivSlider--updateBtn'      onclick='ivChangeUpdate("+e+")'      style='padding: 0.2em 0; text-decoration: none; visibility: hidden'   >           <span style='text-decoration: underline'>Update Calculation</span>     <img src='"+WEB_PATH_STATIC+"images/icon-refresh.svg' width='14' height='14' valign='bottom' />   </a> </div></div><div class='fieldLabel' style='margin-left: 10px;'>  <span class='inputLabelSmall'>Chart style</span>  <div style='display: flex; align-items: flex-start;'>    <span onclick=\"changeOutputType('vis', 'matrix');\" class='graphVisTypeIcon"+("matrix"===s?" __active":"")+'\' name=\'graphVisTypeIcon--matrix\'><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">      <path d="M15.5 3V15.5H3" stroke="currentColor" stroke-opacity="0.36"/>      <rect opacity="0.7" x="3" width="13" height="3" fill="currentColor"/>      <rect opacity="0.7" x="0.5" y="3.5" width="2" height="12" fill="currentColor" stroke="currentColor"/>      <rect opacity="0.55" width="4" height="3" transform="matrix(-1 0 0 1 15 3)" fill="currentColor"/>      <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 11 3)" fill="currentColor"/>      <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 7 3)" fill="currentColor"/>      <rect opacity="0.9" width="4" height="3" transform="matrix(-1 0 0 1 15 6)" fill="currentColor"/>      <rect opacity="0.4" width="4" height="3" transform="matrix(-1 0 0 1 11 6)" fill="currentColor"/>      <rect opacity="0.25" width="4" height="3" transform="matrix(-1 0 0 1 7 6)" fill="currentColor"/>      <rect opacity="0.55" width="4" height="3" transform="matrix(-1 0 0 1 15 9)" fill="currentColor"/>      <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 11 9)" fill="currentColor"/>      <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 7 9)" fill="currentColor"/>      <rect opacity="0.3" width="4" height="3" transform="matrix(-1 0 0 1 15 12)" fill="currentColor"/>      <rect opacity="0.12" width="4" height="3" transform="matrix(-1 0 0 1 11 12)" fill="currentColor"/>      <rect opacity="0.4" width="3" height="3" fill="currentColor"/>    </svg>    </span>    <span onclick="changeOutputType(\'vis\', \'line\');" class=\'graphVisTypeIcon'+("line"===s?" __active":"")+'\' style=\'padding: 2px\' name=\'graphVisTypeIcon--line\'><svg width="33" height="28" viewBox="0 0 33 28" fill="none" xmlns="http://www.w3.org/2000/svg">    <path opacity="0.23" d="M31.624 14.484H0.624023" stroke="black"/>    <path opacity="0.23" d="M16.124 0.984009L16.124 27.984" stroke="black"/>    <path opacity="0.3" d="M32.0125 11C15.7744 11 9.86959 19.1818 1.01245 20" stroke="currentColor"/>    <path d="M31.4958 6.5H13.4125L7.21251 24.5H0.495847" stroke="currentColor"/>    </svg>    </span>  </div></div>  </div>',"riskGraph"==t.graph_type.substr(0,9))o+='<div class="google_chart_holder" style="height:500px;"></div>\n      <script>\n      renderRiskGraph(results['+e+"], "+e+");\n      <\/script>";else{o+='<table class="graph" cellpadding="1" cellspacing="0">';for(var r,l,h,u,c,d,p=0,f="",g="",m="",_=date("m",t.start_date),v=Object.keys(t.data).sort((function(t,e){var i=parseFloat(t),s=parseFloat(e);return i>s?-1:i<s?1:0})),b=0;b<v.length;b++){var y=v[b];0==p&&(l=[[t.start_date,0]],m="<tr><th>&nbsp;</th>");var k=null!=d&&d>t.underlying_current_price&&y<t.underlying_current_price?"curPriceAbove":roundTo(y,2)==roundTo(t.underlying_current_price,2)?"curPriceRow":"";h="<tr name='"+y+"'"+(""!=k?" class='"+k+"'":"")+"><th class='x'>"+y+"</th>";var w=Object.keys(t.data[y]),x=w[w.length-1];for(var C in t.data[y])0==p&&((c=date("m",u=parseInt(t.start_date,10)+86400*C))==_?l[l.length-1][1]++:(l.push([u,1]),_=c),C==x?(m+='<th class="t z'+((l.length-1)%2+1)+'" name="'+C+'">Exp</th>',m+='<th class="pct">+/-%</th>'):m+='<th class="t z'+((l.length-1)%2+1)+'" name="'+C+'">'+date("j",u)+"</th>"),f=colorByDis(g=fmtNumToFit(getDisValByType(t,t.data[y][C].g)),t.data[y][C].g,t),r="",(g.length?g:g.toString()).length>=4&&(r+=" four_digit"),(g.length?g:g.toString()).length>=5&&(r+=" five_digit"),h+="<td name='t"+C+"-x"+y+"' class='d"+r+" "+f+"'>"+g+"</td>",C==x&&(h+='<td class="pct">'+roundTo(100*(y-t.underlying_current_price)/t.underlying_current_price,2,!0)+"%</td>"),d=y;if(0==p){for(var D in o+="<tr><th>&nbsp;</th>",l)l[D][1]>0&&(o+="<th colspan='"+l[D][1]+"' align='center' class='z"+(D%2+1)+"'>"+date("M",l[D][0])+"</th>");o+="</tr>",o+=m+="</tr>"}o+=h+="</tr>",p++}o+="</table>",i="<p>Click a cell to view the trade's exit.</p>"}return o+='<div style=\'display: flex; margin-top: 5px\'> <div class=\'fieldLabel\'>   <span class=\'inputLabelSmall\'>Stock price range</span>   <div>     $<input data-app-inputset="priceRange" placeholder="auto" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"        id="'+e+'_graph-priceMin" name="graph-priceMin" value="'+roundTo(t.graph_priceMin,2)+"\"        onchange=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+"', ele_name:'graph'});\"        onkeyup=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+'\', ele_name:\'graph\'});"        class="inputWithDollar inputNumeric input" style="width:60px"       onblur="graphRangeChange(\'min\', '+e+', event);" />     &hyphen;<input data-app-inputset="priceRange" placeholder="auto" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"        id="'+e+'_graph-priceMax" name="graph-priceMax" value="'+roundTo(t.graph_priceMax,2)+"\"        onchange=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+"', ele_name:'graph'});\"        onkeyup=\"triggerListener('graphPriceRange', {ele_id:'t"+e+"_graph', tab_num:'"+e+'\', ele_name:\'graph\'});"        class="inputWithDollar inputNumeric input" style="width:60px"       onblur="graphRangeChange(\'max\', '+e+', event);" />     <input type="hidden" id="t'+e+'_graph-rangeAuto" name="graph-rangeAuto" value="'+(t.graph_rangeAuto?"1":"0")+'" />     <input type="hidden" id="t'+e+'_graph-rangeShouldUpdate" name="graph-rangeShouldUpdate" value="0" />   </div>   <div id=\'t'+e+"_graph-rangeUpdate' style='visibility: hidden'>     <a href='javascript:void' onClick='updatePriceRange("+e+")') style='padding: 0.2em 0; text-decoration: none'><span style='text-decoration: underline'>Update price range</span>       <img src='"+WEB_PATH_STATIC+"images/icon-refresh.svg' width='14' height='14' valign='bottom' /></a>   </div></div><div class='fieldLabel' style='margin-left: 5px;'>  <label class='inputLabelSmall'>Chart values <a href='#' onclick='alert(\"Changes how the trade is represented in the table or graph... \\n\\n% of maximum risk.: Percentage of the maximum risk of the trade, where -100 is the maximum risk, and 100 is 100% return compared to the maximum risk. \\n\\n% of entry: Percentage of the entry cost of the trade, where -100 is no return from your initial investment, and 100 is 100% return compared to the entry cost.  Note: if opening the trade results in a credit, % of maximum risk is used instead.\\n\\nDollar value: Profit or loss in net dollar value.\\n\\nOption/Spread value: shows the value of the purchased option, or the spread, without multiplying x100 for each contract.\");return false;' class='help'>?</a></label>  <div>    <select name='graph-typeChange' id='t"+e+"_graph-typeChange' class='input noLeftMargin' onchange='changeOutputType(\"val\", this);' style='margin-right:5px'>       <option value='roiRisk'"+("roiRisk"==t.graph_type||"riskGraph"==t.graph_type?" selected":"")+">% of maximum risk</option>       <option value='roiInit'"+("roiInit"==t.graph_type||"riskGraphInit"==t.graph_type?" selected":"")+">% of entry cost</option>       <option value='price'"+("price"==t.graph_type||"riskGraphPrice"==t.graph_type?" selected":"")+">$ Profit/loss</option>       <option value='rawValue'"+("rawValue"==t.graph_type||"riskGraphRawValue"==t.graph_type?" selected":"")+">Option/spread value</option>       </optgroup>    </select>  </div></div></div>",[o+=i,function(){$("#t"+e+"_ivSlider_custom-handle");$("#t"+e+"_ivSlider").slider({value:a,min:-100,max:100,create:function(){},slide:function(t,i){$("#t"+e+"_ivChange--input").val(i.value>0?"+"+i.value:i.value),ivChangeChkUpdateNeeded(e)}})}]}function updatePriceRange(t){$("#t"+t+"_submit").click()}function graphRangeChange(t,e,i){i.relatedTarget&&"priceRange"!==(i.relatedTarget.attributes["data-app-inputset"]||{}).value&&$("#t"+e+"_graph-rangeShouldUpdate").val("1"),$("#t"+e+"_graph-rangeShouldUpdate").val("0")}function changeOutputType(t,e){var i,s;"vis"===t?(i=$("#t"+curTab+"_graph-typeChange").val(),s=e):"val"===t&&(i=initType=$(e).val(),s=0===$("#t"+curTab+"_graph-type").val().indexOf("riskGraph")?"line":"matrix");var n=({matrix:{roiRisk:"roiRisk",roiInit:"roiInit",price:"price",rawValue:"rawValue"},line:{roiRisk:"riskGraph",roiInit:"riskGraphInit",price:"riskGraphPrice",rawValue:"riskGraphRawValue"}}[s]||{})[i]||"roiRisk";$("#t"+curTab+"_graph [name=graphVisTypeIcon--"+s+"]").addClass("active"),_opcGaq.push(["_trackEvent","Change Output type",n]),ajaxRequest("","updatePreferredDisplayType",{type:n},(function(){})),n=checkForceGraphType(n,results[curTab]),results[curTab].graph_type=n,$("#t"+curTab+"_graph-type").val(n),renderResults(curTab,{noScroll:!0})}function updatePreferredDisplayType(t){t.value&&ajaxRequest("","updatePreferredDisplayType",{type:t.value},(function(){}))}function checkForceGraphType(t,e){return"u"!==e.summary.maxrisk.g&&e.summary.maxrisk.g+e.initial.g<0?"roiRisk"==t||"roiInit"==t&&e.initial.g>=0?("roiInit"==t&&e.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="roiRisk"):("riskGraph"==t||"riskGraphInit"==t&&e.initial.g>=0)&&("riskGraphInit"==t&&e.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="riskGraph"):"u"===e.summary.maxrisk.g&&e.initial.g<0?("roiInit"!=t&&"roiRisk"!=t||("roiRisk"==t&&addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="roiInit"),addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="riskGraphInit"):e.initial.g>=0&&(["riskGraph","roiRisk"].includes(t)?addMsg("Max risk is unlimited – Showing values as $P/L"):["riskGraphInit","roiInit"].includes(t)&&addMsg("Opening trade is a credit – Showing values as $P/L"),["riskGraph","riskGraphInit"].includes(t)?t="riskGraphPrice":["roiRisk","roiInit"].includes(t)&&(t="price")),t}function getDisValByType(t,e){var i;return"rawValue"!=t.graph_type&&"riskGraphRawValue"!=t.graph_type||(i=e/100),"price"==t.graph_type||"riskGraphPrice"==t.graph_type?i=t.initial.g+e:"roiRisk"==t.graph_type||"riskGraph"==t.graph_type?i=100*(t.initial.g+e)/(-t.initial.g-t.summary.maxrisk.g):"roiInit"!=t.graph_type&&"riskGraphInit"!=t.graph_type||(i=100*(t.initial.g+e)/-t.initial.g),isNaN(i)?"N/A":i}function colorByDis(t,e,i){return"K"==(t+"").substr(t.length-1)&&(t=1e3*parseFloat(t.substr(0,t.length-1))),"price"==i.graph_type||"rawValue"==i.graph_type?"u"===i.summary.maxrisk.g?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.initial.g+i.summary.maxprofit.g)))):i.summary.maxrisk.g+i.initial.g>=0?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.summary.maxprofit.g+i.initial.g)))):e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(-i.initial.g-i.summary.maxrisk.g)))):"roiRisk"==i.graph_type?e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):"roiInit"==i.graph_type?0==e?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):void 0}function getSummary(t){var e,i=t.summary;for(var s in t.risk)e=s;if("object"==typeof i.maxrisk.time&&i.maxrisk.time instanceof Array)var n=" on days "+descNumList(i.maxrisk.time);else if(i.maxrisk.time==e)n="";else if(void 0!==i.maxrisk.time)n=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxrisk.time*60*24,-5);else n="";if("object"==typeof i.maxprofit.time&&i.maxprofit.time instanceof Array)var a=" on days "+descNumList(i.maxprofit.time);else if(i.maxprofit.time==e)a="";else if(void 0!==i.maxprofit.time)a=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxprofit.time*60*24,-5);else a="";var o=i.maxrisk.g>-t.initial.g,r="u"===i.maxrisk.g?'infinite <span class="minor">on upside</span>':("i"===i.maxrisk.p?formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+' <span class="minor">on upside</span>':"<span"+(o?' style="font-weight:bold;">+':">")+formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+"</span> <span class='minor'> at "+t.underlying_symb+formatPrice(i.maxrisk.p)+n+"</span>")+(i.maxrisk.g+t.initial.g>=0?'<br/><span class="minor">(calculator found no risk.  This can be due to low or high implied volatility, or out of date prices)</span>':""),l="u"===i.maxprofit.g||i.maxprofit.g+t.initial.g<=0?null:"u"===i.maxrisk.g?0:(i.maxprofit.g+t.initial.g)/-(i.maxrisk.g+t.initial.g),h=null===l?null:roundTo(100*l,100*l>=10?1:2)+"%",u=(t.data[Object.keys(t.data)[0]].length-1)/365,c=null===l?null:l/u,d=null===c?null:100*c>1e5?"+100000%":roundTo(100*c,c>=1?0:c>=.1?1:2)+"%";o=i.maxprofit.g<-t.initial.g;var p="u"===i.maxprofit.g?'infinite <span class="minor">on upside</span>':("i"===i.maxprofit.p?formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+' <span class="minor">on upside</span>':"<span"+(o?' style="color:#F00;">-':">")+formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+"</span> <span class='minor'> at "+t.underlying_symb+formatPrice(i.maxprofit.p)+a+"</span>")+(i.maxprofit.g+t.initial.g<=0?'<br/><span class="minor">(calculator found no positive profit.  This can be due to low or high implied volatility, or out of date prices)</span>':""),f=null===d||"u"===i.maxprofit.g||"u"===i.maxrisk.g?"N/A":h+" ("+d+" ann.)",g=!!(i.PoP||{}).pop,m=g?roundTo(100*(i.PoP||{}).pop,1)+"%":"";for(var s in t.breakeven);var _="$"+implode(", $",t.breakeven[s]);return"<p>Entry "+((o=t.initial.g<0)?"cost":"credit")+": "+('<span style="'+(o?"color:#900;":"font-weight:bold;")+'">'+formatPrice(Math.abs(t.initial.g))+"</span><span class='minor'>"+(o?" net debit":" net credit")+"</span>")+" <a href='#' class='subtle initDetail' onclick='showInitDetails(this); return false;'>see details</a></p><p><span class='hideTabPlus'>Max</span> <span class='hideMobile'>Maximum</span> risk: "+r+"</p><p><span class='hideTabPlus'>Max</span> <span class='hideMobile'>Maximum</span> return: "+p+"</p>"+(f?"<p>Max return on risk: "+f+"</p>":"")+"<p>Breakevens at expiry: "+_+"</p>"+(g?"<p>Probability of profit: "+m+" <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>":"")}function showInitDetails(t){var e=$(t).parents(".stratContent").attr("id");if(e=e.substr(6,e.lastIndexOf("_")),$("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: Entry cost"),"mobile"==viewStyle)$(window).width(),$(window).height();$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(e,results[e].initial,!0))}function graph_listen(t,e,i){"underlying_symbol"==t&&($("#t"+i.tab_num+"_graph-date").val("(today)"),$("#t"+i.tab_num+"_graph-priceMin").val(""),$("#t"+i.tab_num+"_graph-priceMax").val(""))}function initResults(t){$("#t"+t+"_graph").prepend('<div class="popup" id="t'+t+'_graph-detail"></div>');var e=$(window).width(),i=$(window).height(),s={autoOpen:!1,position:{at:"right top"},dialogClass:"detailPopup",title:"Detail",maxHeight:300,height:180>i?i:180,width:450>e?e:450,draggable:!0,create:function(t){$(t.target).parent().css("position","fixed")}};"mobile"==viewStyle&&(s.width=e,s.position={at:"center bottom"});try{$("#t"+t+"_graph-detail").dialog("close")}catch(t){}$("#t"+t+"_graph-detail").dialog(s),$("th.t:last-child").hover((function(){$(this).addClass("hover"),$(this).append("<div class='hover'>At&nbsp;expiry</div>")}),(function(){$(this).removeClass("hover"),$(".hover",this).remove()})),$("#t"+t+"_graph table td.d").each((function(){$(this).html("<div><a href='#' class='subtle'>"+$(this).html()+"</a></div>");var e=$(this).attr("name"),i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2);$(this).hover((function(){var t,e,n,a;$(this).addClass("hover");var o=results[curTab].graph_type.toLowerCase();e=o.indexOf("rawvalue")>=0?"$"+roundTo(results[curTab].data[s][i].g/100,2,!0):"$"+roundTo(results[curTab].data[s][i].g+results[curTab].initial.g,2,!0),n="number"==typeof(a=getDisValByType($.extend({},results[curTab],{graph_type:o.indexOf("price")>=0||o.indexOf("rawvalue")>=0?"roiRisk":results[curTab].graph_type}),results[curTab].data[s][i].g))?roundTo(a,Math.abs(a)<100?Math.abs(a)<10?2:1:0)+"%":a,t=o.indexOf("price")>=0?e+("N/A"!==n?"<br/>("+n+")":""):o.indexOf("rawvalue")>=0?e+"<br/>("+n+")":n+"<br/>("+e+")",$("a",this).append("<div class='hover'>"+t+"</div>")}),(function(){$(this).removeClass("hover");var t=e.substring(1,e.indexOf("-x")),i=e.substring(e.indexOf("-x")+2);$("a",this).html(fmtNumToFit(getDisValByType(results[curTab],results[curTab].data[i][t].g)))})),$("div a",this).click((function(){var i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2),n=parseInt(results[t].start_date,10)+86400*parseInt(i,10);return $("#t"+t+"_graph-detail").html("").dialog("option","title","Detail: $"+roundTo(s,2,1)+" on "+date("jS M Y",n)),$("#t"+t+"_graph-detail").html("").dialog("open"),$("#t"+t+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[s][i])),!1}))}))}function getCellSummary(t,e,i){var s,n,a,o,r,l,h,u,c,d=[],p=0;if(null!=e.S)for(var f in e.S)h="buy"==(r=e.S[f]).a?-1:1,u=parseInt($("#strat_"+t+' [name="'+f+'-num"]').val()),l=null!=r.T?parseFloat(r.T):h*parseFloat(u)*c,c=null!=r.p?parseFloat(r.p):l/u,o=$("#strat_"+t+' [name="'+f+'-symbol"]').val(),p+=l,d.push([r.a,u,o+" stocks",roundTo(c,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.O)for(var f in e.O)h="buy"==(r=e.O[f]).a?-1:1,l=null!=r.T?parseFloat(r.T):h*parseFloat(r.n)*100*r.p,n=$("#strat_"+t+' [name="'+f+'-opType"]').val(),s=dateFromYMD("j<\\s\\up>S</\\s\\up> M"+(dateFromYMD("Y",a=$("#strat_"+t+' [name="'+f+'-expiry"]').val())==date("Y")?"":" Y"),a)+" $"+r.X+" "+("c"==n?"Call":"Put"),p+=l,d.push([r.a,r.n+"x100",s,roundTo(r.p,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.C)for(var f in e.C){l=(r=e.C[f]).T;var g="buy"===r.a?"Cash held":"Cash released";p+=l,d.push([g,"","",void 0,roundTo(l,2,!0,!1)])}var m='<table class="trade_summary" cellpadding="1" cellspacing="0"><tr><th>Trades to '+(i?"open":"close")+" position</th><th>No.</th><th>Price</th><th>Total</th></tr>";for(f=0;f<d.length;f++)m+="<tr><td align='left'>"+ucFirst(d[f][0])+" "+d[f][2]+"</td><td align='right'>"+d[f][1]+"</td><td align='right'>"+(d[f][3]?"$"+d[f][3]:"")+"</td><td align='right'>$"+d[f][4]+"</td></tr>";if(m+=d.length>1?"<tr class='subtotal'><td align='left'>Total"+(i?"":" (closing trade)")+"</td><td colspan='3' align='right'>$"+roundTo(p,2,!0,!1)+"</td></tr>":"",!0!==i){var _=results[t].initial.g+p;m+="<tr class='init'><td align='left'>Entry cost</td><td colspan='3' align='right'>$"+roundTo(results[t].initial.g,2,!0,!1)+"</td></tr><tr class='total'><td align='left'>Total</td><td colspan='3' align='right'>$"+roundTo(_,2,!0,!1)+"</td></tr>"}return m+"</table>"}function fmtNumToFit(t){return isNaN(t)?"N/A":(t>=100||t<=-10?t=roundTo(t):t>=10||t>-10&&t<0?t=roundTo(t,1):t<10&&(t=roundTo(t,2)),t<=-1e3&&t>-1e4&&(t="<span class='neg'>-</span>"+-t),Math.abs(t)>=1e4&&(t=roundTo(t/1e3,1)+"K"),t)}function getLinkBut(t){return $(".linkBox",$(t).parent()).slideDown()}function closeLinkBox(t){return $(t).parent().slideUp()}function closeCurrentTabs(){$("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide(),$("#invisible_shield").unbind("click",closeCurrentTabs)}function add_opSelector_dialog(t){var e=$(window).width(),i=$(window).height(),s={autoOpen:!1,modal:!0,title:"Choose an option",open:function(){$(".ui-widget-overlay").fadeTo(0,.2).hide().fadeIn()},create:function(t){$(t.target).parent().css("position","fixed")},position:{at:"right-25 center"},dialogClass:"dialog-fixed",height:i-50,width:600>e?e:600,show:{effect:"fade",duration:200},hide:{effect:"fade",duration:200},beforeClose:function(t,e){}};"mobile"==viewStyle&&(s.width=e,s.height=i,s.show=null,s.hide=null,s.modal=!0,s.position={at:"left top"},s.draggable=!1),$("#"+t+"-option_selector").dialog(s)}function ele_option_listen(t,e,i){if("underlying_symbol"==t)$("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-marketPrice").val(""),$("#"+i.ele_id+"-lastPrice").val(""),$("#"+i.ele_id+"-strike").val(""),$("#"+i.ele_id+"-expiry").val(""),$("#"+i.ele_id+"-option_selector").html(loadingHtml),$("#"+i.ele_id+"-opDesc").text(""),$("#"+i.ele_id+"-iv").val("(auto)"),getOptions({eleId:i.ele_id,uEleId:e.ele_id});else if("underlying_num"==t){var s=Math.round(parseInt($("#"+e.ele_id+"-num").val())/100);isNaN(s)&&(s=""),$("#"+i.ele_id+"-num").val(s)}else if("option_num"==t){if(null!=i.linked_ele&&i.linked_ele==e.ele_name)(i.strict||$("#"+i.ele_id+"-num").val()==i.default_num)&&$("#"+i.ele_id+"-num").val($("#"+e.ele_id+"-num").val()*i.link_ratio)}else"option"==t&&($("#"+i.ele_id+"-iv").val("(auto)"),""==$("#"+i.ele_id+"-expiry").val()&&$("#"+i.ele_id+"-expiry").val($("#"+e.ele_id+"-expiry").val()));if("option_price"==t||"option_num"==t){var n=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();if($("#"+e.ele_id+"-cost").val(isNaN(n)?"":commaVal(roundTo(100*n,2,!0))),triggerListener("option_cost",e),null!=i.linked_ele&&i.linked_ele==e.ele_name){n=$("#"+i.ele_id+"-num").val()*$("#"+i.ele_id+"-price").val();$("#"+i.ele_id+"-cost").val(isNaN(n)?"":commaVal(roundTo(100*n,2,!0)))}}}function ele_spread_listen(t,e,i){var s=0,n=!1;for(var a in i.op_ele_ids)s+=$("#"+i.op_ele_ids[a]+"-price").val()*($("#"+i.op_ele_ids[a]+"-num").val()||1)*("sell"==$("#"+i.op_ele_ids[a]+"-act").val()?1:-1),!1===n?n=$("#"+i.op_ele_ids[a]+"-num").val():n!==$("#"+i.op_ele_ids[a]+"-num").val()&&(n=-1);$("[for="+i.ele_id+"-spread]").text(-1===n?"Trade cost:":"Spread price:");var o=-1===n?100*s:s;$("#"+i.ele_id+"-spread").html(roundTo(o,2,!0)+" (net "+(s>=0?"credit":"debit")+")"),$("#"+i.ele_id+"-spread").css("color",s>=0?"black":"red")}function getElementCode_stockAndUnderlying_js(t,e,i){"underlying_symbol"==t&&($("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-curPrice").val(""),getPrice({eleId:i.ele_id,button:i.ele_id+"-loading"}),triggerListener("underlying_price",e)),triggerListener("underlying",e,i)}function ele_stock_listen(t,e,i){if("underlying_price"==t||"underlying_num"==t){var s=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();$("#"+e.ele_id+"-cost").val(isNaN(s)?"":commaVal(roundTo(s,2,!0))),triggerListener("underlying_cost",e)}getElementCode_stockAndUnderlying_js(t,e,i)}function ele_underlying_listen(t,e,i){getElementCode_stockAndUnderlying_js(t,e,i)}function graph_price_range_listen(t,e,i){$("#t"+i.tab_num+"_graph-rangeAuto").val("0"),$("#t"+i.tab_num+"_graph-rangeShouldUpdate").val("1"),$("#t"+i.tab_num+"_graph-rangeUpdate").css("visibility","visible")}function finder_targetting_onchange(t){const e=t.value;$("[id^=tFe1_priceWrapper-]").hide();var i=$("#tFe1_priceWrapper-priceFrom"),s=$("#tFe1_priceWrapper-priceFrom .inputLabel"),n=$("#tFe1_priceWrapper-priceTo"),a=$("#tFe1_priceWrapper-priceTo .inputLabel");switch(e){case"range":return i.show(),n.show(),s.text("Price from:"),void a.text("Price to:");case"gt":return i.show(),void s.text("Higher than:");case"lt":return n.show(),void a.text("Lower than:");case"single":default:return i.show(),void s.text("Target price:")}}google&&google.load&&google.load("visualization","1",{packages:["corechart"]}),$(document).ready((function(){$(".touch #current_calc_header").click((function(){$("#tab_holder_tabs").hasClass("--show")?($("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide()):(setTimeout((function(){$("#invisible_shield").bind("click",closeCurrentTabs)}),10),$("#tab_holder_tabs").addClass("--show"),$("#invisible_shield").show())})),$("#strat_F").length&&$("#top_menu .id-optionFinder, #strat_F_button").click((function(){return $("#calcs_holder .jq_exclusive_target").hide(),$("#top_but-calculator").hide(),$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-optionFinder)").removeClass("--active"),$("#top_menu .dialog_tab.id-optionFinder").addClass("--active"),$("#tab_holder_tabs .dialog_tab").removeClass("dialog_tab_selected"),$("#strat_F_button").addClass("dialog_tab_selected"),setTimeout((function(){$("#strat_F").show()}),100),!1})),$(".id-calculator a").click((function(){$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-calculator)").removeClass("--active"),$("#top_menu .dialog_tab.id-calculator").addClass("--active")}))})),$(window).scroll((function(){if(void 0!==window.viewStyle&&"full"==viewStyle){var t=$(window).scrollTop(),e=$("#content_holder").offset().top;if(e<t){var i=$("#main").outerHeight(),s=$("#tab_holder").outerHeight(),n=t-e,a=i-s;if(n<a){$("#tab_holder").css({position:"fixed",top:"0"});var o=isTransitionalTheme();$("#content_holder").css({"margin-left":o?"168px":"174px","min-height":s+"px"})}else{var r=Math.min(n,a);$("#tab_holder").css({position:"relative",top:r}),$("#content_holder").css({"margin-left":"0"})}}else $("#tab_holder").css({position:"relative",top:"0"}),$("#content_holder").css({"margin-left":"0"})}return!0})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}((function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i,s,n,a,o,r,l,h,u,c,d=0,p=Array.prototype.slice;function f(t,e,i){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?i/100:1)]}function g(e,i){return parseInt(t.css(e,i),10)||0}t.cleanData=(e=t.cleanData,function(i){for(var s,n,a=0;null!=(n=i[a]);a++)try{(s=t._data(n,"events"))&&s.remove&&t(n).triggerHandler("remove")}catch(i){}e(i)}),t.widget=function(e,i,s){var n,a,o,r={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],a=t[l][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(s,(function(e,s){function n(){return i.prototype[e].apply(this,arguments)}function a(t){return i.prototype[e].apply(this,t)}t.isFunction(s)?r[e]=function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=a,t=s.apply(this,arguments),this._super=e,this._superApply=i,t}:r[e]=s})),a.prototype=t.widget.extend(o,{widgetEventPrefix:n&&o.widgetEventPrefix||e},r,{constructor:a,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,a,i._proto)})),delete n._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,s,n=p.call(arguments,1),a=0,o=n.length;a<o;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var a="string"==typeof n,o=p.call(arguments,1),r=this;return a?this.length||"instance"!==n?this.each((function(){var i,a=t.data(this,s);return"instance"===n?(r=a,!1):a?t.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o))!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+n+"'")})):r=void 0:(o.length&&(n=t.widget.extend.apply(null,[n].concat(o))),this.each((function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))}))),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,a,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(s=e.split(".")).shift(),s.length){for(n=o[e]=t.widget.extend({},this.options[e]),a=0;a<s.length-1;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function n(n,a){for(var o,r=0;r<n.length;r++)o=s.classesElementLookup[n[r]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),s.classesElementLookup[n[r]]=o,i.push(n[r]),a&&e.classes[n[r]]&&i.push(e.classes[n[r]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t;return(t={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s}).element.toggleClass(this._classes(t),s),this},_on:function(e,i,s){var n,a=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,(function(s,o){function r(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l;s=(l=s.match(/^([\w:-]*)\s*(.*)$/))[1]+a.eventNamespace;(l=l[2])?n.on(s,l,r):i.on(s,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,a,o=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,n,a){var o;"string"==typeof n&&(n={effect:n});var r=n?!0!==n&&"number"!=typeof n&&n.effect||i:e;"number"==typeof(n=n||{})&&(n={duration:n}),o=!t.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,a):s.queue((function(i){t(this)[e](),a&&a.call(s[0]),i()}))}})),t.widget,s=Math.max,n=Math.abs,a=/left|center|right/,o=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,h=/%$/,u=t.fn.position,t.position={scrollbarWidth:function(){if(void 0!==i)return i;var e,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return t("body").append(s),e=n.offsetWidth,s.css("overflow","scroll"),e===(n=n.offsetWidth)&&(n=s[0].clientWidth),s.remove(),i=e-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y");i="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:i?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:s||n?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return u.apply(this,arguments);e=t.extend({},e);var i,h,c,d,p,m,_=t(e.of),v=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(v),y=(e.collision||"flip").split(" "),k={},w=9===(m=(w=_)[0]).nodeType?{width:w.width(),height:w.height(),offset:{top:0,left:0}}:t.isWindow(m)?{width:w.width(),height:w.height(),offset:{top:w.scrollTop(),left:w.scrollLeft()}}:m.preventDefault?{width:0,height:0,offset:{top:m.pageY,left:m.pageX}}:{width:w.outerWidth(),height:w.outerHeight(),offset:w.offset()};return _[0].preventDefault&&(e.at="left top"),h=w.width,c=w.height,d=w.offset,p=t.extend({},d),t.each(["my","at"],(function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=a.test(s[0])?s.concat(["center"]):o.test(s[0])?["center"].concat(s):["center","center"]),s[0]=a.test(s[0])?s[0]:"center",s[1]=o.test(s[1])?s[1]:"center",t=r.exec(s[0]),i=r.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[l.exec(s[0])[0],l.exec(s[1])[0]]})),1===y.length&&(y[1]=y[0]),"right"===e.at[0]?p.left+=h:"center"===e.at[0]&&(p.left+=h/2),"bottom"===e.at[1]?p.top+=c:"center"===e.at[1]&&(p.top+=c/2),i=f(k.at,h,c),p.left+=i[0],p.top+=i[1],this.each((function(){var a,o,r=t(this),l=r.outerWidth(),u=r.outerHeight(),m=g(this,"marginLeft"),w=g(this,"marginTop"),x=l+m+g(this,"marginRight")+b.width,C=u+w+g(this,"marginBottom")+b.height,D=t.extend({},p),T=f(k.my,r.outerWidth(),r.outerHeight());"right"===e.my[0]?D.left-=l:"center"===e.my[0]&&(D.left-=l/2),"bottom"===e.my[1]?D.top-=u:"center"===e.my[1]&&(D.top-=u/2),D.left+=T[0],D.top+=T[1],a={marginLeft:m,marginTop:w},t.each(["left","top"],(function(s,n){t.ui.position[y[s]]&&t.ui.position[y[s]][n](D,{targetWidth:h,targetHeight:c,elemWidth:l,elemHeight:u,collisionPosition:a,collisionWidth:x,collisionHeight:C,offset:[i[0]+T[0],i[1]+T[1]],my:e.my,at:e.at,within:v,elem:r})})),e.using&&(o=function(t){var i=d.left-D.left,a=i+h-l,o=d.top-D.top,p=o+c-u,f={target:{element:_,left:d.left,top:d.top,width:h,height:c},element:{element:r,left:D.left,top:D.top,width:l,height:u},horizontal:a<0?"left":0<i?"right":"center",vertical:p<0?"top":0<o?"bottom":"middle"};h<l&&n(i+a)<h&&(f.horizontal="center"),c<u&&n(o+p)<c&&(f.vertical="middle"),s(n(i),n(a))>s(n(o),n(p))?f.important="horizontal":f.important="vertical",e.using.call(this,t,f)}),r.offset(t.extend(D,{using:o}))}))},t.ui.position={fit:{left:function(t,e){var i=e.within,n=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,o=t.left-e.collisionPosition.marginLeft,r=n-o,l=o+e.collisionWidth-a-n;e.collisionWidth>a?0<r&&l<=0?(i=t.left+r+e.collisionWidth-a-n,t.left+=r-i):t.left=!(0<l&&r<=0)&&l<r?n+a-e.collisionWidth:n:0<r?t.left+=r:0<l?t.left-=l:t.left=s(t.left-o,t.left)},top:function(t,e){var i=e.within,n=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,o=t.top-e.collisionPosition.marginTop,r=n-o,l=o+e.collisionHeight-a-n;e.collisionHeight>a?0<r&&l<=0?(i=t.top+r+e.collisionHeight-a-n,t.top+=r-i):t.top=!(0<l&&r<=0)&&l<r?n+a-e.collisionHeight:n:0<r?t.top+=r:0<l?t.top-=l:t.top=s(t.top-o,t.top)}},flip:{left:function(t,e){var i=(h=e.within).offset.left+h.scrollLeft,s=h.width,a=h.isWindow?h.scrollLeft:h.offset.left,o=(u=t.left-e.collisionPosition.marginLeft)-a,r=u+e.collisionWidth-s-a,l="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,u=-2*e.offset[0];o<0?((i=t.left+l+h+u+e.collisionWidth-s-i)<0||i<n(o))&&(t.left+=l+h+u):0<r&&(0<(a=t.left-e.collisionPosition.marginLeft+l+h+u-a)||n(a)<r)&&(t.left+=l+h+u)},top:function(t,e){var i=(h=e.within).offset.top+h.scrollTop,s=h.height,a=h.isWindow?h.scrollTop:h.offset.top,o=(u=t.top-e.collisionPosition.marginTop)-a,r=u+e.collisionHeight-s-a,l="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];o<0?((i=t.top+l+h+u+e.collisionHeight-s-i)<0||i<n(o))&&(t.top+=l+h+u):0<r&&(0<(a=t.top-e.collisionPosition.marginTop+l+h+u-a)||n(a)<r)&&(t.top+=l+h+u)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:(c="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(c+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(e,i){var s,n,a,o,r=e.nodeName.toLowerCase();return"area"===r?(n=(s=e.parentNode).name,!(!e.href||!n||"map"!==s.nodeName.toLowerCase())&&0<(n=t("img[usemap='#"+n+"']")).length&&n.is(":visible")):(/^(input|select|textarea|button|object)$/.test(r)?(a=!e.disabled)&&(o=t(e).closest("fieldset")[0])&&(a=!o.disabled):a="a"===r&&e.href||i,a&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){var t;this.form=this.element.form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var e;this.form.length&&((e=this.form.data("ui-form-reset-instances")).splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=(m=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(m,"\\$1")}),t.fn.labels=function(){var e,i,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(e=this.attr("id"))&&(s=(s=this.eq(0).parents().last()).add((s.length?s:this).siblings()),e="label[for='"+t.ui.escapeSelector(e)+"']",i=i.add(s.find(e).addBack(e))),this.pushStack(i))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/;e=this.parents().filter((function(){var e=t(this);return(!s||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&e.length?e:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||0<=i)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:(_=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++_)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var m,_,v=!1;t(document).on("mouseup",(function(){v=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!v){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),v=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,v=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,a=t.ui[e].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,a=t.plugins[e];if(a&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;n<a.length;n++)t.options[a[n][0]]&&a[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return(e=e||t.body).nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||0<t(e.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper);return(e=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element).parents("body").length||e.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,a=this.document[0];this.relativeContainer=null,n.containment?"window"!==n.containment?"document"!==n.containment?n.containment.constructor!==Array?("parent"===n.containment&&(n.containment=this.helper[0].parentNode),(s=(i=t(n.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=n.containment:this.containment=[0,0,t(a).width()-this.helperProportions.width-this.margins.left,(t(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1;t=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:t?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:t?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s=this.options,n=this._isRootNode(this.scrollParent[0]),a=t.pageX,o=t.pageY;return n&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(i=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(a=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(a=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),s.grid&&(t=s.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,o=!i||t-this.offset.click.top>=i[1]||t-this.offset.click.top>i[3]?t:t-this.offset.click.top>=i[1]?t-s.grid[1]:t+s.grid[1],t=s.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,a=!i||t-this.offset.click.left>=i[0]||t-this.offset.click.left>i[2]?t:t-this.offset.click.left>=i[0]?t-s.grid[0]:t+s.grid[0]),"y"===s.axis&&(a=this.originalPageX),"x"===s.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))}))},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,(function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))}))},drag:function(e,i,s){t.each(s.sortables,(function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,t.each(s.sortables,(function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&t.contains(a.element[0],this.element[0])&&(n=!1),n}))),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},e.target=a.currentItem[0],a._mouseCapture(e,!0),a._mouseStart(e,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",e),s.dropped=a.element,t.each(s.sortables,(function(){this.refreshPositions()})),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(e),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",e,a._uiHash(a)),a._mouseStop(e,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body");s=s.options;n.css("cursor")&&(s._cursor=n.css("cursor")),n.css("cursor",s.cursor)},stop:function(e,i,s){(s=s.options)._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(e,i,s){(s=s.options)._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-e.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-e.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?a=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(a=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?a=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(a=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),!1!==a&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each((function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,s){for(var n,a,o,r,l,h,u,c,d,p=s.options,f=p.snapTolerance,g=i.offset.left,m=g+s.helperProportions.width,_=i.offset.top,v=_+s.helperProportions.height,b=s.snapElements.length-1;0<=b;b--)h=(l=s.snapElements[b].left-s.margins.left)+s.snapElements[b].width,c=(u=s.snapElements[b].top-s.margins.top)+s.snapElements[b].height,m<l-f||h+f<g||v<u-f||c+f<_||!t.contains(s.snapElements[b].item.ownerDocument,s.snapElements[b].item)?(s.snapElements[b].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[b].item})),s.snapElements[b].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(u-v)<=f,a=Math.abs(c-_)<=f,o=Math.abs(l-m)<=f,r=Math.abs(h-g)<=f,n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),d=n||a||o||r,"outer"!==p.snapMode&&(n=Math.abs(u-_)<=f,a=Math.abs(c-v)<=f,o=Math.abs(l-g)<=f,r=Math.abs(h-m)<=f,n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[b].snapping&&(n||a||o||r||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[b].item})),s.snapElements[b].snapping=n||a||o||r||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n;s=s.options;(s=t.makeArray(t(s.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}))).length&&(n=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each((function(e){t(this).css("zIndex",n+e)})),this.css("zIndex",n+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(e,i,s){(s=s.options)._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop";i=!1;return 0<e[s]||(e[s]=1,i=0<e[s],e[s]=0,i)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())})).on("mouseleave",(function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){function e(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var i;return this._mouseDestroy(),this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){this._super(t,e),"handles"===t&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var e,i,s,n,a,o=this.options,r=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;i<s.length;i++)n="ui-resizable-"+(e=t.trim(s[i])),a=t("<div>"),this._addClass(a,"ui-resizable-handle "+n),a.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(a);this._renderAxis=function(e){var i,s,n;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){r.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=a&&a[1]?a[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)(s=t(this.handles[i])[0])!==e.target&&!t.contains(s,e.target)||(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i=this.originalMousePosition,s=this.axis,n=e.pageX-i.left||0;i=e.pageY-i.top||0,s=this._change[s];return this._updatePrevProperties(),s&&(i=s.apply(this,[e,n,i]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,a=this.options,o=this;return this._helper&&(n=(i=(s=this._proportionallyResizeElements).length&&/textarea/i.test(s[0].nodeName))&&this._hasScroll(s[0],"left")?0:o.sizeDiff.height,s=i?0:o.sizeDiff.width,i={width:o.helper.width()-s,height:o.helper.height()-n},s=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,n=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,a.animate||this.element.css(t.extend(i,{top:n,left:s})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!a.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s=this.options,n={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0};(this._aspectRatio||t)&&(e=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,s=n.maxHeight*this.aspectRatio,t=n.maxWidth/this.aspectRatio,e>n.minWidth&&(n.minWidth=e),i>n.minHeight&&(n.minHeight=i),s<n.maxWidth&&(n.maxWidth=s),t<n.maxHeight&&(n.maxHeight=t)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i);i=/nw|ne|n/.test(i);return a&&(t.width=e.minWidth),o&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),a&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),o&&i&&(t.top=l-e.minHeight),n&&i&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=(r=n.length&&/textarea/i.test(n[0].nodeName))&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,o=r?0:i.sizeDiff.width,r={width:i.size.width-o,height:i.size.height-a};o=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,a=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(r,a&&o?{top:a,left:o}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s=t(this).resizable("instance"),n=s.options,a=s.element,o=n.containment,r=o instanceof t?o.get(0):/parent/.test(o)?a.parent().get(0):o;r&&(s.containerElement=t(r),/document/.test(o)||o===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(r),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,n){i[t]=s._num(e.css("padding"+n))})),s.containerOffset=e.offset(),s.containerPosition=e.position(),s.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=s.containerOffset,a=s.containerSize.height,o=s.containerSize.width,o=s._hasScroll(r,"left")?r.scrollWidth:o,a=s._hasScroll(r)?r.scrollHeight:a,s.parentData={element:r,left:n.left,top:n.top,width:o,height:a}))},resize:function(e){var i=t(this).resizable("instance"),s=i.options,n=i.containerOffset,a=i.position,o=i._aspectRatio||e.shiftKey,r={top:0,left:0},l=i.containerElement;e=!0;l[0]!==document&&/static/.test(l.css("position"))&&(r=n),a.left<(i._helper?n.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-n.left:i.position.left-r.left),o&&(i.size.height=i.size.width/i.aspectRatio,e=!1),i.position.left=s.helper?n.left:0),a.top<(i._helper?n.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-n.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio,e=!1),i.position.top=i._helper?n.top:0),s=i.containerElement.get(0)===i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position")),s&&a?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top),a=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-r.left:i.offset.left-n.left)),n=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-r.top:i.offset.top-n.top)),a+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-a,o&&(i.size.height=i.size.width/i.aspectRatio,e=!1)),n+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-n,o&&(i.size.width=i.size.height*i.aspectRatio,e=!1)),e||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,a=e.containerElement,o=(l=t(e.helper)).offset(),r=l.outerWidth()-e.sizeDiff.width,l=l.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:o.left-n.left-s.left,width:r,height:l}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:o.left-n.left-s.left,width:r,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(n.alsoResize).each((function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},a=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,(function(t,e){var i=(s[e]||0)+(r[e]||0);i&&0<=i&&(n[e]=i||null)})),e.css(n)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,u=l[1]||1,c=Math.round((n.width-a.width)/h)*h,d=Math.round((n.height-a.height)/u)*u,p=a.width+c,f=a.height+d,g=s.maxWidth&&s.maxWidth<p,m=s.maxHeight&&s.maxHeight<f,_=s.minWidth&&s.minWidth>p;n=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),n&&(f+=u),g&&(p-=h),m&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-c):((f-u<=0||p-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),0<f-u?(i.size.height=f,i.position.top=o.top-d):(f=u-e.height,i.size.height=f,i.position.top=o.top+a.height-f),0<p-h?(i.size.width=p,i.position.left=o.left-c):(p=h-e.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),t.ui.resizable,t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i,s;this.previousFilter||(i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget),i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s)))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay((function(){t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,s,n,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,i=this.previousFilter||"",n=!1,s=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===i?n=!0:s=i+s,i=this._filterMenuItems(s),(i=n&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),a=t("<span>").data("ui-menu-submenu-caret",!0);s._addClass(a,"ui-menu-icon","ui-icon "+n),i.attr("aria-haspopup","true").prepend(a),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")})),a=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(a,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){var i;"icons"===t&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n;this._hasScroll()&&(s=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,i=e.offset().top-this.activeMenu.offset().top-s-n,s=this.activeMenu.scrollTop(),n=this.activeMenu.height(),e=e.outerHeight(),i<0?this.activeMenu.scrollTop(s+i):n<i+e&&this.activeMenu.scrollTop(s+i-n+e))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-s-n<0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,s,n;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return 0<(i=t(this)).offset().top-s+n})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var i=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n="textarea"===(a=this.element[0].nodeName.toLowerCase()),a="input"===a;this.isMultiLine=n||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[n||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))i=s=e=!0;else{i=s=e=!1;var a=t.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:e=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case a.UP:e=!0,this._keyEvent("previous",n);break;case a.DOWN:e=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}}},keypress:function(s){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){if(s)return s=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,i){var s;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),(s=i.item.attr("aria-label")||s.value)&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion))},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=s}))),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return(e=e&&(e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)))&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||s)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,(function(t,i){s._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return s.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var b,y,k=/ui-corner-([a-z]){2,6}/g;function w(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=x(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function x(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,C)}function C(){t.datepicker._isDisabledDatepicker((y.inline?y.dpDiv.parent():y.input)[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function D(e,i){for(var s in t.extend(e,i),i)null==i[s]&&(e[s]=i[s]);return e}t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(s,n){var a,o={};if(n)return"controlgroupLabel"===s?((a=e.element.find(n)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(a,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(a.get()))):void(t.fn[s]&&(o=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(n).each((function(){var n=t(this),a=n[s]("instance"),r=t.widget.extend({},o);"button"===s&&n.parent(".ui-spinner").length||((a=a||n[s]()[s]("instance"))&&(r.classes=e._resolveClassesValues(r.classes,a)),n[s](r),r=n[s]("widget"),t.data(r[0],"ui-controlgroup-data",a||n[s]("instance")),i.push(r[0]))}))))})),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label,this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){return(t=this._buildSimpleOptions(t,"ui-spinner")).classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,(function(n){var a=i.options.classes[n]||"";a=t.trim(a.replace(k,""));s[n]=(a+" "+e[n]).replace(/\s+/g," ")})),s},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,s){var n,a=e[s]().data("ui-controlgroup-data");a&&i["_"+a.widgetName+"Options"]?((n=i["_"+a.widgetName+"Options"](1===e.length?"only":s)).classes=i._resolveClassesValues(n.classes,a),a.element[a.widgetName](n)):i._updateCornerClass(e[s](),s)})),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i=this,s=this._super()||{};return this._readType(),e=this.element.labels(),this.label=t(e[e.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(s.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(s.disabled=e),s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this).form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,n=s?this.options.iconPosition:i;e="top"===n||"bottom"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(n),e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=(void 0===t.showLabel?this.options:t).showLabel,i=(void 0===t.icon?this.options:t).icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(b=t.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}}),t.extend(w.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return D(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n=e.nodeName.toLowerCase(),a="div"===n||"span"===n;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(t(e),a)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,s):a&&this._inlineDatepicker(e,s)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?x(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),n&&(i.append=t("<span class='"+this._appendClass+"'>"+n+"</span>"),e[a?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(s=this._get(i,"showOn"))&&"both"!==s||e.on("focus",this._showDatepicker),"button"!==s&&"both"!==s||(n=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:s,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(s?t("<img/>").attr({src:s,alt:n,title:n}):n)),e[a?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():(t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]&&t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])),!1})))},_autoSize:function(t){var e,i,s,n,a,o;this._get(t,"autoSize")&&!t.inline&&(a=new Date(2009,11,20),(o=this._get(t,"dateFormat")).match(/[DM]/)&&(e=function(t){for(n=s=i=0;n<t.length;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length))},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,a){var o,r=this._dialogInst;return r||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(r=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",r)),D(r.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(r,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(o=document.documentElement.clientWidth,n=document.documentElement.clientHeight,i=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+i,n/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",r),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty(),y===n&&(y=null))},_enableDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,n.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,n.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,a,o,r,l=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null;n=i||{},"string"==typeof i&&((n={})[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(l,"min"),r=this._getMinMaxDate(l,"max"),D(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==r&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,r)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){(t=this._getInst(t))&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){(t=this._getInst(t))&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){return(t=this._getInst(t))&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(e){var i,s,n=t.datepicker._getInst(e.target),a=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",n.dpDiv))[0]&&t.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,s[0]),(i=t.datepicker._get(n,"onSelect"))?(s=t.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[s,n])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||s<" "||!i||-1<i.indexOf(s)},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(e){var i,s,n,a;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(a=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==a&&(t.datepicker._curInst.dpDiv.stop(!0,!0),a&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(s=(n=t.datepicker._get(a,"beforeShow"))?n.apply(e,[e,a]):{})&&(D(a.settings,s),a.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(a),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),i=!1,t(e).parents().each((function(){return!(i|="fixed"===t(this).css("position"))})),n={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,a.dpDiv.empty(),a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(a),n=t.datepicker._checkOffset(a,n,i),a.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":i?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),a.inline||(s=t.datepicker._get(a,"showAnim"),n=t.datepicker._get(a,"duration"),a.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[s]?a.dpDiv.show(s,t.datepicker._get(a,"showOptions"),n):a.dpDiv[s||"show"](s?n:null),t.datepicker._shouldFocusInput(a)&&a.input.trigger("focus"),t.datepicker._curInst=a)))},_updateDatepicker:function(e){this.maxRows=4,(y=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=e.dpDiv.find("."+this._dayOverClass+" a");0<a.length&&C.apply(a.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null}),0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&n<l?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+a>h&&a<h?Math.abs(a+r):0),i},_findPos:function(e){for(var i=this._getInst(e),s=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,s,n=this._curInst;!n||e&&n!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(n,"showAnim"),s=this._get(n,"duration"),e=function(){t.datepicker._tidyDialog(n)},t.effects&&(t.effects.effect[i]||t.effects[i])?n.dpDiv.hide(i,t.datepicker._get(n,"showOptions"),s,e):n.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,e),i||e(),this._datepickerShowing=!1,(e=this._get(n,"onClose"))&&e.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var i;t.datepicker._curInst&&(i=t(e.target),e=t.datepicker._getInst(i[0]),(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===e)||t.datepicker._hideDatepicker())},_adjustDate:function(e,i,s){var n=t(e);e=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(e,i+("M"===s?this._get(e,"showCurrentAtPos"):0),s),this._updateDatepicker(e))},_gotoToday:function(e){var i=t(e),s=this._getInst(i[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(e=new Date,s.selectedDay=e.getDate(),s.drawMonth=s.selectedMonth=e.getMonth(),s.drawYear=s.selectedYear=e.getFullYear()),this._notifyChange(s),this._adjustDate(i)},_selectMonthYear:function(e,i,s){var n=t(e);(e=this._getInst(n[0]))["selected"+("M"===s?"Month":"Year")]=e["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((a=this._getInst(a[0])).selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){e=t(e),this._selectDate(e,"")},_selectDate:function(e,i){var s=t(e);e=this._getInst(s[0]);i=null!=i?i:this._formatDate(e),e.input&&e.input.val(i),this._updateAlternate(e),(s=this._get(e,"onSelect"))?s.apply(e.input?e.input[0]:null,[i,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n=this._get(e,"altField");n&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),e=this.formatDate(i,s,this._getFormatConfig(e)),t(n).val(e))},noWeekends:function(t){return[0<(t=t.getDay())&&t<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;function n(t){return(t=w+1<e.length&&e.charAt(w+1)===t)&&w++,t}function a(t){var e=n(t);e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,e=new RegExp("^\\d{"+("y"===t?e:1)+","+e+"}");if(!(e=i.substring(c).match(e)))throw"Missing number at position "+c;return c+=e[0].length,parseInt(e[0],10)}function o(e,s,a){var o=-1;s=t.map(n(e)?a:s,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(s,(function(t,e){var s=e[1];if(i.substr(c,s.length).toLowerCase()===s.toLowerCase())return o=e[0],c+=s.length,!1})),-1!==o)return o+1;throw"Unknown name at position "+c}function r(){if(i.charAt(c)!==e.charAt(w))throw"Unexpected literal at position "+c;c++}for(var l,h,u,c=0,d="string"!=typeof(d=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff)?d:(new Date).getFullYear()%100+parseInt(d,10),p=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,f=(s?s.dayNames:null)||this._defaults.dayNames,g=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,_=-1,v=-1,b=-1,y=-1,k=!1,w=0;w<e.length;w++)if(k)"'"!==e.charAt(w)||n("'")?r():k=!1;else switch(e.charAt(w)){case"d":b=a("d");break;case"D":o("D",p,f);break;case"o":y=a("o");break;case"m":v=a("m");break;case"M":v=o("M",g,m);break;case"y":_=a("y");break;case"@":_=(u=new Date(a("@"))).getFullYear(),v=u.getMonth()+1,b=u.getDate();break;case"!":_=(u=new Date((a("!")-this._ticksTo1970)/1e4)).getFullYear(),v=u.getMonth()+1,b=u.getDate();break;case"'":n("'")?r():k=!0;break;default:r()}if(c<i.length&&(h=i.substr(c),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=d?0:-100)),-1<y)for(v=1,b=y;!(b<=(l=this._getDaysInMonth(_,v-1)));)v++,b-=l;if((u=this._daylightSavingAdjust(new Date(_,v-1,b))).getFullYear()!==_||u.getMonth()+1!==v||u.getDate()!==b)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";function s(e){return(e=o+1<t.length&&t.charAt(o+1)===e)&&o++,e}function n(t,e,i){var n=""+e;if(s(t))for(;n.length<i;)n="0"+n;return n}function a(t,e,i,n){return(s(t)?n:i)[e]}var o,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,l=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,u=(i?i.monthNames:null)||this._defaults.monthNames,c="",d=!1;if(e)for(o=0;o<t.length;o++)if(d)"'"!==t.charAt(o)||s("'")?c+=t.charAt(o):d=!1;else switch(t.charAt(o)){case"d":c+=n("d",e.getDate(),2);break;case"D":c+=a("D",e.getDay(),r,l);break;case"o":c+=n("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=n("m",e.getMonth()+1,2);break;case"M":c+=a("M",e.getMonth(),h,u);break;case"y":c+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":s("'")?c+="'":d=!0;break;default:c+=t.charAt(o)}return c},_possibleChars:function(t){function e(e){return(e=n+1<t.length&&t.charAt(n+1)===e)&&n++,e}for(var i="",s=!1,n=0;n<t.length;n++)if(s)"'"!==t.charAt(n)||e("'")?i+=t.charAt(n):s=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":e("'")?i+="'":s=!0;break;default:i+=t.charAt(n)}return i},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,o=this._getFormatConfig(t);try{a=this.parseDate(i,s,o)||n}catch(t){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n,a;return(i=(i=null==i||""===i?s:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(i){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(n,a))}l=r.exec(i)}return new Date(n,a,o)}(i):"number"==typeof i?isNaN(i)?s:(n=i,(a=new Date).setDate(a.getDate()+n),a):new Date(i.getTime()))&&"Invalid Date"===i.toString()?s:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear;e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,s,n,a,o,r,l,h,u,c,d,p,f,g,m,_,v,b,y,k,w,x,C,D,T,S,I,M,$,P,O=new Date,E=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),F=this._get(t,"isRTL"),N=this._get(t,"showButtonPanel"),z=this._get(t,"hideIfNoPrevNext"),R=this._get(t,"navigationAsDateFormat"),A=this._getNumberOfMonths(t),H=this._get(t,"showCurrentAtPos"),L=(O=this._get(t,"stepMonths"),1!==A[0]||1!==A[1]),W=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),j=this._getMinMaxDate(t,"min"),q=this._getMinMaxDate(t,"max"),B=t.drawMonth-H,Y=t.drawYear;if(B<0&&(B+=12,Y--),q)for(e=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth()-A[0]*A[1]+1,q.getDate())),e=j&&e<j?j:e;this._daylightSavingAdjust(new Date(Y,B,1))>e;)--B<0&&(B=11,Y--);for(t.drawMonth=B,t.drawYear=Y,H=this._get(t,"prevText"),H=R?this.formatDate(H,this._daylightSavingAdjust(new Date(Y,B-O,1)),this._getFormatConfig(t)):H,i=this._canAdjustMonth(t,-1,Y,B)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+H+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+H+"</span></a>",H=this._get(t,"nextText"),H=R?this.formatDate(H,this._daylightSavingAdjust(new Date(Y,B+O,1)),this._getFormatConfig(t)):H,s=this._canAdjustMonth(t,1,Y,B)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+H+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+H+"</span></a>",z=this._get(t,"currentText"),H=this._get(t,"gotoCurrent")&&t.currentDay?W:E,z=R?this.formatDate(z,H,this._getFormatConfig(t)):z,R=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",R=N?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(F?R:"")+(this._isInRange(t,H)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+z+"</button>":"")+(F?"":R)+"</div>":"",n=parseInt(this._get(t,"firstDay"),10),n=isNaN(n)?0:n,a=this._get(t,"showWeek"),o=this._get(t,"dayNames"),r=this._get(t,"dayNamesMin"),l=this._get(t,"monthNames"),h=this._get(t,"monthNamesShort"),u=this._get(t,"beforeShowDay"),c=this._get(t,"showOtherMonths"),d=this._get(t,"selectOtherMonths"),p=this._getDefaultDate(t),f="",m=0;m<A[0];m++){for(_="",this.maxRows=4,v=0;v<A[1];v++){if(b=this._daylightSavingAdjust(new Date(Y,B,t.selectedDay)),x=" ui-corner-all",y="",L){if(y+="<div class='ui-datepicker-group",1<A[1])switch(v){case 0:y+=" ui-datepicker-group-first",x=" ui-corner-"+(F?"right":"left");break;case A[1]-1:y+=" ui-datepicker-group-last",x=" ui-corner-"+(F?"left":"right");break;default:y+=" ui-datepicker-group-middle",x=""}y+="'>"}for(y+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===m?F?s:i:"")+(/all|right/.test(x)&&0===m?F?i:s:"")+this._generateMonthYearHeader(t,B,Y,j,q,0<m||0<v,l,h)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=a?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",g=0;g<7;g++)k+="<th scope='col'"+(5<=(g+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+o[w=(g+n)%7]+"'>"+r[w]+"</span></th>";for(y+=k+"</tr></thead><tbody>",C=this._getDaysInMonth(Y,B),Y===t.selectedYear&&B===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,C)),x=(this._getFirstDayOfMonth(Y,B)-n+7)%7,C=Math.ceil((x+C)/7),D=L&&this.maxRows>C?this.maxRows:C,this.maxRows=D,T=this._daylightSavingAdjust(new Date(Y,B,1-x)),S=0;S<D;S++){for(y+="<tr>",I=a?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(T)+"</td>":"",g=0;g<7;g++)M=u?u.apply(t.input?t.input[0]:null,[T]):[!0,""],P=($=T.getMonth()!==B)&&!d||!M[0]||j&&T<j||q&&q<T,I+="<td class='"+(5<=(g+n+6)%7?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(T.getTime()===b.getTime()&&B===t.selectedMonth&&t._keyEvent||p.getTime()===T.getTime()&&p.getTime()===b.getTime()?" "+this._dayOverClass:"")+(P?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!c?"":" "+M[1]+(T.getTime()===W.getTime()?" "+this._currentClass:"")+(T.getTime()===E.getTime()?" ui-datepicker-today":""))+"'"+($&&!c||!M[2]?"":" title='"+M[2].replace(/'/g,"&#39;")+"'")+(P?"":" data-handler='selectDay' data-event='click' data-month='"+T.getMonth()+"' data-year='"+T.getFullYear()+"'")+">"+($&&!c?"&#xa0;":P?"<span class='ui-state-default'>"+T.getDate()+"</span>":"<a class='ui-state-default"+(T.getTime()===E.getTime()?" ui-state-highlight":"")+(T.getTime()===W.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#'>"+T.getDate()+"</a>")+"</td>",T.setDate(T.getDate()+1),T=this._daylightSavingAdjust(T);y+=I+"</tr>"}11<++B&&(B=0,Y++),_+=y+="</tbody></table>"+(L?"</div>"+(0<A[0]&&v===A[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}f+=_}return f+=R,t._keyEvent=!1,f},_generateMonthYearHeader:function(t,e,i,s,n,a,o,r){var l,h,u,c,d,p,f,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",b="";if(a||!g)b+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=n&&n.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=s.getMonth())&&(!h||u<=n.getMonth())&&(b+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+r[u]+"</option>");b+="</select>"}if(_||(v+=b+(!a&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!m)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=(o=function(t){return t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10),isNaN(t)?d:t})(c[0]),f=Math.max(p,o(c[1]||"")),p=s?Math.max(p,s.getFullYear()):p,f=n?Math.min(f,n.getFullYear()):f,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),_&&(v+=(!a&&g&&m?"":"&#xa0;")+b),v+"</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0);e=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),e=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,e)));t.selectedDay=e.getDate(),t.drawMonth=t.selectedMonth=e.getMonth(),t.drawYear=t.selectedYear=e.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min");e=i&&e<i?i:e;return(t=this._getMinMaxDate(t,"max"))&&t<e?t:e},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){return null==(t=this._get(t,"numberOfMonths"))?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t);n=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(t,n)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=null,a=null,o=this._get(t,"yearRange");return o&&(t=o.split(":"),o=(new Date).getFullYear(),n=parseInt(t[0],10),a=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(n+=o),t[1].match(/[+\-].*/)&&(a+=o)),(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())&&(!n||e.getFullYear()>=n)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){return e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear),e=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay)),this.formatDate(this._get(t,"dateFormat"),e,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}))},t.datepicker=new w,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get();return(n=Math.max.apply(null,n))>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=t||this.element.find("[autofocus]")).length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);var i,s,n;e.keyCode!==t.ui.keyCode.TAB||e.isDefaultPrevented()||(i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last"),e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){n.trigger("focus")})),e.preventDefault()):(this._delay((function(){s.trigger("focus")})),e.preventDefault()))},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,s){var n;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,i={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(i).appendTo(e.uiButtonSet).on("click",(function(){n.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,n){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,s(n))},drag:function(t,i){e._trigger("drag",t,s(i))},stop:function(n,a){var o=a.offset.left-e.document.scrollLeft(),r=a.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=r?"+":"")+r,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",n,s(a))}})},_makeResizable:function(){var e=this,i=this.options,s=i.resizable,n=this.uiDialog.css("position");s="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,s){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,a(s))},resize:function(t,i){e._trigger("resize",t,a(i))},stop:function(s,n){var o=(r=e.uiDialog.offset()).left-e.document.scrollLeft(),r=r.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=r?"+":"")+r,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",s,a(n))}}).css("position",n)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)})),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,i){var s,n=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((s=n.is(":data(ui-draggable)"))&&!i&&n.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((s=n.is(":data(ui-resizable)"))&&!i&&n.resizable("destroy"),s&&"string"==typeof i&&n.resizable("option","handles",i),s||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var e;this.options.modal&&(e=!0,this._delay((function(){e=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var t;this.options.modal&&this.overlay&&((t=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i=this.options,s=this.element.find(".ui-slider-handle"),n=[],a=i.values&&i.values.length||1;for(s.length>a&&(s.slice(a).remove(),s=s.slice(0,a)),e=s.length;e<a;e++)n.push("<span tabindex='0'></span>");this.handles=s.add(t(n.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,l=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(o<s||s===o&&(e===l._lastChangedValue||l.values(e)===h.min))&&(s=o,n=t(this),a=e)})),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(n,null,"ui-state-active"),n.trigger("focus"),o=n.offset(),r=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:e.pageX-o.left-n.width()/2,top:e.pageY-o.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY};e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return 1<(t=(t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n=this.value(),a=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),n=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),a[e]=i),i!==n&&!1!==this._trigger("slide",t,this._uiHash(e,i,a))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,a;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=e,a=0;a<s.length;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;0<=s;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e;t-=i;return 2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,u={};this._hasMultipleValues()?this.handles.each((function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](u,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i})):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?(s-n)/(a-n)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,a)))return}switch(n=this.options.step,i=s=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+n);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-n)}this._slide(e,a,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/);-1!==(i=t.inArray(i,s))&&s.splice(i,1),e.removeData("ui-tooltip-id"),(s=t.trim(s.join(" ")))?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,(function(t,e){s._updateContent(e.element)}))},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,(function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s.element[0],e.close(n,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each((function(){var e,s=t(this);s.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))})),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i=this.options.content,s=this,n=e?e.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(e,t,i);(i=i.call(t[0],(function(i){s._delay((function(){t.data("ui-tooltip-open")&&(e&&(e.type=n),this._open(e,t,i))}))})))&&this._open(e,t,i)},_open:function(e,i,s){var n,a,o,r=t.extend({},this.options.position);function l(t){r.of=t,a.is(":hidden")||a.position(r)}s&&((n=this._find(i))?n.tooltip.find(".ui-tooltip-content").html(s):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),n=this._tooltip(i),a=n.tooltip,this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),(s=t("<div>").html(a.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:l}),l(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval((function(){a.is(":visible")&&(l(r.of),clearInterval(o))}),t.fx.interval)),this._trigger("open",e,{tooltip:a})))},_registerCloseHandlers:function(e,i){var s={keyup:function(e){e.keyCode===t.ui.keyCode.ESCAPE&&((e=t.Event(e)).currentTarget=i[0],this.close(e,!0))}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),a=this._find(n);a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){s._removeTooltip(t(this))})),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,(function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]})),a.closing=!0,this._trigger("close",e,{tooltip:i}),a.hiding||(a.closing=!1))):n.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),n=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){return(t=t.data("ui-tooltip-id"))?this.tooltips[t]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){return(t=t.closest(".ui-front, dialog")).length||(t=this.document[0].body),t},_destroy:function(){var e=this;t.each(this.tooltips,(function(i,s){var n=t.Event("blur");s=s.element;n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var T,S,I,M,$,P,O,E,F,N,z,R,A,H,L,W,j,q,B,Y,V,U="ui-effects-",G="ui-effects-style",K="ui-effects-animated",J=t;function X(t,e,i){var s=E[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:t<0?0:s.max<t?s.max:t)}function Q(t){var e=P(),i=e._rgba=[];return t=t.toLowerCase(),z($,(function(s,n){var a=(a=n.re.exec(t))&&n.parse(a);n=n.space||"rgba";if(a)return a=e[n](a),e[O[n].cache]=a[O[n].cache],i=e._rgba=a._rgba,!1})),i.length?("0,0,0,0"===i.join()&&T.extend(i,I.transparent),e):I[t]}function Z(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function tt(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)"string"==typeof n[i=n[s]]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function et(e,i,s,n){return t.isPlainObject(e)&&(e=(i=e).effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),"number"!=typeof i&&!t.fx.speeds[i]||(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function it(e){return!e||"number"==typeof e||t.fx.speeds[e]||"string"==typeof e&&!t.effects.effect[e]||t.isFunction(e)||"object"==typeof e&&!e.effect}function st(t,e){var i=e.outerWidth();e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}t.effects={effect:{}},M=/^([\-+])=\s*(\d+\.?\d*)/,$=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],P=(T=J).Color=function(t,e,i,s){return new T.Color.fn.parse(t,e,i,s)},O={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},E={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},F=P.support={},N=T("<p>")[0],z=T.each,N.style.cssText="background-color:rgba(1,1,1,.5)",F.rgba=-1<N.style.backgroundColor.indexOf("rgba"),z(O,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),P.fn=T.extend(P.prototype,{parse:function(t,e,i,s){if(t===S)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=T(t).css(e),e=S);var n=this,a=T.type(t),o=this._rgba=[];return e!==S&&(t=[t,e,i,s],a="array"),"string"===a?this.parse(Q(t)||I._default):"array"===a?(z(O.rgba.props,(function(e,i){o[i.idx]=X(t[i.idx],i)})),this):"object"===a?(z(O,t instanceof P?function(e,i){t[i.cache]&&(n[i.cache]=t[i.cache].slice())}:function(e,i){var s=i.cache;z(i.props,(function(e,a){if(!n[s]&&i.to){if("alpha"===e||null==t[e])return;n[s]=i.to(n._rgba)}n[s][a.idx]=X(t[e],a,!0)})),n[s]&&T.inArray(null,n[s].slice(0,3))<0&&(n[s][3]=1,i.from&&(n._rgba=i.from(n[s])))}),this):void 0},is:function(t){var e=P(t),i=!0,s=this;return z(O,(function(t,n){var a,o=e[n.cache];return o&&(a=s[n.cache]||n.to&&n.to(s._rgba)||[],z(n.props,(function(t,e){if(null!=o[e.idx])return i=o[e.idx]===a[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return z(O,(function(i,s){e[s.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=(o=P(t))._space(),s=O[i],n=(t=0===this.alpha()?P("transparent"):this)[s.cache]||s.to(t._rgba),a=n.slice(),o=o[s.cache];return z(s.props,(function(t,i){var s=i.idx,r=n[s],l=o[s],h=E[i.type]||{};null!==l&&(null===r?a[s]=l:(h.mod&&(h.mod/2<l-r?r+=h.mod:h.mod/2<r-l&&(r-=h.mod)),a[s]=X((l-r)*e+r,i)))})),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),s=P(t)._rgba;return P(T.map(e,(function(t,e){return(1-i)*s[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=T.map(this._rgba,(function(t,e){return null==t?2<e?1:0:t}));return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=T.map(this.hsla(),(function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+T.map(e,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),P.fn.parse.prototype=P.fn,O.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,i=t[1]/255,s=t[2]/255,n=t[3],a=Math.max(e,i,s),o=Math.min(e,i,s),r=a-o,l=(t=.5*(l=a+o),i=o===a?0:e===a?60*(i-s)/r+360:i===a?60*(s-e)/r+120:60*(e-i)/r+240,0==r?0:t<=.5?r/l:r/(2-l));return[Math.round(i)%360,l,t,null==n?1:n]},O.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2];t=t[3],s=2*s-(i=s<=.5?s*(1+i):s+i-s*i);return[Math.round(255*Z(s,i,e+1/3)),Math.round(255*Z(s,i,e)),Math.round(255*Z(s,i,e-1/3)),t]},z(O,(function(t,e){var i=e.props,s=e.cache,n=e.to,a=e.from;P.fn[t]=function(t){if(n&&!this[s]&&(this[s]=n(this._rgba)),t===S)return this[s].slice();var e,o=T.type(t),r="array"===o||"object"===o?t:arguments,l=this[s].slice();return z(i,(function(t,e){null==(t=r["object"===o?t:e.idx])&&(t=l[e.idx]),l[e.idx]=X(t,e)})),a?((e=P(a(l)))[s]=l,e):P(l)},z(i,(function(e,i){P.fn[e]||(P.fn[e]=function(s){var n,a=T.type(s),o="alpha"===e?this._hsla?"hsla":"rgba":t,r=this[o](),l=r[i.idx];return"undefined"===a?l:("function"===a&&(s=s.call(this,l),a=T.type(s)),null==s&&i.empty?this:("string"===a&&(n=M.exec(s))&&(s=l+parseFloat(n[2])*("+"===n[1]?1:-1)),r[i.idx]=s,this[o](r)))})}))})),P.hook=function(t){t=t.split(" "),z(t,(function(t,e){T.cssHooks[e]={set:function(t,i){var s,n,a="";if("transparent"!==i&&("string"!==T.type(i)||(s=Q(i)))){if(i=P(s||i),!F.rgba&&1!==i._rgba[3]){for(n="backgroundColor"===e?t.parentNode:t;(""===a||"transparent"===a)&&n&&n.style;)try{a=T.css(n,"backgroundColor"),n=n.parentNode}catch(t){}i=i.blend(a&&"transparent"!==a?a:"_default")}i=i.toRgbaString()}try{t.style[e]=i}catch(t){}}},T.fx.step[e]=function(t){t.colorInit||(t.start=P(t.elem,e),t.end=P(t.end),t.colorInit=!0),T.cssHooks[e].set(t.elem,t.start.transition(t.end,t.pos))}}))},P.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),T.cssHooks.borderColor={expand:function(t){var e={};return z(["Top","Right","Bottom","Left"],(function(i,s){e["border"+s+"Color"]=t})),e}},I=T.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},L=["add","remove","toggle"],W={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(J.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,i,s,n){var a=t.speed(i,s,n);return this.queue((function(){var i=t(this),s=i.attr("class")||"",n=(n=a.children?i.find("*").addBack():i).map((function(){return{el:t(this),start:tt(this)}})),o=function(){t.each(L,(function(t,s){e[s]&&i[s+"Class"](e[s])}))};o(),n=n.map((function(){return this.end=tt(this.el[0]),this.diff=function(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(W[s]||!t.fx.step[s]&&isNaN(parseFloat(n))||(a[s]=n));return a}(this.start,this.end),this})),i.attr("class",s),n=n.map((function(){var e=this,i=t.Deferred(),s=t.extend({},a,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()})),t.when.apply(t,n.get()).done((function(){o(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),a.complete.call(i[0])}))}))},t.fn.extend({addClass:(H=t.fn.addClass,function(e,i,s,n){return i?t.effects.animateClass.call(this,{add:e},i,s,n):H.apply(this,arguments)}),removeClass:(A=t.fn.removeClass,function(e,i,s,n){return 1<arguments.length?t.effects.animateClass.call(this,{remove:e},i,s,n):A.apply(this,arguments)}),toggleClass:(R=t.fn.toggleClass,function(e,i,s,n,a){return"boolean"==typeof i||void 0===i?s?t.effects.animateClass.call(this,i?{add:e}:{remove:e},s,n,a):R.apply(this,arguments):t.effects.animateClass.call(this,{toggle:e},i,s,n)}),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}}),t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=(j=t.expr.filters.animated,function(e){return!!t(e).data(K)||j(e)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;i<s;i++)null!==e[i]&&t.data(U+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;s<n;s++)null!==e[s]&&(i=t.data(U+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(s){a=document.body}return e.wrap(s),e[0]!==a&&!t.contains(e[0],a)||t(a).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]!==i&&!t.contains(e[0],i)||t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1;e="vertical"!==i?(e||100)/100:1;return{height:t.height()*e,width:t.width()*s,outerHeight:t.outerHeight()*e,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();1<e&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(G,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(G)||"",t.removeData(G)},mode:function(t,e){return t=t.is(":hidden"),"toggle"===e&&(e=t?"show":"hide"),(t?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),n=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(U+"placeholder",i)),e.css({position:s,left:n.left,top:n.top}),i},removePlaceholder:function(t){var e=U+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,n){return n=n||{},t.each(i,(function(t,i){var a=e.cssUnit(i);0<a[0]&&(n[i]=a[0]*s+a[1])})),n}}),t.fn.extend({effect:function(){function e(e){var i=t(this),s=t.effects.mode(i,l)||n;i.data(K,!0),h.push(s),n&&("show"===s||s===n&&"hide"===s)&&i.show(),n&&"none"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()}var i=et.apply(this,arguments),s=t.effects.effect[i.effect],n=s.mode,a=i.queue,o=a||"fx",r=i.complete,l=i.mode,h=[];return t.fx.off||!s?l?this[l](i.duration,r):this.each((function(){r&&r.call(this)})):!1===a?this.each(e).each(u):this.queue(o,e).queue(o,u);function u(e){var a=t(this);function o(){t.isFunction(r)&&r.call(a[0]),t.isFunction(e)&&e()}i.mode=h.shift(),!1===t.uiBackCompat||n?"none"===i.mode?(a[l](),o()):s.call(a[0],i,(function(){a.removeData(K),t.effects.cleanUp(a),"hide"===i.mode&&a.hide(),o()})):(a.is(":hidden")?"hide"===l:"show"===l)?(a[l](),o()):s.call(a[0],i,o)}},show:(Y=t.fn.show,function(t){if(it(t))return Y.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(B=t.fn.hide,function(t){if(it(t))return B.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(q=t.fn.toggle,function(t){if(it(t)||"boolean"==typeof t)return q.apply(this,arguments);var e=et.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],(function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])})),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):st(this.css("clip"),this)},transfer:function(e,i){var s=t(this),n="fixed"===(l=t(e.to)).css("position"),a=t("body"),o=n?a.scrollTop():0,r=n?a.scrollLeft():0,l=(a={top:(a=l.offset()).top-o,left:a.left-r,height:l.innerHeight(),width:l.innerWidth()},s.offset()),h=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:l.top-o,left:l.left-r,height:s.innerHeight(),width:s.innerWidth(),position:n?"fixed":"absolute"}).animate(a,e.duration,e.easing,(function(){h.remove(),t.isFunction(i)&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=st(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})},V={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,e){V[e]=function(e){return Math.pow(e,t+2)}})),t.extend(V,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(V,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})),t.effects,t.effects.define("slide","show",(function(e,i){var s,n,a=t(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=e.mode,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,c=e.distance||a["top"==h?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(a),s=a.cssClip(),n=a.position()[h],d[h]=(u?-1:1)*c+n,d.clip=a.cssClip(),d.clip[o[l][1]]=d.clip[o[l][0]],"show"===r&&(a.cssClip(d.clip),a.css(h,d[h]),d.clip=s,d[h]=n),a.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}))})),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(s)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,s=t.ui.mouse.prototype,n=s._mouseInit,a=s._mouseDestroy;s._touchStart=function(t){!i&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,this._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},s._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},s._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},s._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),n.call(e)},s._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),a.call(e)}}}(jQuery);var OP_FINDER_ENDPOINT=V3_API_PATH+"/finder";function finder_getWriteVal(){var t=document.querySelector('input[name="tF_write"]:checked');return t&&"1"===t.value?1:0}function finder_find(){const t=$("#tF_submit");$(".finder_results").text("");var e=$("#tFe0-symbol").val(),i=$("#tFe0-curPrice").val(),s=$("#finder_priceDirection").val(),n=$("#tFe1_input_price-from").val(),a=$("#tFe1_input_price-to").val(),o=$("#tFe0-ivHist").val();"lt"===s&&(a=n,n="");var r=$("[name=finder_dateStyle]:checked").val(),l=$("#tFe1_input_date-date").val(),h=$("#tFe1_input_expiry-expiry").val(),u=$("#tFe1_input_cost-cost").val(),c={"option-purchase":"checked"===$("#finder-strat-option-purchase").attr("checked")||0===$("#finder-strat-option-purchase").length,"short-option":"checked"===$("#finder-strat-short-option").attr("checked"),"credit-spread":"checked"===$("#finder-strat-credit-spread").attr("checked"),"debit-spread":"checked"===$("#finder-strat-debit-spread").attr("checked")},d=finder_getWriteVal(),p=[];if(renderError(""),e||p.push("Please enter a symbol"),i||p.push("Please enter the current price"),n||a||p.push("Please enter expected price"),"date"!==r||l||p.push("Please enter expected date"),"date"===r||h||p.push("Please enter expected date"),p.length>0)renderError(" - "+p.join("<br/> - "));else{var f={symbol:e,targetting:s,priceFrom:n,priceTo:a,date:"date"===r?l:h,specificExpiry:"expiry"===r?"1":"0",currentPrice:i,ivHist:o,budgetCost:d?"":u,dataFormat:"v2",strategies:c,sell:d};$.getJSON(OP_FINDER_ENDPOINT,f,(function(t){finder_find_return(t,{sell:d})})),t.attr("disabled","disabled"),t.val("Finding...")}}function renderError(t){var e=$("#tFe1_results");e.html(""),e.append('<p class="txt_error">'+t+"</p>")}function renderIn_single_option_ele(t,e){t.append("<h3>"+e.title+": "+ucFirst(e.legsById.option.act)+" "+e.legsById.option.num+"x "+expDescFromYMD(e.legsById.option.expiry)+" "+formatPrice(e.legsById.option.strike)+" "+ucFirst(e.legsById.option.opType)+" @ "+formatPrice(e.legsById.option.price)+"</h3>")}function renderIn_spread_ele(t,e){t.append("<h3>"+e.title+": "+e.legsById.long.num+"x "+expDescFromYMD(e.legsById.long.expiry)+" "+e.legsById.long.strike+"/"+e.legsById.short.strike+" "+ucFirst(e.legsById.long.opType)+" @ "+formatPrice(e.legsById.long.price-e.legsById.short.price)+"</h3>")}function renderIn_summary(t,e){const i=e.init>0?"(credit)":"(debit)";t.append("<p>Entry cost: "+formatPrice(Math.abs(e.init))+" "+i+"</p>"),t.append('<p>Maximum risk<sup style="font-size: xx-small;">1</sup>: '+(null===e.maxRisk?"Infinite":formatPrice(Math.max(0,-e.maxRisk)))+"</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append('<p>Est. return<sup style="font-size: xx-small;">1</sup> at target price: '+formatPrice(e.net)+" ("+(e.netMargin?roundTo(100*e.roiMargin,1):roundTo(100*e.roiMaxRisk,1))+"%"+(e.netMargin?'<sup style="font-size: xx-small;">2</sup>':"")+")</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append("<p>Probability of profit: "+(null===e.pop?"N/A":roundTo(Math.max(.99,100*e.pop),1)+"% <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>"))}var v2stratMap={"long-call":"long-call","long-put":"long-put","short-call":"short-call","short-put":"short-put","bearish-call-credit-spread":"credit-spread","bearish-put-debit-spread":"put-spread","bullish-call-debit-spread":"call-spread","bullish-put-credit-spread":"credit-spread"};function finder_add_and_open(t){finder_add_to_calcs(t,{thenShow:!0})}function finder_add_to_calcs(t,e){e||(e={thenShow:!1});var i=$("<span />",{class:"loading"}),s={show:e.thenShow,spanEle:i};i.text("Opening calculation..."),$("[data-outcome-id="+t+"] a.button").replaceWith(i);var n=((outcomes[t]||{}).vars||{}).strat||{},a={strat:v2stratMap[n.metadata.stratKey],"underlying-symbol":$("#tFe0-symbol").val(),"underlying-curPrice":$("#tFe0-curPrice").val(),"underlying-marketPrice":$("#tFe0-marketPrice").val(),"underlying-lastPrice":$("#tFe0-lastPrice").val(),"underlying-ivHist":$("#tFe0-ivHist").val(),"graph-rangeAuto":"1","graph-type":"roiRisk","graph-date":"(today)"};Object.keys(n.legsById).map((function(t){"option"===n.legsById[t].type&&(a[t+"-act"]=n.legsById[t].act,a[t+"-price"]=n.legsById[t].price,a[t+"-curPrice"]=n.legsById[t].curPrice,a[t+"-num"]=n.legsById[t].num,a[t+"-opType"]=n.legsById[t].opType[0],a[t+"-expiry"]=n.legsById[t].expiry,a[t+"-strike"]=n.legsById[t].strike,a[t+"-iv"]=n.legsById[t].iv)}));ajaxRequest("adding calculation","newTab",a,doFinder_newTab_return,{values:a,showCfg:s})}function doFinder_newTab_return(t,e){ajaxRequest("adding calculation","calculate",Object.assign(t.values,{tabId:e.tabId,stratKey:t.values.strat}),doFinder_calculation_return,{tabReturnData:e,showCfg:t.showCfg})}var tabsFromFinder=[],outcomes;function doFinder_calculation_return(t,e){t.showCfg.spanEle.text(" (added)"),t.showCfg.spanEle.removeClass("loading");var i=$("<a />",{class:"button button--outline smallButton"});i.text("Open calculation"),i.click((function(e){$("#strat_"+t.tabReturnData.tabId+"_button .jq_exclusive_switch_flash").click()})),t.showCfg.spanEle.prepend(i),tabsFromFinder[t.tabReturnData.tabId]=!0,newTab_return({},t.tabReturnData,t.showCfg),doCalculation_return({tab_num:t.tabReturnData.tabId},e)}function render_finder_results(t,e){var i=$("#tFe1_results");i.html(""),(outcomes=t||[]).length?(i.append('<h2 style="margin-bottom: 0.3em">Top 5 options</h2>'),i.append('<p style="margin-bottom: 1em" class="minor">Sorted by % ROI of max risk (or % ROI initial collateral, for naked options)</p>'),outcomes.map((function(t,e){var s=$("<div />",{class:"finder_result","data-outcome-id":e}),n=((t||{}).vars||{}).strat;n&&(["long-put","long-call","short-put","short-call"].indexOf(n.metadata.stratKey)>=0&&renderIn_single_option_ele(s,n),["bearish-call-credit-spread","bullish-put-credit-spread","bearish-put-debit-spread","bullish-call-debit-spread"].indexOf(n.metadata.stratKey)>=0&&renderIn_spread_ele(s,n),renderIn_summary(s,t),s.append('<p class="finder__add-class"><a href="#" class="button smallButton button--outline" onclick="finder_add_and_open('+e+'); return false;">View detailed estimates</a></p>'),s.appendTo(i))})),i.append('<p class="minor"><sup>1</sup>Subject to changes in Implied Volatility for options with time left til expiry.</p>')):i.append('<p class="txt_error">Could not find any profitable call or put options for that target price and date.</p>')}function finder_updateStratPref(t){setCookie("finder_strat_"+t.name,t.checked?"1":"0",{expiry_days:365}),t.name}function finder_changeTargetPrice(){var t=$("#tFe1_input_price-from").val(),e=$("#tFe0-curPrice").val(),i=$("#finder_priceDirection").val(),s=parseFloat(t)>parseFloat(e);if("eq"===i?$("#finder_priceDirection").addClass("selectPlaceholder"):$("#finder_priceDirection").removeClass("selectPlaceholder"),s&&"lt"===i||!s&&"gt"===i){var n=getCookie("finder_strat_option-purchase"),a=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),$("#finder-strat-short-option").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),setCookie("finder_strat_option-purchase",n,{expiry_days:365}),setCookie("finder_strat_short-option",a,{expiry_days:365})}else{n=getCookie("finder_strat_option-purchase"),a=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked","0"!==n&&"checked").attr("disabled",!1).parent().removeClass("disabled"),$("#finder-strat-short-option").attr("checked","1"===a&&"checked").attr("disabled",!1).parent().removeClass("disabled")}$("#finder_long_opType").text(s?"call":"put"),$("#finder_short_opType").text(s?"put":"call")}function finder_find_return(t,e){const i=$("#tF_submit");i.attr("disabled",!1),i.val("Find options");var s=((t||{}).data||{}).outcomes;s?render_finder_results(s,e):addMsg("Options Finder is currently experiencing some issues")}function finder_options_loaded(t,e,i){var s=Object.keys(opCache[e.symbol]).filter((function(t){return"_data_source"!==t})),n=$("#tFe1_input_expiry-expiry");n[0].innerHTML='<option value="" disabled selected>—Select—</option>',s.forEach((function(t){n.append('<option value="'+t+'">'+t+"</option>")}))}function finder_changeDateType(t){$("input[name='finder_dateStyle'][value="+t+"]").click(),"expiry"===t?$("#tFe1_input_date-date").val(""):"date"===t&&$("#tFe1_input_expiry-expiry").val(""),$("#tFe1_input_date-date, #tFe1_input_expiry-expiry").addClass("appearDisabled"),$("#tFe1_input_"+t+"-"+t).removeClass("appearDisabled")}function finder_getDateFromExpiry(){$("#tFe1_input_date-date").val(""),finder_changeDateType("expiry")}function finder_resetExpiryDate(){$("#tFe1_input_expiry-expiry").val("")}function finder_clear_form(){($("#tFe0-symbol").val()||"").toUpperCase();$("#tFe1_input_price-from").val(""),$("#tFe1_input_date-date").val(""),finder_resetExpiryDate()}function finder_updatePreference(){var t=1===finder_getWriteVal();$("#tFe1_input_cost-cost").attr("disabled",t),t?$("#tF_budgetGroup").slideUp(100):$("#tF_budgetGroup").slideDown(100),setCookie("finderShortPreferred",t,{})}
