"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,a,s,n,r,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=l.length,i=0;i<n;i+=1)r[i]=str(i,l)||"null";return s=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+o+"]":"["+r.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;i<n;i+=1)"string"==typeof rep[i]&&(s=str(a=rep[i],l))&&r.push(quote(a)+(gap?": ":":")+s);else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s=str(a,l))&&r.push(quote(a)+(gap?": ":":")+s);return s=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+o+"}":"{"+r.join(",")+"}",gap=o,s}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var a;if(gap="",indent="","number"==typeof i)for(a=0;a<i;a+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,a,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(a=walk(s,i))?s[i]=a:delete s[i]);return reviver.call(t,e,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.onerror=function(t,e,i,a,s){var n=s?s.stack:"N/A",r={reqId:-1,message:t,fileName:e,lineNumber:i,url:window.location.protocol+"//"+window.location.host+"/"+window.location.pathname,callstack:n};$.ajax("/ajax/reportError",{type:"POST",data:r})};var tzOffset=-5,tzOffsetStr="-0500";function getInternetExplorerVersion(){var t=!1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}var ieVer=getInternetExplorerVersion();function openInNew(t,e){null==e&&(e={});var i={directories:"no",fullscreen:"no",height:parseInt(.8*$(window).height(),10),top:parseInt(.1*$(window).height(),10),width:parseInt(.8*$(window).width(),10),left:parseInt(.1*$(window).width(),10),location:"no",menubar:"no",status:"no",toolbar:"no"};for(var a in i)null==e[a]&&(e[a]=i[a]);var s="";for(a in e)s+=a+"="+e[a]+",";return window.open(t.href,"opc_popup",s),!1}function obj2str(t,e){(e=void 0)&&(e=0);var i="",a=0;if("object"==typeof t)for(var s in t){for(a=0;a<e;a++)i+=" ";i+=s+"=>"+t[s]+"\r\n","object"==typeof t[s]&&(i+=obj2str(t[s],e+1))}else i+=t;return i}function descNumList(t){for(var e="",i=0;i<t.length;i++)0==i?e+=t[i]:t[i]-t[i-1]>1?e+=("-"==e.slice(-1)?t[i-1]+", ":", ")+t[i]:t[i]-t[i-1]==1&&(e+=("-"==e.slice(-1)?"":"-")+(i==t.length-1?t[i]:""));return e}function commaVal(t){x=(t+="").split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1,$2");return x1+x2}function roundTo(t,e,i,a){null==e&&(e=0),null==i&&(i=!1),null==a&&(a=!0);var s=""+Math.round(parseFloat(t)*Math.pow(10,e))/Math.pow(10,e);if(i){-1==s.indexOf(".")&&(s+=".");for(var n=s.length-s.indexOf("."),r=0;r<e+1-n;r++)s+="0";a&&".00"==s.substr(s.length-3)&&(s=s.substring(0,s.length-3))}return s}function build_url_query(t,e,i){var a,s=[];for(k in t)a=t[k],null==i?s.push("array"==typeof a?build_url_query(a,!1,i+k):k+"="+urlencode(a)):s.push("array"==typeof a?build_url_query(a,!1,i+"["+k+"]"):i+"["+k+"]="+urlencode(a));return implode("&",s)}function urlencode(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function implode(t,e){var i="",a="",s="";if(1===arguments.length&&(e=t,t=""),"object"==typeof e){if(e instanceof Array)return e.join(t);for(i in e)a+=s+e[i],s=t;return a}return e}function explode(t,e,i){var a={0:""};if(arguments.length<2||void 0===arguments[0]||void 0===arguments[1])return null;if(""===t||!1===t||null===t)return!1;if("function"==typeof t||"object"==typeof t||"function"==typeof e||"object"==typeof e)return a;if(!0===t&&(t="1"),i){var s=e.toString().split(t.toString()),n=s.splice(0,i-1),r=s.join(t.toString());return n.push(r),n}return e.toString().split(t.toString())}function in_array(t,e,i){var a="";if(!!i){for(a in e)if(e[a]===t)return!0}else for(a in e)if(e[a]==t)return!0;return!1}function array_includes(t,e){return Array.prototype.includes?t.includes(e):!!~t.indexOf(e)}function index_assoc_array(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e.sort((function(t,e){return t-e})),e}function date(t,e,i){null==i&&(i=tzOffset);var a,s,n,r=/\\?([a-z])/gi,o=function(t,e){return(t+="").length<e?new Array(++e-t.length).join("0")+t:t},l=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],h={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};return n=function(t,e){return s[t]?s[t]():e},s={d:function(){return o(s.j(),2)},D:function(){return s.l().slice(0,3)},j:function(){return a.getDate()},l:function(){return l[s.w()]+"day"},N:function(){return s.w()||7},S:function(){return h[s.j()]||"th"},w:function(){return a.getDay()},z:function(){var t=new Date(s.Y(),s.n()-1,s.j()),e=new Date(s.Y(),0,1);return Math.round((t-e)/864e5)+1},W:function(){var t=new Date(s.Y(),s.n()-1,s.j()-s.N()+3),e=new Date(t.getFullYear(),0,4);return 1+Math.round((t-e)/864e5/7)},F:function(){return l[6+s.n()]},m:function(){return o(s.n(),2)},M:function(){return s.F().slice(0,3)},n:function(){return a.getMonth()+1},t:function(){return new Date(s.Y(),s.n(),0).getDate()},L:function(){return 1===new Date(s.Y(),1,29).getMonth()|0},o:function(){var t=s.n(),e=s.W();return s.Y()+(12===t&&e<9?-1:1===t&&e>9)},Y:function(){return a.getFullYear()},y:function(){return(s.Y()+"").slice(-2)},a:function(){return a.getHours()>11?"pm":"am"},A:function(){return s.a().toUpperCase()},B:function(){var t=3600*a.getUTCHours(),e=60*a.getUTCMinutes(),i=a.getUTCSeconds();return o(Math.floor((t+e+i+3600)/86.4)%1e3,3)},g:function(){return s.G()%12||12},G:function(){return a.getHours()},h:function(){return o(s.g(),2)},H:function(){return o(s.G(),2)},i:function(){return o(a.getMinutes(),2)},s:function(){return o(a.getSeconds(),2)},u:function(){return o(1e3*a.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){return 0+(new Date(s.Y(),0)-Date.UTC(s.Y(),0)!=new Date(s.Y(),6)-Date.UTC(s.Y(),6))},O:function(){var t=a.getTimezoneOffset();return(t>0?"-":"+")+o(Math.abs(t/60*100),4)},P:function(){var t=s.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-a.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(r,n)},r:function(){return"D, d M Y H:i:s O".replace(r,n)},U:function(){return a.getTime()/1e3|0}},this.date=function(t,e){return this,(a=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e)).setTime(a.getTime()+6e4*a.getTimezoneOffset()+36e5*i),t.replace(r,n)},this.date(t,e)}function ucFirst(t){return void 0===t&&(t=""),t.length?t[0].toUpperCase()+t.substr(1):t}function formatPrice(t){void 0===t&&(t=0);const e=Math.abs(t),i=t<0?"-":"";return Number(e).toLocaleString?i+"$"+Number(e).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}):i+"$"+roundTo(e,2,!0,!1)}function dateFromYMD(t,e,i,a){null==i&&(i=0),null==a&&(a=0);var s=tzOffset;return date(t,mktime(i,a,0,e.substr(5,2),e.substr(8,2),e.substr(0,4)),s)}function safeSelect(t,e,i){try{var a=e(t);return void 0===a?i:a}catch(t){return i}}function expDescFromYMD(t){var e=8===t.length?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,4):t,i=dateFromYMD("Y",e)==date("Y")?"":" "+dateFromYMD("Y",e);return dateFromYMD("j<\\s\\up>S</\\s\\up> M"+i,e)}function timeFromYMD(t,e,i){return null==e&&(e=0),null==i&&(i=0),mktime(e,i,0,t.substr(5,2),t.substr(8,2),t.substr(0,4))}function mktime(t,e,i,a,s,n){var r=s+" "+[0,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][parseInt(a,10)]+" "+n+" "+t+":"+(e<10?"0":"")+parseInt(e,10)+":"+(i<10?"0":"")+parseInt(i,10)+" "+tzOffsetStr;return new Date(r).getTime()/1e3}function getCallStack(){var t=[],e=!1;try{i.dont.exist+=0}catch(r){if(r.stack){for(var i=0,a=(s=r.stack.split("\n")).length;i<a;i++)s[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&t.push(s[i]);t.shift(),e=!0}else if(window.opera&&r.message){var s;for(i=0,a=(s=r.message.split("\n")).length;i<a;i++)if(s[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var n=s[i];s[i+1]&&(n+=" at "+s[i+1],i++),t.push(n)}t.shift(),e=!0}}if(!e)for(var r=arguments.callee.caller;r;){var o=r.toString(),l=o.substring(o.indexOf("function")+8,o.indexOf(""))||"anonymous";t.push(l),r=r.caller}return t}function openSMSurvey(){$("#sm-survey-wrapper").fadeIn(100),$(".survey-teaser").fadeOut(100),setCookie("survey_completed",!0,{expiry_days:365})}function closeSMSurvey(){$("#sm-survey-wrapper").fadeOut(100)}function jq_exclusive_switch(t,e,i,a){null==i?i="":i+="_";var s=t.attr("name"),n=s.indexOf(":"),r=s.substring(0,n),o=s.substring(n+1),l=$("#"+o+".jq_exclusive_"+i+"target"),h=$(t[0]);array_includes(["tablet","mobile"],viewStyle)&&l.attr("data-switch-toggle")?setTimeout((function(){l.toggle(e),h.hasClass("_-selected")?h.removeClass("_-selected"):h.addClass("_-selected")}),a?100:0):setTimeout((function(){l.show(e)}),a?100:0),$(".jq_exclusive_"+i+"target").filter("[name='"+r+"']").not(l).hide(e);var c=t.parents(".dialog_tab, .unique_switch");return c.is(".dialog_tab")?(c.siblings().removeClass("dialog_tab_selected"),c.siblings().addClass("dialog_tab"),c.addClass("dialog_tab_selected")):c.is(".unique_switch")&&(c.siblings().removeClass("unique_switch_selected"),c.siblings().addClass("unique_switch"),c.addClass("unique_switch_selected")),!1}function loadSliders(){$(".jq_exclusive_switch").click((function(){return jq_exclusive_switch($(this),0)})),$(".jq_exclusive_switch_flash").click((function(){return jq_exclusive_switch($(this),0,void 0,!0)})),$(".jq_exclusive_slide_switch").click((function(){return jq_exclusive_switch($(this),200,"slide")}))}function init_funcs(t){loadSliders(),$("#msg").ajaxError((function(t,e,i,a){}))}function ajaxRequest(t,e,i,a,s){for(var n in requests)if(requests.hasOwnProperty(n)){if(delete requests[n].data.reqId,requests[n].status==REQ_PENDING&&requests[n].desc==t&&requests[n].cmd==e&&requests[n].data==serialize1D(i)&&requests[n].time>(new Date).getTime()-1e3)return!1}return i.reqId=nextRequest(t,e,i,s),ajaxCall(e,i,(function(t){requests[i.reqId].status=t.status,a(requests[i.reqId].localData,t)})),i.reqId}function ajaxCall(t,e,i){$.getJSON(BASE_URL+WEB_PATH+"ajax/"+t,e,i)}var requests=new Array,numRequests=0;function nextRequest(t,e,i,a){return requests[numRequests]=new Array,requests[numRequests].time=(new Date).getTime(),requests[numRequests].checker=setInterval("checkRequest("+numRequests+")",1e3),requests[numRequests].desc=t,requests[numRequests].cmd=e,requests[numRequests].localData=a,requests[numRequests].data=serialize1D(i),requests[numRequests].status=REQ_PENDING,++numRequests-1}function checkRequest(t){var e=(new Date).getTime()-requests[t].time,i=requests[t].cmd;requests[t].status==REQ_OK||requests[t].status==REQ_ERROR||"activateTab"==i||"closeTab"==i?clearInterval(requests[t].checker):(e>=5e3&&"newTab"==i||e>=15e3&&"getStockPrice"==i||e>=3e4&&("getOptions"==i||"calculate"==i))&&(inputError("It's taking a while "+requests[t].desc+", please refresh the page and try again"),clearInterval(requests[t].checker))}function serialize1D(t){var e="";for(var i in t)e+=i+"="+t[i]+"&";return e}function reportError(t){alert(t)}function alert_return(t){alert(obj2str(t))}$.fn.extend({getTH:function(){var t=$(this).prevAll().length;return $(this).parents("table").find("td, th").eq(t)}}),$.fn.extend({getRowTH:function(){return $(this).parents("tr").find("th").eq(0)}}),function(t){t.scrollTo=function(e,i){var a,s=t("html").scrollTop(),n=t(e).offset().top,r=t(window).innerHeight();!1!==(a=n<s?n:!(n<s+2*r/3)&&n-r*(1/3))&&t("html, body").animate({scrollTop:a},void 0===i?500:i)}}(jQuery);var listeners=new Array,curTab;function addListener(t,e,i){null==listeners[t]&&(listeners[t]=new Array),listeners[t].push({func:e,data:i})}function triggerListener(t,e){if(null!=listeners[t])for(i in listeners[t])e.tab_num==listeners[t][i].data.tab_num&&listeners[t][i].func(t,e,listeners[t][i].data);return!0}function newTab(t,e){void 0!==window.viewStyle&&"full"!==viewStyle&&$("#top_but-calculator").hide();var i=null==e?ajaxRequest("creating new tab: "+t,"newTab",{strat:t},newTab_return,{strat:t}):e;return $(".popup").dialog("close"),$("[name='strat_tabs']").hide(),$("#calcs_holder").append('<div class="jq_exclusive_target" id="newTab_req'+i+'" name="strat_tabs"><p><span class="loading">Loading</span></p></div>'),!1}function newTab_return(reqData,data,cfg){if(cfg=Object.assign({show:!0},cfg||{}),null!=data["strat-info"]&&null!=data["strat-info"].text){_opcGaq.push(["_trackPageview","/calculator/"+data["strat-info"].name+".html"]);var code='<li class="stratTab dialog_tab"name="strat_tabs:strat_'+data.tabId+'" id="strat_'+data.tabId+'_button"><div><a href="#" name="strat_tabs:strat_'+data.tabId+'" class="jq_exclusive_switch_flash name" onclick="showTab(this); return false;">New '+data["strat-info"].text+"</a> <a href='#' class='close_x' onclick=\"return closeTab(this);\" title='close'>X</a><img src='"+WEB_PATH_STATIC+"images/tab-fade-top.gif' class='tab_fade_top'/><img src='"+WEB_PATH_STATIC+"images/tab-fade-bot.gif' class='tab_fade_bot'/></div></li>";$("#tab_holder_tabs").prepend(code)}$("#newTab_req"+data.reqId).remove();var hideClass=!1===cfg.show?" jq_start_hidden":"";$("#calcs_holder").append('<div class="jq_exclusive_target stratContent'+hideClass+'" id="strat_'+data.tabId+'" name="strat_tabs">'+data.code+"<div class='results jq_start_hidden' id='t0_results'>\r\n <div id='t"+data.tabId+"_summary' class='summary'></div>\r\n <div id='t"+data.tabId+"_ads' class='ads'></div>\r\n <div id='t"+data.tabId+"_graph' class='graph'></div></div>\r\n</div>"),$("[name='strat_tabs:strat_"+data.tabId+"']").click((function(){return jq_exclusive_switch($(this),0)})),null!=data.script&&""!=data.script&&eval(data.script),null!=data.js_files&&data.js_files,null!=data.css_files&&data.css_files,cfg.show&&($("[name='strat_tabs:strat_"+data.tabId+"']").click(),refreshIntraStratAd(data.tabId))}function showTab(t,e,i){closeCurrentTabs&&closeCurrentTabs(),void 0===e&&_opcGaq.push(["_trackEvent","Tabs","Show"]);var a="number"==typeof t?t:$(t).attr("name").substring(17);return $(".popup").dialog("close"),"F"!==a&&$("#strat_F_button").removeClass("dialog_tab_selected"),refreshIntraStratAd(a),tabsFromFinder&&tabsFromFinder[a]&&$("#strat_"+a+" .breadcrumb").html('<a href="/option-finder.html" onclick="switchToTabVisually(\'F\'); return false;">Option Finder Results</a> &gt;'),!0!==i&&safeSelect(window,(function(t){return t.history.state.tabNo}))!==a&&openTabHandleRoutes(a),curTab=a,ajaxRequest("activating tab","activateTab",{stratNo:a},general_return),!1}function getRouteData(t){if("F"===t)return{title:"Option finder - by Options Profit Calculator",url:"/option-finder.html"};var e=$("#t"+t+"_stratKey").val(),i=$("#strat_"+t+"_button div a .minor").eq(0).text(),a=$("#strat_"+t+"_button div a").eq(0).text();return{title:a.slice(0,a.length-i.length)+" "+i,url:"/calculator/"+e+".html"}}function openTabHandleRoutes(t){if(window.history&&window.history.pushState){var e=getRouteData(t);window.history.pushState({tabNo:t},e.title,BASE_URL+e.url),$("head title").text(e.title)}else document.location.hash="tab="+t}function switchToTabVisually(t){$("#strat_"+t).length>0&&($(".stratTab.dialog_tab").removeClass("dialog_tab_selected"),$(".stratContent").hide(),$("#strat_"+t+"_button").addClass("dialog_tab_selected"),$("#strat_"+t).show())}function refreshIntraStratAd(t){window.fusetag&&window.fusetag.loadSlotById&&($("#fuse-21977025922-"+t).attr("data-fuse")||($("#fuse-21977025922-"+t).attr("data-fuse","21977025922"),window.fusetag.loadSlotById(21977025922,"fuse-21977025922-"+t)))}function closeTab(t){var e=$(t).parent().parent(),i=$(e).next(),a=$(e).prev(),s=$("a:first",e).attr("name"),n=s.indexOf(":"),r=(s.substring(0,n),s.substring(n+1)),o=r.substring(6);if($("#"+r+".jq_exclusive_target").remove(),$(e).remove(),rq=ajaxRequest("closing tab","closeTab",{stratNo:o},general_return),o==curTab){var l=o;i.length?l=i[0].id.substr(6,i[0].id.length-13):a.length&&(l=a[0].id.substr(6,a[0].id.length-13)),jq_exclusive_switch($('a[name="strat_tabs:strat_'+l+'"]'),0),_opcGaq.push(["_trackEvent","Tabs","Close"]),showTab(parseInt(l),!0)}return!1}function general_return(t){}function viewMore(t){return $(".more",$(t.currentTarget).parent()).slideToggle(),$(this).hasClass("expanded")?$(t.currentTarget).removeClass("expanded"):$(t.currentTarget).addClass("expanded"),!1}function addMsg(t,e){inputError(t,e)}function inputError(t,e){if(null==e&&(e="error"),"verbose"==e)return alert(t),!1;$("#status_messages").append("<div class='msg txt_"+e+"' style='display:none;'>"+t+" <a href='#close' class='close_x' title='close' onclick='return closeMsg(this);'>x</a></div>"),$("#status_messages").show(),$("#status_messages .msg:last").delay(500).hide().slideDown(500).delay(5e3).slideUp(1e3,(function(){var t=$(this).parent();$(this).remove(),0==$(".msg",t).length&&t.show().slideUp(200).fadeOut()}))}function closeMsg(t){$(t).parent().clearQueue().slideUp(1e3,(function(){var t=$(this).parent();$(this).remove(),0==$(".msg",t).length&&t.show().slideUp(200).fadeOut()}))}function setCookie(t,e,i){null==i.expiry_days&&(i.expiry_days=30),null==i.path&&(i.path="/");var a=new Date;a.setDate(a.getDate()+i.expiry_days);var s=escape(e)+";path="+escape(i.path)+";expires="+a.toUTCString()+";max-age="+60*i.expiry_days*60*24+";domain="+(COOKIE_DOMAIN||"");document.cookie=t+"="+s;var n=";path="+escape(i.path)+";expires=Thu, 01 Jan 1970 00:00:01 GMTNaN"+(BASE_URL||"").replace(/(http)?s?:?\/?\/?/,"");document.cookie=t+"="+n}function getCookie(t){var e,i,a,s=document.cookie.split(";");for(e=0;e<s.length;e++)if(i=s[e].substr(0,s[e].indexOf("=")),a=s[e].substr(s[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return unescape(a)}function onAdChange(t,e){if(!!e||(t||[]).filter((function(t){return t.addedNodes.length>0})).length>0){var i=$(t[0].target).closest(".ad");(!i.css("minHeight")||i.height()>parseFloat(i.css("minHeight")))&&i.css("minHeight",i.height()+"px")}}function isTransitionalTheme(){return $("body").hasClass("transitional")}function getLoadingHtml(t){return"<span class='loading-wrapper'><em class='loading'>"+t+"</em></span>"}window.addEventListener("popstate",(function(t){var e=safeSelect(t,(function(t){return t.state.tabNo}),!1);!1!==e&&switchToTabVisually(e)})),function(){var t=getCookie("first_use");setCookie("first_use",null==t?parseInt((new Date).getTime()/1e3,10):t,{expiry_days:36500});var e=getCookie("PHPSESSID"),i=getCookie("num_visits");null==i&&(i=0),setCookie("num_visits",parseInt(i)+1,{expiry_days:36500}),setCookie("last_session_id",e,{expiry_days:36500})}(),$(document).click((function(t){isTransitionalTheme()&&$("#top_menu .id-calculator").hasClass("dialog_tab_selected")&&"calc-menu-toggler"!==$(t.target).attr("data-special")&&setTimeout((function(){(0===$(t.target).closest("#top_but-calculator").length||$(t.target).closest("#options_menu a").length>0)&&($("#top_but-calculator").hide(),$("#top_menu .id-calculator").removeClass("dialog_tab_selected"))}),100)})),$(document).ready((function(){"undefined"!=typeof __ez&&!0!==(__ez.template||{}).isOrig&&$("[data-fuse]").remove();var t="undefined"!=typeof MutationObserver&&new MutationObserver(onAdChange);t.observe&&$(".ad").each((function(){t.observe(this,{subtree:!0,childList:!0}),onAdChange([{target:this}],!0)}))}));var loadingHtml=getLoadingHtml("Loading"),results=[];function getPrice(t){var e=$("#"+t.eleId+"-symbol").val();if(""===e);else{t.button="string"==typeof t.button?"#"+t.button:t.button,$(t.button).addClass("loading").html("Loading");var i={button:t.button,uEleId:t.eleId,eleId:t.eleId,stock:e};if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i,!0);ajaxRequest("getting price: "+e,"getStockPrice",{stock:e},getPrice_return,{eleId:t.eleId,button:t.button,stock:e});getOptions(i)}}var underlying_symb=[];function getPrice_return(t,e){if($(t.button).removeClass("loading").html(""),e.status==REQ_ERROR)inputError(e.desc||"No prices found"),4==e.data_status&&_opcGaq.push(["_trackEvent","Symbol not found",t.stock]);else if(e.status==REQ_OK){var i=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),i=e.symbol_correction.toUpperCase()),_opcGaq.push(["_trackEvent","Symbol search",(i||"").toLowerCase()]),underlying_symb[curTab]=i;var a=parseFloat(e.price.last)>0?e.price.last:(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2,s=e.price.bid>0&&e.price.ask>0?(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2:e.price.last,n=parseFloat(e.price.ivHist)>0?parseFloat(e.price.ivHist):null;""===$("#"+t.eleId+"-price").val()&&$("#"+t.eleId+"-price").val(a),$("#"+t.eleId+"-curPrice").val(a),$("#"+t.eleId+"-lastPrice").val(a),$("#"+t.eleId+"-marketPrice").val(s),$("#"+t.eleId+"-ivHist").val(n),$("#"+t.eleId+"-curPrice").length>0&&$("#"+t.eleId+"-curPrice").get(0).onchange&&$("#"+t.eleId+"-curPrice").get(0).onchange()}}function isToStock(t){return t.indexOf(".to")===t.length-3&&t.length>=4}function getOptions(t){var e=$("#"+t.uEleId+"-symbol").val().trim(),i={stock:e,uEleId:t.uEleId,eleId:t.eleId};if(""===e);else{if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i);if(t.showSelect)for(var a in i.defaultType=t.defaultType,i.showSelect=!0,requests)requests[a].status==REQ_PENDING&&requests[a].desc=="getting options: "+e&&"getOptions"==requests[a].cmd&&requests[a].data==serialize1D({stock:e})&&(requests[a].localData=i);ajaxRequest("getting options: "+e,"getOptions",{stock:e},getOptions_return,i)}}function sortChainOptions(t){return Object.keys(t).reduce((function(e,i){return"_data_source"===i||(e[8===i.length?i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2):i]={c:padStrikeKeys(t[i].c),p:padStrikeKeys(t[i].p)}),e}),{})}function padStrikeKeys(t){return Object.keys(t).sort((function(t,e){return parseFloat(t)-parseFloat(e)})).reduce((function(e,i){return e[parseFloat(i).toFixed(2)]=t[i],e}),{})}function getV3priceData(t,e,i){$.getJSON(V3_API_PATH+"/price/"+t).always((function(t){if(!t||!t.data||"SUCCESS"===!t.data.result)return inputError("Prices not found"),void $("#"+e.eleId+"-loading").hide();var a=sortChainOptions(t.data.options);getOptions_return(e,{status:REQ_OK,options:a}),i&&getPrice_return(e,{status:REQ_OK,price:t.data.stock})}))}var opCache={};function getOptions_return(t,e){$("#"+t.eleId+"-option .panel_button").removeClass("loading");var i=t.eleId.slice(1,t.eleId.indexOf("e"));if(e.status==REQ_ERROR)opCache[t.stock]=REQ_ERROR,inputError(e.desc||"Options not found"),t.showSelect&&(inputError("Options not found for that symbol.","verbose"),_opcGaq.push(["_trackEvent","Options not found",t.stock]),$("#"+t.eleId+"-option_selector").dialog("close"));else if(e.status==REQ_OK){$("#strat_"+i+'_form input[name$="-expiry"]').each((function(t,a){var s=$(a).attr("name").substr(0,$(a).attr("name").length-7),n=$(a).val(),r=$("#strat_"+i+'_form input[name="'+s+'-strike"]').val(),o=$("#strat_"+i+'_form select[name="'+s+'-opType"]').val(),l=(((e.options||{})[n]||{})[o]||{})[r];if(l){var h=$("#strat_"+i+'_form input[name="'+s+'-curPrice"]'),c=parseFloat(h.val()),u=getBestPrice(l);$("#strat_"+i+'_form input[name="'+s+'-curPrice"]').val(u),c!==u&&$("#strat_"+i+'_form input[name="'+s+'-iv"]').val("")}}));var a=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),a=e.symbol_correction.toUpperCase()),opCache[a]=sortChainOptions(e.options),t.showSelect&&optionSelect(t)}triggerListener("option_data",{tab_num:i,symbol:a})}function optionSelect(t){var e=$("#"+t.uEleId+"-symbol").val(),i=$("#"+t.uEleId+"-curPrice").val(),a=($("#"+t.eleId+"-strike").val(),$("#"+t.eleId+"-opType").val()),s=$("#"+t.eleId+"-act").val(),n=($("#"+t.eleId+"-expiry").val(),$("#"+t.eleId+"-option_selector"));if(""!==e){if(void 0!==viewStyle&&"mobile"===viewStyle){var r=$(window).width(),o=$(window).height();$(n).dialog("option",{width:r-5,height:o-5})}if(opCache[e]&&opCache[e]!==REQ_ERROR){$(n).html(loadingHtml);var l=optionsSelectCode({eleId:t.eleId,underlying_price:i,opType:a,opAct:s},opCache[e]);$(n).dialog("open"),n.html(l),initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,stock:e})}else opCache[e]==REQ_ERROR?inputError("Options not found for that symbol.","verbose"):t.showSelect||(getOptions({showSelect:!0,eleId:t.eleId,defaultType:t.defaultType,uEleId:t.uEleId}),$(n).dialog("open"))}else inputError('Enter an underlying symbol in the "Symbol" field above before trying to select options');return!1}var shownAds=!1,showAds_intId=!1,showAds_timeDur=5,min_adShow_time=2,showAds_timeLeft,loadCtr=$("#loading-ctnr");function doCalculation(t,e){0===loadCtr.length&&(loadCtr=$("#loading-ctnr")),$("body").hasClass("full")&&(showAds_timeDur=0,min_adShow_time=0),$(".field_error").removeClass("field_error");var i={};$.each($("#strat_"+t+" form").serializeArray(),(function(t,e){i[e.name]=e.value})),i.tabId=t;var a=validateCalcReq(e,i);($("#t"+t+"_agree_tc").length>0&&void 0===$("#t"+t+"_agree_tc").attr("checked")&&(!1===a&&(a=[]),a.push("agree_tc_label")),a)?(inputError("Please complete the fields below..."),highlightValErrors(t,a)):$("#t"+t+"_graph-newTab").attr("checked")?("undefined"!=typeof fromClose&&_opcGaq.push(["_trackEvent","Tabs","Re-calc in new tab"]),newTab(!1,ajaxRequest("calculating results","calculate",i,doCalculation_return,{tab_num:t})),$.scrollTo("#top_menu",500)):($("#t"+t+"_submit").attr("disabled","disabled"),$("#t"+t+"_submit").attr("value","Calculating..."),$("#t"+t+"_graph-newTab_holder").css("display",""),$("#strat_"+t+" .results").hide(),showAds_timeLeft=showAds_timeDur,showAds_timeDur=Math.max(min_adShow_time,showAds_timeDur-1),$(".loading-wrapper",loadCtr).replaceWith(loadingHtml),loadCtr.show(),$.scrollTo("#load-anchor",500),shownAds=!0,showAds_timeLeft>0&&(loadCtr.addClass("load-timeout"),clearInterval(showAds_intId),showAds_intId=setInterval((function(){updateShowCountdown(t)}),1e3)),$(".popup").dialog("close"),$("#t"+t+"_graph").html(""),ajaxRequest("calcuating results","calculate",i,doCalculation_return,{tab_num:t}))}function updateShowCountdown(t){showAds_timeLeft<=1?(clearInterval(showAds_intId),loadCtr.hasClass("load-timeout")?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t)):(showAds_timeLeft=Math.max(0,showAds_timeLeft-1),$("#loading-ctnr .showResultsBut .time-left").html("("+showAds_timeLeft+")"))}function validateCalcReq(t,e){var i=[];for(var a in e)""===e[a]&&(a.indexOf("-num")>0||a.indexOf("-strike")>0||a.indexOf("underlying-curPrice")>=0||a.indexOf("-expiry")>0||a.indexOf("-opType")>0||a.indexOf("-price")>0&&-1===a.indexOf("-priceMin")&&-1===a.indexOf("-priceMax"))&&(i[i.length]=a);return i.length>0&&i}function highlightValErrors(t,e){var i="";for(var a in e){if(e[a].indexOf("-strike")>0||e[a].indexOf("-opType")>0||e[a].indexOf("-expiry")>0)i+=(a>0?", ":"")+"#strat_"+t+' [name="'+e[a].slice(0,e[a].lastIndexOf("-"))+'-option"] .panel_button';else i+=(a>0?", ":"")+"#strat_"+t+' [name="'+e[a]+'"]'}$(i).each((function(){$(this).addClass("field_error")}))}function hideLoaderShowGraph(t){loadCtr.hide(),$("#t"+t+"_submit").attr("value","Calculate"),$(".results").show()}function wrapInParensIfReq(t,e,i,a){if("("===e[0])return e;var s=i[0].toUpperCase()+i.substr(1),n=$("#t"+t+"_graph-price"+s).val();return"1"==a||""===n||n.length&&"("===n[0]?"(auto:"+e+")":e}function stripNonNumeric(t){return(""+t).replace(/\D\./g,"")}function doCalculation_return(t,e){$("#t"+t.tab_num+"_submit").removeAttr("disabled"),$("#t"+t.tab_num+"_graph-newTab_holder").css("display",""),$("#t"+t.tab_num+"_graph-priceMin").val(roundTo(stripNonNumeric(e.results.graph_priceMin),2)),$("#t"+t.tab_num+"_graph-priceMax").val(roundTo(stripNonNumeric(e.results.graph_priceMax),2)),$("#t"+t.tab_num+"_graph-rangeAuto").val(e.results.graph_rangeAuto?"1":"0");var i=loadCtr.hasClass("load-timeout");if(i?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t.tab_num),null!=e.newTab){var a=$("#strat_"+t.tab_num+" .results"),s=$("#strat_"+t.tab_num);$("#strat_"+t.tab_num).attr("id","#strat_"+t.tab_num+"-old"),e.oldTab.tabId=t.tab_num,newTab_return(t,e.oldTab,{show:!1}),$("#strat_"+t.tab_num+" .results").replaceWith(a),i&&$("#t"+e.newTab.tabId+"results").hide(),s.remove(),t.tab_num=e.newTab.tabId,newTab_return(t,e.newTab)}e.status==REQ_ERROR?(inputError(e.desc),$("#t"+t.tab_num+"_summary").html("")):e.status==REQ_OK&&(results[t.tab_num]=e.results,_opcGaq.push(["_trackEvent","Calculation: "+e.results.strat,e.results.underlying_symb,e.tab_desc_long.desc.substring(e.results.underlying_symb.length+1)]),$("#strat_"+t.tab_num+"_button .name").html(e.tab_desc.desc+"<br/><span class='minor'>"+e.tab_desc.type+"</span>"),showAds_timeLeft>2&&$("#loading-ctnr .loading").replaceWith("<a href='#' onclick='hideLoaderShowGraph("+t.tab_num+"); renderResults("+t.tab_num+"); return false;' class='showResultsBut'>Show results <span class='time-left'>("+showAds_timeLeft+")</span></a>"),renderResults(t.tab_num))}function renderResults(t){for(var e in $("#t"+t+"_summary").html("<h2>Estimated returns</h2>"+getSummary(results[t])+getSharingCode(t)),$("#t"+t+"_graph").html(renderGraph(results[t],t)),$("#strat_"+t+" .results").show(),results[t].vars)$("#strat_"+t+' [name="'+e+'"]').val(results[t].vars[e]);initResults(t),$.scrollTo("#t"+t+"_summary",500)}function getSharingCode(t){return"<div class='shareHolder'>\n  <span>Share this on:</span>\n  <div class='shareMenu'>\n    <a href='#' onclick='loadShare({type:\"fb\", tab_num:"+t+", link_ele:this}); return false;' title='Share this calculation on facebook' class='facebook shareIcon'>Facebook</a>\n    <a href='#' onclick='loadShare({type:\"tw\", tab_num:"+t+", link_ele:this}); return false;' title='Tweet this calculation on twitter' class='twitter shareIcon'>Tweet this</a>\n    or <a href='#' onclick='loadShare({type:\"link\", tab_num:"+t+", link_ele:this}); return false;' title='Short-link' class='link'>Get short-link to share</a>\n  </div>\n  <div class='sharePanel'></div>\n</div>"}function loadShare(t){if("link"==t.type){$(t.link_ele).parent().addClass("active").addClass(t.type);var e=$(".sharePanel",$(t.link_ele).parent().parent());e.show()}if(null!=results[t.tab_num].link_code)t.link_code=results[t.tab_num].link_code,
//!!! send request to update the saved tab
showShare(t);else if("link"==t.type){e.html("<P>"+getLoadingHtml("Getting link")+"</P>");ajaxRequest("getting share link","linkCode",{tab_num:t.tab_num},loadShare_return,t)}else window.open(WEB_PATH+"share.html?m="+t.type+"&t="+t.tab_num,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function loadShare_return(t,e){results[t.tab_num].link_code=e.link_code,$(t.addThis_ele).click(),t.link_code=e.link_code,showShare(t)}function showShare(t){var e,i=[["Check out this ",""],[""," is looking good"],["This "," is worth watching"],[""," worth keeping an eye on"],["Nice ",""]],a=Math.floor(Math.random()*i.length),s=i[a][0]+results[curTab].underlying_symb+" "+{"covered-call":"Covered Call","long-call":"Long call","short-call":"Naked call","long-put":"Long put","short-put":"Naked put","call-spread":"Call Spread","put-spread":"Put Spread","calendar-spread":"Calendar Spread",straddle:"Straddle",collar:"Collar","iron-condor":"Iron Condor",butterfly:"Butterfly"}[results[curTab].strat]+i[a][1],n=$(".sharePanel",$(t.link_ele).parent().parent());if("fb"==t.type?e="https://www.facebook.com/sharer.php?u="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code):"tw"==t.type?e="https://twitter.com/intent/tweet?status="+encodeURIComponent(s)+": "+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"+via+@opcalc&url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"&via=opcalc":"link"==t.type?n.html('<P>Copy this link to share via email, forums or other sharing services:</p><p><input type="text" style="font-weight:bold; width:100%;" value="'+BASE_SHORT_URL+WEB_PATH+t.link_code+'"/></p>'):"gg"==t.type&&(e="https://plus.google.com/share?url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)),e)window.open(e,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function avgPrice(t){var e,i=0;for(e=0;e<t.length;e++)i+=parseFloat(t[e]);return(Math.round(i/t.length*100)/100).toFixed(2)}function optionsSelectCode(t,e){var i,a=e,s=[],n="<div class='options_set_holder'>",r=$("#"+t.eleId+"-expiry").val(),o=!1;""==r&&(r=!0);var l=[];for(var h in a)l.push(h);l.sort();for(var c=0;c<l.length;c++){oDate=l[c],"W"===(h=l[c])[h.length-1]&&(h=h.slice(0,h.length-1)),1==r||oDate==r?(o=(new Date).getTime()/1e3<timeFromYMD(h))?o=!0:(o=!1,r=!0):o=!1;var u="W"===oDate[oDate.length-1];""!==(i=10==h.length?dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",h)?"&\\nb\\sp;Y":""),h):7==h.length?dateFromYMD("M"+(date("y")!=dateFromYMD("y",h+"-15")?"&\\nb\\sp;Y":""),h+"-15"):"")&&s.push("<a href='#' class='options_date_link"+(o?" options_date_link_active":"")+(null==a[oDate]?" options_date_link_unfilled":"")+"' name=\""+oDate+'">'+i+(u?'<span class="weeklyIndicator">(weekly)</span>':"")+"</a>"),null!=a[oDate]&&o?n+=optionsSelectMonthCode({sData:t,selectMonth:o,tDate:oDate,tDateData:a[oDate]}):n+="<div class='options_set "+(o?"options_set_active ":"")+oDate+"' name='"+oDate+"'>\r\n</div>",1==o&&(o=!1,r=!1)}return n="<div class='dates'>"+s.join(" | ")+"</div>"+n+"</div>"}function optionsSelectMonthCode(t){var e="",i=t.selectMonth,a=t.tDate,s=t.tDateData,n=t.sData;e+="<div class='options_set "+(i?"options_set_active ":"")+a+"' name='"+a+"'>\r\n<p style='text-align: left; margin-bottom: 0.5em;' class='minor'>Options prices are delayed 15 minutes</p>\r\n<table cellspacing='0' cellpadding='0'><tbody>";var r,o={};function l(t){return Number(t).toFixed(2)}for(var h in e+='<tr class="type"><th colspan="3" align="center">Calls</th><th>&nbsp;</th><th colspan="3" align="center">Puts</th></tr><tr class="cols"><th>Bid</th><th>Mid</th><th>Ask</th><th class="s">Strike</th><th>Bid</th><th>Mid</th><th>Ask</th></tr>',s.c)r=in_array(s.c[h].b,["N",0,"0.00"])&&in_array(s.c[h].b,["N",0,"0.00"])?in_array(s.c[h].l,["N",0,"0.00"])?"N":s.c[h].l:avgPrice([s.c[h].b,s.c[h].a]),o[h]={c:"<td class='c"+("buy"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(s.c[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(s.c[h].b)+"</a>")+"</td><td class='c"+("p"!=n.opType?" r m":"")+"'>"+("N"!=r?"<a href='#'>"+l(r)+"</a>":"-")+"</td><td class='c"+("sell"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(s.c[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(s.c[h].a)+"</a>")+"</td>",p:""};for(h in s.p)null==o[h]&&(o[h]={p:""}),r=in_array(s.p[h].b,["N",0,"0.00"])&&in_array(s.p[h].b,["N",0,"0.00"])?in_array(s.p[h].l,["N",0,"0.00"])?"N":s.p[h].l:avgPrice([s.p[h].b,s.p[h].a]),o[h].p="<td class='p"+("buy"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(s.p[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(s.p[h].b)+"</a>")+"</td><td class='p"+("c"!=n.opType?" r m":"")+"'>"+("N"!=r?"<a href='#'>"+l(r)+"</a>":"-")+"</td><td class='p"+("sell"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(s.p[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(s.p[h].a)+"</a>")+"</td>",e+='<tr name="'+h+'" class="'+(parseFloat(h)<parseFloat(n.underlying_price)?"itm":"otm")+'">'+(o[h].c?o[h].c:"<td class='c'>-</td><td class='c'>-</td><td class='c'>-</td>")+"<td class='s'>"+h+"</td>"+(o[h].p?o[h].p:"<td class='p'>-</td><td class='p'>-</td><td class='p'>-</td>")+"</tr>";return e+="</tbody></table></div>"}function getBestPrice(t){return parseFloat(t.b)&&parseFloat(t.a)?(parseFloat(t.b)+parseFloat(t.a))/2:parseFloat(t.l)}function showOptions(t,e,i){if($(".options_set_active").removeClass("options_set_active").html("\n"),$(".options_date_link_active",$(e).parent()).removeClass("options_date_link_active"),$(e).addClass("options_date_link_active"),$(".options_set").hide(),null!==opCache[i.stock][t]){var a=$("#"+i.uEleId+"-curPrice").val(),s=$("#"+i.eleId+"-act").val(),n=$("#"+i.eleId+"-opType").val(),r={selectMonth:!0,tDate:t,tDateData:opCache[i.stock][t],sData:{eleId:i.eleId,opAct:s,opType:n,underlying_price:a}};$("."+t,$(e).parent().parent()).show().replaceWith(optionsSelectMonthCode(r))}else $("."+t,$(e).parent().parent()).show().html(loadingHtml);null!==opCache[i.stock][t]&&$("#"+i.eleId+"-option_selector .options_set[name='"+t+"'] td a").click((function(){return initOptionsSet(this,i)}))}function initOptionsSelector(t){var e=t.month?"[name='"+t.month+"']":"";$("#"+t.eleId+"-option_selector .options_date_link"+e).click((function(){return showOptions($(this).attr("name"),this,t),!1})),$("#"+t.eleId+"-option_selector .options_set"+e+" td a").click((function(){return initOptionsSet(this,t)})),$("#"+t.eleId+"-option_selector .options_date_link_unfilled").click((function(){var e=$(this).attr("name");getOptions({stock:t.stock,eleId:t.eleId,month:e,uEleId:t.uEleId}),$("#"+t.eleId+'-option_selector .options_set[name="'+e+'"]').html(loadingHtml)}))}function initOptionsSet(t,e){var i=$(t).text(),a=$(t).parent().parent().parent().parent().parent().attr("name"),s=$(t).parent().parent().attr("name"),n=$(t).parent().hasClass("c")?"c":$(t).parent().hasClass("p")?"p":null,r=getBestPrice(opCache[e.stock][a][n][s]);return null==n&&reportError("opType not Call (c) or Put (p)"),$("#"+e.eleId+"-opType").val(n),$("#"+e.eleId+"-price").val(i),$("#"+e.eleId+"-price").change(),$("#"+e.eleId+"-curPrice").val(r||i),$("#"+e.eleId+"-strike").val(s),$("#"+e.eleId+"-expiry").val(a),$("#"+e.eleId+"-opDesc").html(expDescFromYMD(a)+" $"+s+" "+("c"==n?"Call":"Put")),$("#"+e.eleId+"-option_selector").dialog("close"),triggerListener("option",{tab_num:curTab,ele_id:e.eleId}),!1}function getMonthsOptions_return(t,e){var i="",a=$("#"+t.uEleId+"-curPrice").val(),s=$("#"+t.eleId+"-opType").val(),n=$("#"+t.eleId+"-act").val();delete opCache[t.stock][t.month];var r,o=!0,l=[],h=[];for(var c in e.options)h.push(c);h.sort();for(var u=0;u<h.length;u++){var d=h[u];null!=e.options[d]&&"_"!==d.substr(0,1)&&(r=dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",d)?"&\\nb\\sp;Y":""),d),l.push("<a href='#' class='options_date_link"+(o?" options_date_link_active":"")+"' name=\""+d+'">'+r+"</a> "),i+=optionsSelectMonthCode({sData:{eleId:t.eleId,underlying_price:a,opType:s,opAct:n},selectMonth:o,tDate:d,tDateData:e.options[d]}),opCache[t.stock][d]=e.options[d],o=!1)}for(d in $("#"+t.eleId+'-option_selector a[name="'+t.month+'"]').replaceWith(l.join(" | ")),$("#"+t.eleId+'-option_selector .options_set[name="'+t.month+'"]').replaceWith(i),e.options)null!=e.options[d]&&"_"!==d.substr(0,1)&&initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,month:d,stock:t.stock})}function renderRiskGraph(t,e){setTimeout((function(){renderRiskGraph_1(t,e)}),20)}function renderRiskGraph_1(t,e){var i,a,s=["header_place_holder"],n=results[e].underlying_current_price,r=-1e5,o=1e5,l=["#ff8888","#ffcc00","#88ff88","#66ffff","#8888ff","#ff66ff","#996666","#999944","#669966","#449999","#666699","#994499"];tHeader=["Strike"],header=!1,dataLine=[],dataStr="",colors=[],tColor=0,tColor2=0,tTimeLen=!1,graphTimeScale=!1,timeIndex=[],dataIdx=index_assoc_array(t.data),graphPriceMin=!1;var h=t.initial.g<0;h&&(tHeader.push("(Stock comparison)"),colors.push("#18357F"));var c=!1;for(var u in dataIdx)if(dataIdx.hasOwnProperty(u)){if(a=dataIdx[u],!1===graphPriceMin&&(graphPriceMin=parseFloat(a)),dataLine=[parseFloat(a)],h&&dataLine.push(parseFloat(roundTo(getDisValByType(t,-t.initial.g+(parseFloat(a)-n)*(-t.initial.g/n)),2))),i=0,!1===header){var d={};for(var p in t.data[a])t.data[a].hasOwnProperty(p)&&(d[date("Y",parseInt(t.start_date,10)+86400*p)]=1);Object.keys&&(Object.keys(d)||[]).length>1&&(c=!0)}for(var p in t.data[a])if(t.data[a].hasOwnProperty(p)){if(!1===tTimeLen){for(var f in t.data[a])t.data[a].hasOwnProperty(f)&&(tTimeLen<parseInt(f,10)||!1===tTimeLen)&&(tTimeLen=parseInt(f,10));tTimeLen/t.time_scale>10?graphTimeScale=t.time_scale*Math.ceil(tTimeLen/(10*t.time_scale)):graphTimeScale=1}if((tTimeLen-p)%graphTimeScale==0){!1===header&&(tHeader.push(date("j M"+(c?" y":""),parseInt(t.start_date,10)+86400*p)),colors.push(0==i?"#cccccc":l[(i-1)%l.length]),timeIndex.push(p));var g=parseFloat(roundTo(getDisValByType(t,t.data[a][p].g),2));dataLine.push(g),g>r&&(r=g),g<o&&(o=g),i++}}s.push(dataLine),!1===header&&(header=tHeader)}for(header.push("Current"),colors.push("#666666"),s.push([parseFloat(n)]),s[s.length-1][header.length-1]=o-.1*(r-o),s.push([parseFloat(n)]),s[s.length-1][header.length-1]=r+.1*(r-o),s[0]=header,u=1;u<s.length-2;u++)s[u][s[u].length]=null;for(u=1;u<s[0].length-1;u++)s[s.length-1][u]=null,s[s.length-2][u]=null;var m={};m[i-1]={lineWidth:2},h&&(m[0]={lineDashStyle:[6,4]});var _={colors:colors,lineWidth:1,series:m,reverseCategories:!1,chartArea:{width:c?"69%":"75%",left:90,top:20,height:"85%"},vAxis:{viewWindow:{max:r+.1*(r-o),min:o-.1*(r-o)},title:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"Dollars":"Percent",format:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"$#,###.##":"#.##'%'",viewWindowMode:"maximized"},hAxis:{title:"Underlying price",format:"$#,###.##"}};if(array_includes(["price","riskGraphPrice","riskGraphRawValue"],t.graph_type)||(_.vAxis.minValue=-110),google&&google.visualization){var v=google.visualization.arrayToDataTable(s);for(u=0;u<timeIndex.length;u++)v.setColumnProperty(u+1,"time",timeIndex[u]);v.setColumnProperty(s[0].length-1,"current",!0),results[e].riskChartData=v,results[e].riskChart=new google.visualization.LineChart($("#t"+e+"_graph .google_chart_holder")[0]),google.visualization.events.addListener(results[e].riskChart,"select",(function(t){var i=results[e].riskChart.getSelection();if(i.length>0&&null!=i[0].row){var a=i[0];if(1==results[e].riskChartData.getColumnProperty(a.column,"current"))return!1;results[e].riskChartData[0];var s=results[e].riskChartData.getColumnLabel(a.column),n=results[e].riskChartData.getColumnProperty(a.column,"time"),r=roundTo(results[e].riskChartData.getValue(a.row,0),2,!0,!1);if($("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: $"+r+" on "+s),"mobile"==viewStyle){var o=$(window).width(),l=$(window).height();$("#t"+e+"_graph-detail").dialog("option",{width:o-5,height:l-5})}$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[r][n]))}})),results[e].riskChart.draw(v,_)}}function renderGraph(t,e){if(t.graph_type=checkForceGraphType(t.graph_type,t),"riskGraph"==t.graph_type.substr(0,9))var i='<div class="google_chart_holder" style="height:500px;"></div>\n      <script>\n      renderRiskGraph(results['+e+"], "+e+");\n      <\/script>";else{i='<table class="graph" cellpadding="1" cellspacing="0">';for(var a,s,n,r,o,l,h=0,c="",u="",d="",p=date("m",t.start_date),f=Object.keys(t.data).sort((function(t,e){var i=parseFloat(t),a=parseFloat(e);return i>a?-1:i<a?1:0})),g=0;g<f.length;g++){var m=f[g];0==h&&(s=[[t.start_date,0]],d="<tr><th>&nbsp;</th>");var _=null!=l&&l>t.underlying_current_price&&m<t.underlying_current_price?"curPriceAbove":roundTo(m,2)==roundTo(t.underlying_current_price,2)?"curPriceRow":"";n="<tr name='"+m+"'"+(""!=_?" class='"+_+"'":"")+"><th class='x'>"+m+"</th>";var v=Object.keys(t.data[m]),b=v[v.length-1];for(var y in t.data[m])0==h&&((o=date("m",r=parseInt(t.start_date,10)+86400*y))==p?s[s.length-1][1]++:(s.push([r,1]),p=o),y==b?(d+='<th class="t z'+((s.length-1)%2+1)+'" name="'+y+'">Exp</th>',d+='<th class="pct">+/-%</th>'):d+='<th class="t z'+((s.length-1)%2+1)+'" name="'+y+'">'+date("j",r)+"</th>"),c=colorByDis(u=fmtNumToFit(getDisValByType(t,t.data[m][y].g)),t.data[m][y].g,t),a="",(u.length?u:u.toString()).length>=4&&(a+=" four_digit"),(u.length?u:u.toString()).length>=5&&(a+=" five_digit"),n+="<td name='t"+y+"-x"+m+"' class='d"+a+" "+c+"'>"+u+"</td>",y==b&&(n+='<td class="pct">'+roundTo(100*(m-t.underlying_current_price)/t.underlying_current_price,2,!0)+"%</td>"),l=m;if(0==h){for(var w in i+="<tr><th>&nbsp;</th>",s)s[w][1]>0&&(i+="<th colspan='"+s[w][1]+"' align='center' class='z"+(w%2+1)+"'>"+date("M",s[w][0])+"</th>");i+="</tr>",i+=d+="</tr>"}i+=n+="</tr>",h++}i+="</table><p><strong style='color:#400;'>Click on a figure</strong> for a breakdown of the trade's exit.</p>"}return i+="<div class='inputWrapper inputselect'><label class='inputLabel' for='t"+e+"_graphChanger-type'>Change output type:</label><span class='input'><select name='graph-typeChange' id='t"+e+"_graph-typeChange' class='input' onchange='changeOutputType(this);' >\t<optgroup label='Table'>\t<option value='roiRisk'"+("roiRisk"==t.graph_type?" selected":"")+">% of maximum risk</option>\t<option value='roiInit'"+("roiInit"==t.graph_type?" selected":"")+">% of entry cost</option>\t<option value='price'"+("price"==t.graph_type?" selected":"")+">Profit/loss (dollar value)</option>\t<option value='rawValue'"+("rawValue"==t.graph_type?" selected":"")+">Option/spread value</option>\t</optgroup>\t<optgroup label='Graph'>\t<option value='riskGraph'"+("riskGraph"==t.graph_type?" selected":"")+">% of maximum risk</option>\t<option value='riskGraphInit'"+("riskGraphInit"==t.graph_type?" selected":"")+">% of entry cost</option>\t<option value='riskGraphPrice'"+("riskGraphPrice"==t.graph_type?" selected":"")+">Profit/loss (dollar value)</option>\t\x3c!-- option value='riskGraphRawValue'"+("riskGraphRawValue"==t.graph_type?" selected":"")+">Option/spread value</--option--\x3e\t</optgroup></select><a href='#' onclick='alert(\"Changes how the trade is represented in the table or graph... \\n\\n% of maximum risk.: Percentage of the maximum risk of the trade, where -100 is the maximum risk, and 100 is 100% return compared to the maximum risk. \\n\\n% of entry: Percentage of the entry cost of the trade, where -100 is no return from your initial investment, and 100 is 100% return compared to the entry cost.  Note: if opening the trade results in a credit, % of maximum risk is used instead.\\n\\nDollar value: Profit or loss in net dollar value.\\n\\nOption/Spread value: shows the value of the purchased option, or the spread, without multiplying x100 for each contract.\");return false;' class='help'>?</a>\n</div>"}function changeOutputType(t){var e=initType=$(t).val();_opcGaq.push(["_trackEvent","Change Output type",e]),ajaxRequest("","updatePreferredDisplayType",{type:e},(function(){})),e=checkForceGraphType(e,results[curTab]),results[curTab].graph_type=e,$("#t"+curTab+"_graph-type").val(e),renderResults(curTab)}function updatePreferredDisplayType(t){t.value&&ajaxRequest("","updatePreferredDisplayType",{type:t.value},(function(){}))}function checkForceGraphType(t,e){return"u"!==e.summary.maxrisk.g&&e.summary.maxrisk.g+e.initial.g<0?"roiRisk"==t||"roiInit"==t&&e.initial.g>=0?("roiInit"==t&&e.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="roiRisk"):("riskGraph"==t||"riskGraphInit"==t&&e.initial.g>=0)&&("riskGraphInit"==t&&e.initial.g>=0&&addMsg("Opening trade is a credit – Showing ROI on max risk"),t="riskGraph"):"u"===e.summary.maxrisk.g&&e.initial.g<0?("roiInit"!=t&&"roiRisk"!=t||("roiRisk"==t&&addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="roiInit"),addMsg("Max risk is unlimited – Showing ROI on initial cost"),t="riskGraphInit"):e.initial.g>=0&&(["riskGraph","riskGraphInit"].includes(t)?(t="riskGraphPrice",addMsg("Opening trade is a credit – Showing values as $P/L")):["roiRisk","roiInit"].includes(t)&&(t="price",addMsg("Opening trade is a credit – Showing values as $P/L"))),t}function getDisValByType(t,e){var i;return"rawValue"!=t.graph_type&&"riskGraphRawValue"!=t.graph_type||(i=e/100),"price"==t.graph_type||"riskGraphPrice"==t.graph_type?i=t.initial.g+e:"roiRisk"==t.graph_type||"riskGraph"==t.graph_type?i=100*(t.initial.g+e)/(-t.initial.g-t.summary.maxrisk.g):"roiInit"!=t.graph_type&&"riskGraphInit"!=t.graph_type||(i=100*(t.initial.g+e)/-t.initial.g),isNaN(i)?"N/A":i}function colorByDis(t,e,i){return"K"==(t+"").substr(t.length-1)&&(t=1e3*parseFloat(t.substr(0,t.length-1))),"price"==i.graph_type||"rawValue"==i.graph_type?"u"===i.summary.maxrisk.g?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.initial.g+i.summary.maxprofit.g)))):i.summary.maxrisk.g+i.initial.g>=0?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.summary.maxprofit.g+i.initial.g)))):e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(-i.initial.g-i.summary.maxrisk.g)))):"roiRisk"==i.graph_type?e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):"roiInit"==i.graph_type?0==e?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):void 0}function getSummary(t){var e,i=t.summary;for(var a in t.risk)e=a;if("object"==typeof i.maxrisk.time&&i.maxrisk.time instanceof Array)var s=" on days "+descNumList(i.maxrisk.time);else if(i.maxrisk.time==e)s=" at expiry";else if(void 0!==i.maxrisk.time)s=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxrisk.time*60*24,-5);else s="";if("object"==typeof i.maxprofit.time&&i.maxprofit.time instanceof Array)var n=" on days "+descNumList(i.maxprofit.time);else if(i.maxprofit.time==e)n=" at expiry";else if(void 0!==i.maxprofit.time)n=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxprofit.time*60*24,-5);else n="";var r=i.maxrisk.g>-t.initial.g,o="u"==i.maxrisk.g?"infinite on upside":("i"==i.maxrisk.p?formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+" on upside":"<span"+(r?' style="font-weight:bold;">+':">")+formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+"</span> at a price of "+formatPrice(i.maxrisk.p)+s)+(i.maxrisk.g+t.initial.g>=0?'<br/><span class="minor">(calculator found no risk.  This can be due to low or high implied volatility, or out of date prices)</span>':"");r=i.maxprofit.g<-t.initial.g;var l="u"==i.maxprofit.g?"infinite on upside":("i"==i.maxprofit.p?formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+" on upside":"<span"+(r?' style="color:#F00;">-':">")+formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+"</span> at a price of "+formatPrice(i.maxprofit.p)+n)+(i.maxprofit.g+t.initial.g<=0?'<br/><span class="minor">(calculator found no positive profit.  This can be due to low or high implied volatility, or out of date prices)</span>':""),h=!!(i.PoP||{}).pop,c=h?roundTo(100*(i.PoP||{}).pop,1)+"%":"";for(var a in t.breakeven);var u="$"+implode(", $",t.breakeven[a]),d='<span style="'+((r=t.initial.g<0)?"color:#900;":"font-weight:bold;")+'">'+formatPrice(Math.abs(t.initial.g))+"</span>"+(r?" (net debit)":" (net credit)");return"<h3>"+t.underlying_symb+" at $"+roundTo(t.underlying_current_price,2,!0)+" on "+date("jS M Y",t.start_date)+"</h3><p>Entry cost: "+d+" <a href='#' class='subtle initDetail' onclick='showInitDetails(this); return false;'>see details</a></p><p>Maximum risk: "+o+"</p><p>Maximum return: "+l+"</p><p>Breakevens at expiry: "+u+"</p>"+(h?"<p>Probability of profit: "+c+" <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>":"")}function showInitDetails(t){var e=$(t).parents(".stratContent").attr("id");if(e=e.substr(6,e.lastIndexOf("_")),$("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: Entry cost"),"mobile"==viewStyle)$(window).width(),$(window).height();$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(e,results[e].initial,!0))}function graph_listen(t,e,i){"underlying_symbol"==t&&($("#t"+i.tab_num+"_graph-date").val("(today)"),$("#t"+i.tab_num+"_graph-priceMin").val(""),$("#t"+i.tab_num+"_graph-priceMax").val(""))}function initResults(t){$("#t"+t+"_graph").prepend('<div class="popup" id="t'+t+'_graph-detail"></div>');var e=$(window).width(),i=$(window).height(),a={autoOpen:!1,position:["right","top"],dialogClass:"mobile"==viewStyle?null:"detailPopup",title:"Detail",maxHeight:300,height:300>i?i:300,width:450>e?e:450,draggable:!0};"mobile"==viewStyle&&(a.width=e,a.height=i,a.position=["left","top"]),$("#t"+t+"_graph-detail").dialog(a),$("th.t:last-child").hover((function(){$(this).addClass("hover"),$(this).append("<div class='hover'>At&nbsp;expiry</div>")}),(function(){$(this).removeClass("hover"),$(".hover",this).remove()})),$("#t"+t+"_graph table td.d").each((function(){$(this).html("<div><a href='#' class='subtle'>"+$(this).html()+"</a></div>");var e=$(this).attr("name"),i=e.substring(1,e.indexOf("-x")),a=e.substring(e.indexOf("-x")+2);$(this).hover((function(){var t,e,s,n;$(this).addClass("hover");var r=results[curTab].graph_type.toLowerCase();e=r.indexOf("rawvalue")>=0?"$"+roundTo(results[curTab].data[a][i].g/100,2,!0):"$"+roundTo(results[curTab].data[a][i].g+results[curTab].initial.g,2,!0),s="number"==typeof(n=getDisValByType($.extend({},results[curTab],{graph_type:r.indexOf("price")>=0||r.indexOf("rawvalue")>=0?"roiRisk":results[curTab].graph_type}),results[curTab].data[a][i].g))?roundTo(n,Math.abs(n)<100?Math.abs(n)<10?2:1:0)+"%":n,t=r.indexOf("price")>=0?e+("N/A"!==s?"<br/>("+s+")":""):r.indexOf("rawvalue")>=0?e+"<br/>("+s+")":s+"<br/>("+e+")",$("a",this).append("<div class='hover'>"+t+"</div>")}),(function(){$(this).removeClass("hover");var t=e.substring(1,e.indexOf("-x")),i=e.substring(e.indexOf("-x")+2);$("a",this).html(fmtNumToFit(getDisValByType(results[curTab],results[curTab].data[i][t].g)))})),$("div a",this).click((function(){var i=e.substring(1,e.indexOf("-x")),a=e.substring(e.indexOf("-x")+2),s=parseInt(results[t].start_date,10)+86400*parseInt(i,10);return $("#t"+t+"_graph-detail").html("").dialog("option","title","Detail: $"+roundTo(a,2,1)+" on "+date("jS M Y",s)),$("#t"+t+"_graph-detail").html("").dialog("open"),$("#t"+t+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[a][i])),!1}))}))}function getCellSummary(t,e,i){var a,s,n,r,o,l,h,c,u,d=[],p=0;if(null!=e.S)for(var f in e.S)h="buy"==(o=e.S[f]).a?-1:1,c=parseInt($("#strat_"+t+' [name="'+f+'-num"]').val()),l=null!=o.T?parseFloat(o.T):h*parseFloat(c)*u,u=null!=o.p?parseFloat(o.p):l/c,r=$("#strat_"+t+' [name="'+f+'-symbol"]').val(),p+=l,d.push([o.a,c,r+" stocks",roundTo(u,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.O)for(var f in e.O)h="buy"==(o=e.O[f]).a?-1:1,l=null!=o.T?parseFloat(o.T):h*parseFloat(o.n)*100*o.p,s=$("#strat_"+t+' [name="'+f+'-opType"]').val(),a=dateFromYMD("j<\\s\\up>S</\\s\\up> M"+(dateFromYMD("Y",n=$("#strat_"+t+' [name="'+f+'-expiry"]').val())==date("Y")?"":" Y"),n)+" $"+o.X+" "+("c"==s?"Call":"Put"),p+=l,d.push([o.a,o.n+"x100",a,roundTo(o.p,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.C)for(var f in e.C){l=(o=e.C[f]).T;var g="buy"===o.a?"Cash held":"Cash released";p+=l,d.push([g,"","",void 0,roundTo(l,2,!0,!1)])}var m='<table class="trade_summary" cellpadding="1" cellspacing="0"><tr><th>Trades to '+(i?"open":"close")+" position</th><th>No.</th><th>Price</th><th>Total</th></tr>";for(f=0;f<d.length;f++)m+="<tr><td align='left'>"+ucFirst(d[f][0])+" "+d[f][2]+"</td><td align='right'>"+d[f][1]+"</td><td align='right'>"+(d[f][3]?"$"+d[f][3]:"")+"</td><td align='right'>$"+d[f][4]+"</td></tr>";if(m+=d.length>1?"<tr class='subtotal'><td align='left'>Total"+(i?"":" (closing trade)")+"</td><td colspan='3' align='right'>$"+roundTo(p,2,!0,!1)+"</td></tr>":"",!0!==i){var _=results[t].initial.g+p;m+="<tr class='init'><td align='left'>Entry cost</td><td colspan='3' align='right'>$"+roundTo(results[t].initial.g,2,!0,!1)+"</td></tr><tr class='total'><td align='left'>Total</td><td colspan='3' align='right'>$"+roundTo(_,2,!0,!1)+"</td></tr>"}return m+"</table>"}function fmtNumToFit(t){return isNaN(t)?"N/A":(t>=100||t<=-10?t=roundTo(t):t>=10||t>-10&&t<0?t=roundTo(t,1):t<10&&(t=roundTo(t,2)),t<=-1e3&&t>-1e4&&(t="<span class='neg'>-</span>"+-t),Math.abs(t)>=1e4&&(t=roundTo(t/1e3,1)+"K"),t)}function getLinkBut(t){return $(".linkBox",$(t).parent()).slideDown()}function closeLinkBox(t){return $(t).parent().slideUp()}function closeCurrentTabs(){$("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide(),$("#invisible_shield").unbind("click",closeCurrentTabs)}function add_opSelector_dialog(t){var e=$(window).width(),i=$(window).height(),a={autoOpen:!1,modal:!0,title:"Choose an option",open:function(){$(".ui-widget-overlay").fadeTo(0,.5).hide().fadeIn()},position:["right-25","center"],height:i-50,width:600>e?e:600,show:{effect:"fade",duration:200},hide:{effect:"fade",duration:200},beforeClose:function(t,e){}};"mobile"==viewStyle&&(a.width=e,a.height=i,a.show=null,a.hide=null,a.modal=!0,a.position=["left","top"]),$("#"+t+"-option_selector").dialog(a)}function ele_option_listen(t,e,i){if("underlying_symbol"==t)$("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-marketPrice").val(""),$("#"+i.ele_id+"-lastPrice").val(""),$("#"+i.ele_id+"-strike").val(""),$("#"+i.ele_id+"-expiry").val(""),$("#"+i.ele_id+"-option_selector").html(loadingHtml),$("#"+i.ele_id+"-opDesc").text(""),$("#"+i.ele_id+"-iv").val("(auto)"),getOptions({eleId:i.ele_id,uEleId:e.ele_id});else if("underlying_num"==t){var a=Math.round(parseInt($("#"+e.ele_id+"-num").val())/100);isNaN(a)&&(a=""),$("#"+i.ele_id+"-num").val(a)}else if("option_num"==t){if(null!=i.linked_ele&&i.linked_ele==e.ele_name)(i.strict||$("#"+i.ele_id+"-num").val()==i.default_num)&&$("#"+i.ele_id+"-num").val($("#"+e.ele_id+"-num").val()*i.link_ratio)}else"option"==t&&($("#"+i.ele_id+"-iv").val("(auto)"),""==$("#"+i.ele_id+"-expiry").val()&&$("#"+i.ele_id+"-expiry").val($("#"+e.ele_id+"-expiry").val()));if("option_price"==t||"option_num"==t){var s=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();if($("#"+e.ele_id+"-cost").val(isNaN(s)?"":commaVal(roundTo(100*s,2,!0))),triggerListener("option_cost",e),null!=i.linked_ele&&i.linked_ele==e.ele_name){s=$("#"+i.ele_id+"-num").val()*$("#"+i.ele_id+"-price").val();$("#"+i.ele_id+"-cost").val(isNaN(s)?"":commaVal(roundTo(100*s,2,!0)))}}}function ele_spread_listen(t,e,i){var a=0,s=!1;for(var n in i.op_ele_ids)a+=$("#"+i.op_ele_ids[n]+"-price").val()*($("#"+i.op_ele_ids[n]+"-num").val()||1)*("sell"==$("#"+i.op_ele_ids[n]+"-act").val()?1:-1),!1===s?s=$("#"+i.op_ele_ids[n]+"-num").val():s!==$("#"+i.op_ele_ids[n]+"-num").val()&&(s=-1);$("[for="+i.ele_id+"-spread]").text(-1===s?"Trade cost:":"Spread price:");var r=-1===s?100*a:a;$("#"+i.ele_id+"-spread").html(roundTo(r,2,!0)+" (net "+(a>=0?"credit":"debit")+")"),$("#"+i.ele_id+"-spread").css("color",a>=0?"black":"red")}function getElementCode_stockAndUnderlying_js(t,e,i){"underlying_symbol"==t&&($("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-curPrice").val(""),getPrice({eleId:i.ele_id,button:i.ele_id+"-loading"}),triggerListener("underlying_price",e)),triggerListener("underlying",e,i)}function ele_stock_listen(t,e,i){if("underlying_price"==t||"underlying_num"==t){var a=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();$("#"+e.ele_id+"-cost").val(isNaN(a)?"":commaVal(roundTo(a,2,!0))),triggerListener("underlying_cost",e)}getElementCode_stockAndUnderlying_js(t,e,i)}function ele_underlying_listen(t,e,i){getElementCode_stockAndUnderlying_js(t,e,i)}function graph_price_range_listen(t,e,i){$("#t"+i.tab_num+"_graph-rangeAuto").val("0")}function finder_targetting_onchange(t){const e=t.value;$("[id^=tFe1_priceWrapper-]").hide();var i=$("#tFe1_priceWrapper-priceFrom"),a=$("#tFe1_priceWrapper-priceFrom .inputLabel"),s=$("#tFe1_priceWrapper-priceTo"),n=$("#tFe1_priceWrapper-priceTo .inputLabel");switch(e){case"range":return i.show(),s.show(),a.text("Price from:"),void n.text("Price to:");case"gt":return i.show(),void a.text("Higher than:");case"lt":return s.show(),void n.text("Lower than:");case"single":default:return i.show(),void a.text("Target price:")}}google&&google.load&&google.load("visualization","1",{packages:["corechart"]}),$(document).ready((function(){$(".touch #current_calc_header").click((function(){$("#tab_holder_tabs").hasClass("--show")?($("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide()):(setTimeout((function(){$("#invisible_shield").bind("click",closeCurrentTabs)}),10),$("#tab_holder_tabs").addClass("--show"),$("#invisible_shield").show())})),$("#strat_F").length&&$("#top_menu .id-optionFinder, #strat_F_button").click((function(){return $("#calcs_holder .jq_exclusive_target").hide(),$("#top_but-calculator").hide(),$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-optionFinder)").removeClass("--active"),$("#top_menu .dialog_tab.id-optionFinder").addClass("--active"),$("#tab_holder_tabs .dialog_tab").removeClass("dialog_tab_selected"),$("#strat_F_button").addClass("dialog_tab_selected"),setTimeout((function(){$("#strat_F").show()}),100),!1})),$(".id-calculator a").click((function(){$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-calculator)").removeClass("--active"),$("#top_menu .dialog_tab.id-calculator").addClass("--active")}))})),$(window).scroll((function(){if(void 0!==window.viewStyle&&"full"==viewStyle){var t=$(window).scrollTop(),e=$("#content_holder").offset().top;if(e<t){var i=$("#main").outerHeight(),a=$("#tab_holder").outerHeight(),s=t-e,n=i-a;if(s<n){$("#tab_holder").css({position:"fixed",top:"0"});var r=isTransitionalTheme();$("#content_holder").css({"margin-left":r?"168px":"170px","min-height":a+"px"})}else{var o=Math.min(s,n);$("#tab_holder").css({position:"relative",top:o}),$("#content_holder").css({"margin-left":"0"})}}else $("#tab_holder").css({position:"relative",top:"0"}),$("#content_holder").css({"margin-left":"0"})}return!0})),
/*! jQuery UI - v1.10.0 - 2013-02-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect.js, jquery.ui.effect-fade.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function i(e,i){var s,n,r,o=e.nodeName.toLowerCase();return"area"===o?(n=(s=e.parentNode).name,!(!e.href||!n||"map"!==s.nodeName.toLowerCase())&&(!!(r=t("img[usemap=#"+n+"]")[0])&&a(r))):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o&&e.href||i)&&a(e)}function a(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}var s=0,n=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each((function(){var a=this;setTimeout((function(){t(a).focus(),i&&i.call(a)}),e)})):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var a,s,n=t(this[0]);n.length&&n[0]!==document;){if(("absolute"===(a=n.css("position"))||"relative"===a||"fixed"===a)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++s)}))},removeUniqueId:function(){return this.each((function(){n.test(this.id)&&t(this).removeAttr("id")}))}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,a){return!!t.data(e,a[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var a=t.attr(e,"tabindex"),s=isNaN(a);return(s||a>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],(function(i,a){function s(e,i,a,s){return t.each(n,(function(){i-=parseFloat(t.css(e,"padding"+this))||0,a&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)})),i}var n="Width"===a?["Left","Right"]:["Top","Bottom"],r=a.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+a]=function(i){return i===e?o["inner"+a].call(this):this.each((function(){t(this).css(r,s(this,i)+"px")}))},t.fn["outer"+a]=function(e,i){return"number"!=typeof e?o["outer"+a].call(this,e):this.each((function(){t(this).css(r,s(this,e,!0,i)+"px")}))}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(t){t.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,a){var s,n=t.ui[e].prototype;for(s in a)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([i,a[s]])},call:function(t,e,i){var a,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(a=0;a<s.length;a++)t.options[s[a][0]]&&s[a][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var a=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[a]>0||(e[a]=1,s=e[a]>0,e[a]=0,s)}}))}(jQuery),function(t,e){var i=0,a=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,a=0;null!=(i=e[a]);a++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(e,i,a){var s,n,r,o,l={},h=e.split(".")[0];e=e.split(".")[1],s=h+"-"+e,a||(a=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},n=t[h][e],r=t[h][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,n,{version:a.version,_proto:t.extend({},a),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(a,(function(e,a){t.isFunction(a)?l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,n=this._superApply;return this._super=t,this._superApply=s,e=a.apply(this,arguments),this._super=i,this._superApply=n,e}}():l[e]=a})),r.prototype=t.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix:e},l,{constructor:r,namespace:h,widgetName:e,widgetFullName:s}),n?(t.each(n._childConstructors,(function(e,i){var a=i.prototype;t.widget(a.namespace+"."+a.widgetName,r,i._proto)})),delete n._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r)},t.widget.extend=function(i){for(var s,n,r=a.call(arguments,1),o=0,l=r.length;o<l;o++)for(s in r[o])n=r[o][s],r[o].hasOwnProperty(s)&&n!==e&&(t.isPlainObject(n)?i[s]=t.isPlainObject(i[s])?t.widget.extend({},i[s],n):t.widget.extend({},n):i[s]=n);return i},t.widget.bridge=function(i,s){var n=s.prototype.widgetFullName||i;t.fn[i]=function(r){var o="string"==typeof r,l=a.call(arguments,1),h=this;return r=!o&&l.length?t.widget.extend.apply(null,[r].concat(l)):r,o?this.each((function(){var a,s=t.data(this,n);return s?t.isFunction(s[r])&&"_"!==r.charAt(0)?(a=s[r].apply(s,l))!==s&&a!==e?(h=a&&a.jquery?h.pushStack(a.get()):a,!1):void 0:t.error("no such method '"+r+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")})):this.each((function(){var e=t.data(this,n);e?e.option(r||{})._init():t.data(this,n,new s(r,this))})),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,a){a=t(a||this.defaultElement||this)[0],this.element=t(a),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),a!==this&&(t.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===a&&this.destroy()}}),this.document=t(a.style?a.ownerDocument:a.document||a),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,a){var s,n,r,o=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(o={},s=i.split("."),i=s.shift(),s.length){for(n=o[i]=t.widget.extend({},this.options[i]),r=0;r<s.length-1;r++)n[s[r]]=n[s[r]]||{},n=n[s[r]];if(i=s.pop(),a===e)return n[i]===e?null:n[i];n[i]=a}else{if(a===e)return this.options[i]===e?null:this.options[i];o[i]=a}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,a){var s,n=this;"boolean"!=typeof e&&(a=i,i=e,e=!1),a?(i=s=t(i),this.bindings=this.bindings.add(i)):(a=i,i=this.element,s=this.widget()),t.each(a,(function(a,r){function o(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?n[r]:r).apply(n,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||t.guid++);var l=a.match(/^(\w+)\s*(.*)$/),h=l[1]+n.eventNamespace,c=l[2];c?s.delegate(c,h,o):i.bind(h,o)}))},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,a){var s,n,r=this.options[e];if(a=a||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(s in n)s in i||(i[s]=n[s]);return this.element.trigger(i,a),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(a))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(a,s,n){"string"==typeof s&&(s={effect:s});var r,o=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=n,s.delay&&a.delay(s.delay),r&&t.effects&&t.effects.effect[o]?a[e](s):o!==e&&a[o]?a[o](s.duration,s.easing,n):a.queue((function(i){t(this)[e](),n&&n.call(a[0]),i()}))}}))}(jQuery),function(t,e){var i=!1;t(document).mouseup((function(){i=!1})),t.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var a=this,s=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){a.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return a._mouseMove(t)},this._mouseUpDelegate=function(t){return a._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(p.test(t[0])?e/100:1),parseInt(t[1],10)*(p.test(t[1])?i/100:1)]}function a(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var n,r=Math.max,o=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(undefined!==n)return n;var e,i,a=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=a.children()[0];return t("body").append(a),e=s.offsetWidth,a.css("overflow","scroll"),e===(i=s.offsetWidth)&&(i=a[0].clientWidth),a.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),a=e.isWindow?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,n="scroll"===a||"auto"===a&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),a=t.isWindow(i[0]);return{element:i,isWindow:a,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:a?i.width():i.outerWidth(),height:a?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var n,p,g,m,_,v,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return v=s(b),b[0].preventDefault&&(e.at="left top"),p=v.width,g=v.height,m=v.offset,_=t.extend({},m),t.each(["my","at"],(function(){var t,i,a=(e[this]||"").split(" ");1===a.length&&(a=h.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]),a[0]=h.test(a[0])?a[0]:"center",a[1]=c.test(a[1])?a[1]:"center",t=u.exec(a[0]),i=u.exec(a[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(a[0])[0],d.exec(a[1])[0]]})),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?_.left+=p:"center"===e.at[0]&&(_.left+=p/2),"bottom"===e.at[1]?_.top+=g:"center"===e.at[1]&&(_.top+=g/2),n=i(x.at,p,g),_.left+=n[0],_.top+=n[1],this.each((function(){var s,h,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=a(this,"marginLeft"),v=a(this,"marginTop"),D=u+f+a(this,"marginRight")+w.width,C=d+v+a(this,"marginBottom")+w.height,T=t.extend({},_),I=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?T.left-=u:"center"===e.my[0]&&(T.left-=u/2),"bottom"===e.my[1]?T.top-=d:"center"===e.my[1]&&(T.top-=d/2),T.left+=I[0],T.top+=I[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),s={marginLeft:f,marginTop:v},t.each(["left","top"],(function(i,a){t.ui.position[k[i]]&&t.ui.position[k[i]][a](T,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:s,collisionWidth:D,collisionHeight:C,offset:[n[0]+I[0],n[1]+I[1]],my:e.my,at:e.at,within:y,elem:c})})),e.using&&(h=function(t){var i=m.left-T.left,a=i+p-u,s=m.top-T.top,n=s+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:T.left,top:T.top,width:u,height:d},horizontal:a<0?"left":i>0?"right":"center",vertical:n<0?"top":s>0?"bottom":"middle"};p<u&&o(i+a)<p&&(l.horizontal="center"),g<d&&o(s+n)<g&&(l.vertical="middle"),r(o(i),o(a))>r(o(s),o(n))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),c.offset(t.extend(T,{using:h}))}))},t.ui.position={fit:{left:function(t,e){var i,a=e.within,s=a.isWindow?a.scrollLeft:a.offset.left,n=a.width,o=t.left-e.collisionPosition.marginLeft,l=s-o,h=o+e.collisionWidth-n-s;e.collisionWidth>n?l>0&&h<=0?(i=t.left+l+e.collisionWidth-n-s,t.left+=l-i):t.left=h>0&&l<=0?s:l>h?s+n-e.collisionWidth:s:l>0?t.left+=l:h>0?t.left-=h:t.left=r(t.left-o,t.left)},top:function(t,e){var i,a=e.within,s=a.isWindow?a.scrollTop:a.offset.top,n=e.within.height,o=t.top-e.collisionPosition.marginTop,l=s-o,h=o+e.collisionHeight-n-s;e.collisionHeight>n?l>0&&h<=0?(i=t.top+l+e.collisionHeight-n-s,t.top+=l-i):t.top=h>0&&l<=0?s:l>h?s+n-e.collisionHeight:s:l>0?t.top+=l:h>0?t.top-=h:t.top=r(t.top-o,t.top)}},flip:{left:function(t,e){var i,a,s=e.within,n=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-r-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];c<0?((i=t.left+d+p+f+e.collisionWidth-r-n)<0||i<o(c))&&(t.left+=d+p+f):u>0&&((a=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||o(a)<u)&&(t.left+=d+p+f)},top:function(t,e){var i,a,s=e.within,n=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-r-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];c<0?(a=t.top+d+p+f+e.collisionHeight-r-n,t.top+d+p+f>c&&(a<0||a<o(c))&&(t.top+=d+p+f)):u>0&&(i=t.top-e.collisionPosition.marginTop+d+p+f-l,t.top+d+p+f>u&&(i>0||o(i)<u)&&(t.top+=d+p+f))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,a,s,n,r=document.getElementsByTagName("body")[0],o=document.createElement("div");for(n in e=document.createElement(r?"div":"body"),a={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(a,{position:"absolute",left:"-1000px",top:"-1000px"}),a)e.style[n]=a[n];e.appendChild(o),(i=r||document.documentElement).insertBefore(e,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",s=t(o).offset().left,t.support.offsetFractions=s>10&&s<11,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each((function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")})),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var a=this._uiHash();if(!1===this._trigger("drag",e,a))return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i,a=this,s=!1,n=!1;for(t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(s=!0);return!(!s&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==a._trigger("stop",e)&&a._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").addBack().each((function(){this===e.target&&(i=!0)})),i},_createHelper:function(e){var i=this.options,a=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),a[0]!==this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute"),a},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,a,s=this.options;if("parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=["document"===s.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===s.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===s.containment?0:t(window).scrollLeft())+t("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===s.containment?0:t(window).scrollTop())+(t("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||s.containment.constructor===Array)s.containment.constructor===Array&&(this.containment=s.containment);else{if(!(a=(i=t(s.containment))[0]))return;e="hidden"!==t(a).css("overflow"),this.containment=[(parseInt(t(a).css("borderLeftWidth"),10)||0)+(parseInt(t(a).css("paddingLeft"),10)||0),(parseInt(t(a).css("borderTopWidth"),10)||0)+(parseInt(t(a).css("paddingTop"),10)||0),(e?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(t(a).css("borderLeftWidth"),10)||0)-(parseInt(t(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(t(a).css("borderTopWidth"),10)||0)-(parseInt(t(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var a="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop())*a,left:i.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())*a}},_generatePosition:function(e){var i,a,s,n,r=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(o[0].tagName),h=e.pageX,c=e.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),i=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,n=r.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,h=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:o.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:o.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,a){return a=a||this._uiHash(),t.ui.plugin.call(this,e,[i,a]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var a=t(this).data("ui-draggable"),s=a.options,n=t.extend({},i,{item:a.element});a.sortables=[],t(s.connectToSortable).each((function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(a.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,n))}))},stop:function(e,i){var a=t(this).data("ui-draggable"),s=t.extend({},i,{item:a.element});t.each(a.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))}))},drag:function(e,i){var a=t(this).data("ui-draggable"),s=this;t.each(a.sortables,(function(){var n=!1,r=this;this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,t.each(a.sortables,(function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(r.instance.element[0],this.instance.element[0])&&(n=!1),n}))),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",e),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",e),a.dropped=!1)}))}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var a=t(i.helper),s=t(this).data("ui-draggable").options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(e,i){var a=t(this).data("ui-draggable").options;a._opacity&&t(i.helper).css("opacity",a._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),a=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(a.axis&&"x"===a.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-i.overflowOffset.top<a.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-i.overflowOffset.left<a.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(e.pageY-t(document).scrollTop()<a.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(e.pageX-t(document).scrollLeft()<a.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed)))),!1!==s&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each((function(){var i=t(this),a=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:a.top,left:a.left})}))},drag:function(e,i){var a,s,n,r,o,l,h,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)l=(o=p.snapElements[u].left)+p.snapElements[u].width,c=(h=p.snapElements[u].top)+p.snapElements[u].height,o-g<m&&m<l+g&&h-g<v&&v<c+g||o-g<m&&m<l+g&&h-g<b&&b<c+g||o-g<_&&_<l+g&&h-g<v&&v<c+g||o-g<_&&_<l+g&&h-g<b&&b<c+g?("inner"!==f.snapMode&&(a=Math.abs(h-b)<=g,s=Math.abs(c-v)<=g,n=Math.abs(o-_)<=g,r=Math.abs(l-m)<=g,a&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=a||s||n||r,"outer"!==f.snapMode&&(a=Math.abs(h-v)<=g,s=Math.abs(c-b)<=g,n=Math.abs(o-m)<=g,r=Math.abs(l-_)<=g,a&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(a||s||n||r||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=a||s||n||r||d):(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=t(this).data("ui-draggable").options,a=t.makeArray(t(i.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));a.length&&(e=parseInt(a[0].style.zIndex,10)||0,t(a).each((function(t){this.style.zIndex=e+t})),this[0].style.zIndex=e+a.length)}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var a=t(i.helper),s=t(this).data("ui-draggable").options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(e,i){var a=t(this).data("ui-draggable").options;a._zIndex&&t(i.helper).css("zIndex",a._zIndex)}})}(jQuery),function(t,e){function i(t){return parseInt(t,10)||0}function a(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,a,s,n=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)a=t.trim(e[i]),(s=t("<div class='ui-resizable-handle "+("ui-resizable-"+a)+"'></div>")).css({zIndex:r.zIndex}),"se"===a&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(s);this._renderAxis=function(e){var i,a,s,n;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(a=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?a.outerHeight():a.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,n),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){n.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=s&&s[1]?s[1]:"se")})),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter((function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),n._handles.show())})).mouseleave((function(){r.disabled||n.resizing||(t(this).addClass("ui-resizable-autohide"),n._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,a,s=!1;for(i in this.handles)((a=t(this.handles[i])[0])===e.target||t.contains(a,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var a,s,n,r=this.options,o=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy(),a=i(this.helper.css("left")),s=i(this.helper.css("top")),r.containment&&(a+=t(r.containment).scrollLeft()||0,s+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:a,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,a=this.helper,s={},n=this.originalMousePosition,r=this.axis,o=this.position.top,l=this.position.left,h=this.size.width,c=this.size.height,u=e.pageX-n.left||0,d=e.pageY-n.top||0,p=this._change[r];return!!p&&(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==o&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==h&&(s.width=this.size.width+"px"),this.size.height!==c&&(s.height=this.size.height+"px"),a.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,a,s,n,r,o,l,h=this.options,c=this;return this._helper&&(s=(a=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,n=a?0:c.sizeDiff.width,r={width:c.helper.width()-n,height:c.helper.height()-s},o=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(r,{top:l,left:o})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,s,n,r,o=this.options;r={minWidth:a(o.minWidth)?o.minWidth:0,maxWidth:a(o.maxWidth)?o.maxWidth:1/0,minHeight:a(o.minHeight)?o.minHeight:0,maxHeight:a(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,n=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),s>r.minHeight&&(r.minHeight=s),i<r.maxWidth&&(r.maxWidth=i),n<r.maxHeight&&(r.maxHeight=n)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),a(t.left)&&(this.position.left=t.left),a(t.top)&&(this.position.top=t.top),a(t.height)&&(this.size.height=t.height),a(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return a(t.height)?t.width=t.height*this.aspectRatio:a(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=a(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=a(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=a(t.width)&&e.minWidth&&e.minWidth>t.width,o=a(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),o&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),r&&c&&(t.left=l-e.minWidth),s&&c&&(t.left=l-e.maxWidth),o&&u&&(t.top=h-e.minHeight),n&&u&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?!t.width&&!t.height&&!t.top&&t.left&&(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,a,s,n=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],a=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(a[e],10)||0);s.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var a=this.originalSize;return{top:this.originalPosition.top+i,height:a.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,a){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,a]))},sw:function(e,i,a){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,a]))},ne:function(e,i,a){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,a]))},nw:function(e,i,a){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,a]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),a=i.options,s=i._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),r=n&&t.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,o=n?0:i.sizeDiff.width,l={width:i.size.width-o,height:i.size.height-r},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:a.animateDuration,easing:a.animateEasing,step:function(){var a={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:a.width,height:a.height}),i._updateCache(a),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,a,s,n,r,o,l,h=t(this).data("ui-resizable"),c=h.options,u=h.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(h.containerElement=t(p),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(p),a=[],t(["Top","Right","Left","Bottom"]).each((function(t,s){a[t]=i(e.css("padding"+s))})),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-a[3],width:e.innerWidth()-a[1]},s=h.containerOffset,n=h.containerSize.height,r=h.containerSize.width,o=t.ui.hasScroll(p,"left")?p.scrollWidth:r,l=t.ui.hasScroll(p)?p.scrollHeight:n,h.parentData={element:p,left:s.left,top:s.top,width:o,height:l}))},resize:function(e){var i,a,s,n,r=t(this).data("ui-resizable"),o=r.options,l=r.containerOffset,h=r.position,c=r._aspectRatio||e.shiftKey,u={top:0,left:0},d=r.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-u.left),c&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=o.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper,r.offset.left-u.left+r.sizeDiff.width)),a=Math.abs((r._helper?r.offset.top-u.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),s&&n&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,c&&(r.size.height=r.size.width/r.aspectRatio)),a+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-a,c&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,a=e.containerOffset,s=e.containerPosition,n=e.containerElement,r=t(e.helper),o=r.offset(),l=r.outerWidth()-e.sizeDiff.width,h=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:o.left-s.left-a.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:o.left-s.left-a.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable").options,i=function(e){t(e).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})}))};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,(function(t){i(t)}))},resize:function(e,i){var a=t(this).data("ui-resizable"),s=a.options,n=a.originalSize,r=a.originalPosition,o={height:a.size.height-n.height||0,width:a.size.width-n.width||0,top:a.position.top-r.top||0,left:a.position.left-r.left||0},l=function(e,a){t(e).each((function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},r=a&&a.length?a:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,(function(t,e){var i=(s[e]||0)+(o[e]||0);i&&i>=0&&(n[e]=i||null)})),e.css(n)}))};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):t.each(s.alsoResize,(function(t,e){l(t,e)}))},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,a=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,a=e.size,s=e.originalSize,n=e.originalPosition,r=e.axis,o="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=o[0]||1,h=o[1]||1,c=Math.round((a.width-s.width)/l)*l,u=Math.round((a.height-s.height)/h)*h,d=s.width+c,p=s.height+u,f=i.maxWidth&&i.maxWidth<d,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>d,_=i.minHeight&&i.minHeight>p;i.grid=o,m&&(d+=l),_&&(p+=h),f&&(d-=l),g&&(p-=h),/^(se|s|e)$/.test(r)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(r)?(e.size.width=d,e.size.height=p,e.position.top=n.top-u):/^(sw)$/.test(r)?(e.size.width=d,e.size.height=p,e.position.left=n.left-c):(e.size.width=d,e.size.height=p,e.position.top=n.top-u,e.position.left=n.left-c)}})}(jQuery),function(t,e){var i,a,s,n,r="ui-button ui-widget ui-state-default ui-corner-all",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout((function(){e.button("refresh")}),1)},h=function(e){var i=e.name,a=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=a?t(a).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter((function(){return!this.form}))),s};t.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,o=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){o.disabled||this===i&&t(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){o.disabled||t(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(t){o.disabled&&(t.preventDefault(),t.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){e.buttonElement.addClass(d)})).bind("blur"+this.eventNamespace,(function(){e.buttonElement.removeClass(d)})),c&&(this.element.bind("change"+this.eventNamespace,(function(){n||e.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(t){o.disabled||(n=!1,a=t.pageX,s=t.pageY)})).bind("mouseup"+this.eventNamespace,(function(t){o.disabled||a===t.pageX&&s===t.pageY||(n=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(o.disabled||n)return!1})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(o.disabled||n)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];h(i).not(i).map((function(){return t(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(o.disabled)return!1;t(this).addClass("ui-state-active"),i=this,e.document.one("mouseup",(function(){i=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(o.disabled)return!1;t(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(e){if(o.disabled)return!1;(e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,(function(){t(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()}))),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" ui-state-hover ui-state-active  "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?h(this.element[0]).each((function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(o),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),a=this.options.icons,s=a.primary&&a.secondary,n=[];a.primary||a.secondary?(this.options.text&&n.push("ui-button-text-icon"+(s?"s":a.primary?"-primary":"-secondary")),a.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(n.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):n.push("ui-button-text-only"),e.addClass(n.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=a(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).delegate(i,"mouseover",(function(){t.datepicker._isDisabledDatepicker(n.inline?e.parent()[0]:n.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}))}function s(e,i){for(var a in t.extend(e,i),i)null==i[a]&&(e[a]=i[a]);return e}t.extend(t.ui,{datepicker:{version:"1.10.0"}});var n,r="datepicker",o=(new Date).getTime();t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var a,s,n;s="div"===(a=e.nodeName.toLowerCase())||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(n=this._newInst(t(e),s)).settings=t.extend({},i||{}),"input"===a?this._connectDatepicker(e,n):s&&this._inlineDatepicker(e,n)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var a=t(e);i.append=t([]),i.trigger=t([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var a,s,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(a=this._get(i,"showOn"))||"both"===a)&&e.focus(this._showDatepicker),"button"!==a&&"both"!==a||(s=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(n?t("<img/>").attr({src:n,alt:s,title:s}):s)),e[o?"before":"after"](i.trigger),i.trigger.click((function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,a,s,n=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,a=0,s=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,a=s);return a},n.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),t.input.attr("size",this._formatDate(t,n).length)}},_inlineDatepicker:function(e,i){var a=t(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,a,n,o){var l,h,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],r,p)),s(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(e){var i,a=t(e),s=t.data(e,r);a.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,a,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,n.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((a=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,a,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,n.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((a=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,n){var r,o,l,h,c=this._getInst(i);if(2===arguments.length&&"string"==typeof a)return"defaults"===a?t.extend({},t.datepicker._defaults):c?"all"===a?t.extend({},c.settings):this._get(c,a):null;r=a||{},"string"==typeof a&&((r={})[a]=n),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),h=this._getMinMaxDate(c,"max"),s(c.settings,r),null!==l&&r.dateFormat!==e&&r.minDate===e&&(c.settings.minDate=this._formatDate(c,l)),null!==h&&r.dateFormat!==e&&r.maxDate===e&&(c.settings.maxDate=this._formatDate(c,h)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,a,s,n=t.datepicker._getInst(e.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",n.dpDiv))[0]&&t.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,s[0]),(i=t.datepicker._get(n,"onSelect"))?(a=t.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[a,n])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,a,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),a=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||a<" "||!i||i.indexOf(a)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,a,n,r,o,l,h;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e)||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(n=(a=t.datepicker._get(i,"beforeShow"))?a.apply(e,[e,i]):{})&&(s(i.settings,n),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each((function(){return!(r|="fixed"===t(this).css("position"))})),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),h):i.dpDiv[l||"show"](l?h:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),t.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,n=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(e),s=a[1];e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!==document.activeElement&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null}),0))},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(e,i,a){var s=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(a?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(a?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-r:0,i.left-=a&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=a&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+n>h&&h>n?Math.abs(n+o):0),i},_findPos:function(e){for(var i,a=this._getInst(e),s=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,a,s,n,o=this._curInst;!o||e&&o!==t.data(e,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,(n=this._get(o,"onClose"))&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),a=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==a)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,a){var s=t(e),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,i+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(e){var i,a=t(e),s=this._getInst(a[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(a)},_selectMonthYear:function(e,i,a){var s=t(e),n=this._getInst(s[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(e,i,a,s){var n,r=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((n=this._getInst(r[0])).selectedDay=n.currentDay=t("a",s).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=a,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var a,s=t(e),n=this._getInst(s[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),(a=this._get(n,"onSelect"))?a.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,a,s,n=this._get(e,"altField");n&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),s=this.formatDate(i,a,this._getFormatConfig(e)),t(n).each((function(){t(this).val(s)})))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,a){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var s,n,r,o,l=0,h=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,d=(a?a.dayNames:null)||this._defaults.dayNames,p=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,f=(a?a.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},w=function(t){var e=y(t),a=new RegExp("^\\d{1,"+("@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2)+"}"),s=i.substring(l).match(a);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},k=function(e,a,s){var n=-1,r=t.map(y(e)?s:a,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(r,(function(t,e){var a=e[1];if(i.substr(l,a.length).toLowerCase()===a.toLowerCase())return n=e[0],l+=a.length,!1})),-1!==n)return n+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<e.length;s++)if(b)"'"!==e.charAt(s)||y("'")?x():b=!1;else switch(e.charAt(s)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":g=(o=new Date(w("@"))).getFullYear(),m=o.getMonth()+1,_=o.getDate();break;case"!":g=(o=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=o.getMonth()+1,_=o.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=c?0:-100)),v>-1)for(m=1,_=v;;){if(_<=(n=this._getDaysInMonth(g,m-1)))break;m++,_-=n}if((o=this._daylightSavingAdjust(new Date(g,m-1,_))).getFullYear()!==g||o.getMonth()+1!==m||o.getDate()!==_)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var a,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=a+1<t.length&&t.charAt(a+1)===e;return i&&a++,i},h=function(t,e,i){var a=""+e;if(l(t))for(;a.length<i;)a="0"+a;return a},c=function(t,e,i,a){return l(t)?a[e]:i[e]},u="",d=!1;if(e)for(a=0;a<t.length;a++)if(d)"'"!==t.charAt(a)||l("'")?u+=t.charAt(a):d=!1;else switch(t.charAt(a)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),s,n);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),r,o);break;case"y":u+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(a)}return u},_possibleChars:function(t){var e,i="",a=!1,s=function(i){var a=e+1<t.length&&t.charAt(e+1)===i;return a&&e++,a};for(e=0;e<t.length;e++)if(a)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):a=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":a=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),n=s,r=this._getFormatConfig(t);try{n=this.parseDate(i,a,r)||s}catch(t){a=e?"":a}t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),t.currentDay=a?n.getDate():0,t.currentMonth=a?n.getMonth():0,t.currentYear=a?n.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,a){var s=null==i||""===i?a:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var a=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=a.getFullYear(),n=a.getMonth(),r=a.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=o.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":n+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(s,n));break;case"y":case"Y":s+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(s,n))}l=o.exec(i)}return new Date(s,n,r)}(i):"number"==typeof i?isNaN(i)?a:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(s=s&&"Invalid Date"===s.toString()?a:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var a=!e,s=t.selectedMonth,n=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),(s!==t.selectedMonth||n!==t.selectedYear)&&!i&&this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(a?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){window["DP_jQuery_"+o].datepicker._adjustDate(a,-i,"M")},next:function(){window["DP_jQuery_"+o].datepicker._adjustDate(a,+i,"M")},hide:function(){window["DP_jQuery_"+o].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+o].datepicker._gotoToday(a)},selectDay:function(){return window["DP_jQuery_"+o].datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(a,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,a,s,n,r,o,l,h,c,u,d,p,f,g,m,_,v,b,y,w,k,x,D,C,T,I,$,M,S,P,O,z,E,N,F,R,A,H,j=new Date,W=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Y=this._get(t,"isRTL"),L=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),B=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),K=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),V=1!==U[0]||1!==U[1],Q=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-K,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-U[0]*U[1]+1,X.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-G,1)),this._getFormatConfig(t)):i,a=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=B?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Z+G,1)),this._getFormatConfig(t)):s,n=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+s+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+s+"</span></a>",r=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?Q:W,r=B?this.formatDate(r,o,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=L?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?l:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;k<U[0];k++){for(x="",this.maxRows=4,D=0;D<U[1];D++){if(C=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",I="",V){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(Y?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?Y?n:a:"")+(/all|right/.test(T)&&0===k?Y?a:n:"")+this._generateMonthYearHeader(t,Z,tt,J,X,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",$=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)$+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[M=(w+c)%7]+"'>"+p[M]+"</span></th>";for(I+=$+"</tr></thead><tbody>",S=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),P=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,O=Math.ceil((P+S)/7),z=V&&this.maxRows>O?this.maxRows:O,this.maxRows=z,E=this._daylightSavingAdjust(new Date(tt,Z,1-P)),N=0;N<z;N++){for(I+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;w<7;w++)R=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],H=(A=E.getMonth()!==Z)&&!v||!R[0]||J&&E<J||X&&E>X,F+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!_?"":" "+R[1]+(E.getTime()===Q.getTime()?" "+this._currentClass:"")+(E.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(A&&!_||!R[2]?"":" title='"+R[2]+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(A&&!_?"&#xa0;":H?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===W.getTime()?" ui-state-highlight":"")+(E.getTime()===Q.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);I+=F+"</tr>"}++Z>11&&(Z=0,tt++),x+=I+="</tbody></table>"+(V?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=x}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,a,s,n,r,o){var l,h,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(n||!m)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=a&&a.getFullYear()===i,h=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=a.getMonth())&&(!h||c<=s.getMonth())&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");y+="</select>"}if(v||(b+=y+(!n&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",n||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e})(u[0]),g=Math.max(f,p(u[1]||"")),f=a?Math.max(f,a.getFullYear()):f,g=s?Math.min(g,s.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!n&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var a=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),n=Math.min(t.selectedDay,this._getDaysInMonth(a,s))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(a,s,n)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),s=i&&e<i?i:e;return a&&s>a?a:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,a){var s=this._getNumberOfMonths(t),n=this._daylightSavingAdjust(new Date(i,a+(e<0?e:s[0]*s[1]),1));return e<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(t,n)},_isInRange:function(t,e){var i,a,s=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),r=null,o=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10)+a,o=parseInt(i[1],10)+a),(!s||e.getTime()>=s.getTime())&&(!n||e.getTime()<=n.getTime())&&(!r||e.getFullYear()>=r)&&(!o||e.getFullYear()<=o)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,a){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(a,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.0",window["DP_jQuery_"+o]=t}(jQuery),function(t,e){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){this._isOpen?this._moveToTop()&&this._focusTabbable():(this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement;this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),a=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?(e.target===a[0]||e.target===this.uiDialog[0])&&e.shiftKey&&(s.focus(1),e.preventDefault()):(a.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,(function(i,a){var s,n;a=t.isFunction(a)?{click:a,text:i}:a,a=t.extend({type:"button"},a),s=a.click,a.click=function(){s.apply(e.element[0],arguments)},n={icons:a.icons,text:a.showText},delete a.icons,delete a.showText,t("<button></button>",a).button(n).appendTo(e.uiButtonSet)})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,s){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",a,e(s))},drag:function(t,a){i._trigger("drag",t,e(a))},stop:function(s,n){a.position=[n.position.left-i.document.scrollLeft(),n.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",s,e(n))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,a=this.options,s=a.resizable,n=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:r,start:function(a,s){t(this).addClass("ui-dialog-resizing"),i._trigger("resizeStart",a,e(s))},resize:function(t,a){i._trigger("resize",t,e(a))},stop:function(s,n){a.height=t(this).height(),a.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._trigger("resizeStop",s,e(n))}}).css("position",n)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var s=this,n=!1,r={};t.each(e,(function(t,e){s._setOption(t,e),t in i&&(n=!0),t in a&&(r[t]=e)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var i,a,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((a=s.is(":data(ui-resizable)"))&&!e&&s.resizable("destroy"),a&&"string"==typeof e&&s.resizable("option","handles",e),!a&&!1!==e&&this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),a.minWidth>a.width&&(a.width=a.minWidth),t=this.uiDialog.css({height:"auto",width:a.width}).outerHeight(),e=Math.max(0,a.minHeight-t),i="number"==typeof a.maxHeight?Math.max(0,a.maxHeight-t):"none","auto"===a.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,a.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&(t.ui.dialog.overlayInstances||this._delay((function(){t.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(e){t(e.target).closest(".ui-dialog").length||(e.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})})),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),t.ui.dialog.overlayInstances=0,!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,a=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(a=i.split?i.split(" "):[i[0],i[1]]).length&&(a[1]=a[0]),t.each(["left","top"],(function(t,e){+a[t]===a[t]&&(s[t]=a[t],a[t]=e)})),i={my:a[0]+(s[0]<0?s[0]:"+"+s[0])+" "+a[1]+(s[1]<0?s[1]:"+"+s[1]),at:a.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),jQuery.effects||function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var a=c[e.type]||{};return null==t?i||!e.def?null:e.def:(t=a.floor?~~t:parseFloat(t),isNaN(t)?e.def:a.mod?(t+a.mod)%a.mod:0>t?0:a.max<t?a.max:t)}function a(e){var i=l(),a=i._rgba=[];return e=e.toLowerCase(),p(o,(function(t,s){var n,r=s.re.exec(e),o=r&&s.parse(r),l=s.space||"rgba";if(o)return n=i[l](o),i[h[l].cache]=n[h[l].cache],a=i._rgba=n._rgba,!1})),a.length?("0,0,0,0"===a.join()&&t.extend(a,n.transparent),i):n[e]}function s(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var n,r=/^([\-+])=\s*(\d+\.?\d*)/,o=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,a,s){return new t.Color.fn.parse(e,i,a,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},d=t("<p>")[0],p=t.each;d.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=d.style.backgroundColor.indexOf("rgba")>-1,p(h,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),l.fn=t.extend(l.prototype,{parse:function(s,r,o,c){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(r),r=e);var u=this,d=t.type(s),f=this._rgba=[];return r!==e&&(s=[s,r,o,c],d="array"),"string"===d?this.parse(a(s)||n._default):"array"===d?(p(h.rgba.props,(function(t,e){f[e.idx]=i(s[e.idx],e)})),this):"object"===d?(p(h,s instanceof l?function(t,e){s[e.cache]&&(u[e.cache]=s[e.cache].slice())}:function(e,a){var n=a.cache;p(a.props,(function(t,e){if(!u[n]&&a.to){if("alpha"===t||null==s[t])return;u[n]=a.to(u._rgba)}u[n][e.idx]=i(s[t],e,!0)})),u[n]&&t.inArray(null,u[n].slice(0,3))<0&&(u[n][3]=1,a.from&&(u._rgba=a.from(u[n])))}),this):void 0},is:function(t){var e=l(t),i=!0,a=this;return p(h,(function(t,s){var n,r=e[s.cache];return r&&(n=a[s.cache]||s.to&&s.to(a._rgba)||[],p(s.props,(function(t,e){if(null!=r[e.idx])return i=r[e.idx]===n[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return p(h,(function(i,a){e[a.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var a=l(t),s=a._space(),n=h[s],r=0===this.alpha()?l("transparent"):this,o=r[n.cache]||n.to(r._rgba),u=o.slice();return a=a[n.cache],p(n.props,(function(t,s){var n=s.idx,r=o[n],l=a[n],h=c[s.type]||{};null!==l&&(null===r?u[n]=l:(h.mod&&(l-r>h.mod/2?r+=h.mod:r-l>h.mod/2&&(r-=h.mod)),u[n]=i((l-r)*e+r,s)))})),this[s](u)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),a=i.pop(),s=l(e)._rgba;return l(t.map(i,(function(t,e){return(1-a)*s[e]+a*t})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(t,e){return null==t?e>2?1:0:t}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),a=i.pop();return e&&i.push(~~(255*a)),"#"+t.map(i,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,a=t[0]/255,s=t[1]/255,n=t[2]/255,r=t[3],o=Math.max(a,s,n),l=Math.min(a,s,n),h=o-l,c=o+l,u=.5*c;return e=l===o?0:a===o?60*(s-n)/h+360:s===o?60*(n-a)/h+120:60*(a-s)/h+240,i=0===h?0:u<=.5?h/c:h/(2-c),[Math.round(e)%360,i,u,null==r?1:r]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],a=t[2],n=t[3],r=a<=.5?a*(1+i):a+i-a*i,o=2*a-r;return[Math.round(255*s(o,r,e+1/3)),Math.round(255*s(o,r,e)),Math.round(255*s(o,r,e-1/3)),n]},p(h,(function(a,s){var n=s.props,o=s.cache,h=s.to,c=s.from;l.fn[a]=function(a){if(h&&!this[o]&&(this[o]=h(this._rgba)),a===e)return this[o].slice();var s,r=t.type(a),u="array"===r||"object"===r?a:arguments,d=this[o].slice();return p(n,(function(t,e){var a=u["object"===r?t:e.idx];null==a&&(a=d[e.idx]),d[e.idx]=i(a,e)})),c?((s=l(c(d)))[o]=d,s):l(d)},p(n,(function(e,i){l.fn[e]||(l.fn[e]=function(s){var n,o=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":a,h=this[l](),c=h[i.idx];return"undefined"===o?c:("function"===o&&(s=s.call(this,c),o=t.type(s)),null==s&&i.empty?this:("string"===o&&((n=r.exec(s))&&(s=c+parseFloat(n[2])*("+"===n[1]?1:-1))),h[i.idx]=s,this[l](h)))})}))})),l.hook=function(e){var i=e.split(" ");p(i,(function(e,i){t.cssHooks[i]={set:function(e,s){var n,r,o="";if("transparent"!==s&&("string"!==t.type(s)||(n=a(s)))){if(s=l(n||s),!u.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===o||"transparent"===o)&&r&&r.style;)try{o=t.css(r,"backgroundColor"),r=r.parentNode}catch(t){}s=s.blend(o&&"transparent"!==o?o:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}))},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],(function(i,a){e["border"+a+"Color"]=t})),e}},n=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,a,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(a=s.length;a--;)"string"==typeof s[i=s[a]]&&(n[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(n[i]=s[i]);return n}function a(e,i){var a,s,r={};for(a in i)s=i[a],e[a]!==s&&!n[a]&&(t.fx.step[a]||!isNaN(parseFloat(s)))&&(r[a]=s);return r}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,n,r,o){var l=t.speed(n,r,o);return this.queue((function(){var n,r=t(this),o=r.attr("class")||"",h=l.children?r.find("*").addBack():r;h=h.map((function(){return{el:t(this),start:i(this)}})),(n=function(){t.each(s,(function(t,i){e[i]&&r[i+"Class"](e[i])}))})(),h=h.map((function(){return this.end=i(this.el[0]),this.diff=a(this.start,this.end),this})),r.attr("class",o),h=h.map((function(){var e=this,i=t.Deferred(),a=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,a),i.promise()})),t.when.apply(t,h.get()).done((function(){n(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),l.complete.call(r[0])}))}))},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,a,s){return i?t.effects.animateClass.call(this,{add:e},i,a,s):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,a,s){return i?t.effects.animateClass.call(this,{remove:e},i,a,s):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,a,s,n,r){return"boolean"==typeof a||a===e?s?t.effects.animateClass.call(this,a?{add:i}:{remove:i},s,n,r):this._toggleClass(i,a):t.effects.animateClass.call(this,{toggle:i},a,s,n)},switchClass:function(e,i,a,s,n){return t.effects.animateClass.call(this,{add:i,remove:e},a,s,n)}})}(),function(){function a(e,i,a,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,a=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=a,a=i,i={}),t.isFunction(a)&&(s=a,a=null),i&&t.extend(e,i),a=a||i.duration,e.duration=t.fx.off?0:"number"==typeof a?a:a in t.fx.speeds?t.fx.speeds[a]:t.fx.speeds._default,e.complete=s||i.complete,e}function s(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]}t.extend(t.effects,{version:"1.10.0",save:function(t,e){for(var a=0;a<e.length;a++)null!==e[a]&&t.data(i+e[a],t[0].style[e[a]])},restore:function(t,a){var s,n;for(n=0;n<a.length;n++)null!==a[n]&&((s=t.data(i+a[n]))===e&&(s=""),t.css(a[n],s))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,a;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=t[1]/e.width}return{x:a,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},a=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},n=document.activeElement;try{n.id}catch(t){n=document.body}return e.wrap(a),(e[0]===n||t.contains(e[0],n))&&t(n).focus(),a=e.parent(),"static"===e.css("position")?(a.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,a){i[a]=e.css(a),isNaN(parseInt(i[a],10))&&(i[a]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),a.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,a,s){return s=s||{},t.each(i,(function(t,i){var n=e.cssUnit(i);n[0]>0&&(s[i]=n[0]*a+n[1])})),s}}),t.fn.extend({effect:function(){function e(e){function a(){t.isFunction(n)&&n.call(s[0]),t.isFunction(e)&&e()}var s=t(this),n=i.complete,o=i.mode;(s.is(":hidden")?"hide"===o:"show"===o)?a():r.call(s[0],i,a)}var i=a.apply(this,arguments),s=i.mode,n=i.queue,r=t.effects.effect[i.effect];return t.fx.off||!r?s?this[s](i.duration,i.complete):this.each((function(){i.complete&&i.complete.call(this)})):!1===n?this.each(e):this.queue(n||"fx",e)},_show:t.fn.show,show:function(t){if(s(t))return this._show.apply(this,arguments);var e=a.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(s(t))return this._hide.apply(this,arguments);var e=a.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(s(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=a.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),a=[];return t.each(["em","px","%","pt"],(function(t,e){i.indexOf(e)>0&&(a=[parseFloat(i),e])})),a}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,i){e[i]=function(e){return Math.pow(e,t+2)}})),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}}))}()}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var a=t(this),s=t.effects.setMode(a,e.mode||"toggle");a.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),$.ui.dialog.prototype._oldinit=$.ui.dialog.prototype._init,$.ui.dialog.prototype._init=function(){$(this.element).parent().css("position","fixed"),$(this.element).dialog("option",{resizeStop:function(t,e){var i=[Math.floor(e.position.left)-$(window).scrollLeft(),Math.floor(e.position.top)-$(window).scrollTop()];return $(t.target).parent().css("position","fixed"),$(t.target).dialog("option","position",i),!0}}),this._oldinit()};var OP_FINDER_ENDPOINT=V3_API_PATH+"/finder";function finder_getWriteVal(){var t=document.querySelector('input[name="tF_write"]:checked');return t&&"1"===t.value?1:0}function finder_find(){const t=$("#tF_submit");$(".finder_results").text("");var e=$("#tFe0-symbol").val(),i=$("#tFe0-curPrice").val(),a=$("#finder_priceDirection").val(),s=$("#tFe1_input_price-from").val(),n=$("#tFe1_input_price-to").val(),r=$("#tFe0-ivHist").val();"lt"===a&&(n=s,s="");var o=$("[name=finder_dateStyle]:checked").val(),l=$("#tFe1_input_date-date").val(),h=$("#tFe1_input_expiry-expiry").val(),c=$("#tFe1_input_cost-cost").val(),u={"option-purchase":"checked"===$("#finder-strat-option-purchase").attr("checked")||0===$("#finder-strat-option-purchase").length,"short-option":"checked"===$("#finder-strat-short-option").attr("checked"),"credit-spread":"checked"===$("#finder-strat-credit-spread").attr("checked"),"debit-spread":"checked"===$("#finder-strat-debit-spread").attr("checked")},d=finder_getWriteVal(),p=[];if(renderError(""),e||p.push("Please enter a symbol"),i||p.push("Please enter the current price"),s||n||p.push("Please enter expected price"),"date"!==o||l||p.push("Please enter expected date"),"date"===o||h||p.push("Please enter expected date"),p.length>0)renderError(" - "+p.join("<br/> - "));else{var f={symbol:e,targetting:a,priceFrom:s,priceTo:n,date:"date"===o?l:h,specificExpiry:"expiry"===o?"1":"0",currentPrice:i,ivHist:r,budgetCost:d?"":c,dataFormat:"v2",strategies:u,sell:d};$.getJSON(OP_FINDER_ENDPOINT,f,(function(t){finder_find_return(t,{sell:d})})),t.attr("disabled","disabled"),t.val("Finding...")}}function renderError(t){var e=$("#tFe1_results");e.html(""),e.append('<p class="txt_error">'+t+"</p>")}function renderIn_single_option_ele(t,e){t.append("<h3>"+e.title+": "+ucFirst(e.legsById.option.act)+" "+e.legsById.option.num+"x "+expDescFromYMD(e.legsById.option.expiry)+" "+formatPrice(e.legsById.option.strike)+" "+ucFirst(e.legsById.option.opType)+" @ "+formatPrice(e.legsById.option.price)+"</h3>")}function renderIn_spread_ele(t,e){t.append("<h3>"+e.title+": "+e.legsById.long.num+"x "+expDescFromYMD(e.legsById.long.expiry)+" "+e.legsById.long.strike+"/"+e.legsById.short.strike+" "+ucFirst(e.legsById.long.opType)+" @ "+formatPrice(e.legsById.long.price-e.legsById.short.price)+"</h3>")}function renderIn_summary(t,e){const i=e.init>0?"(credit)":"(debit)";t.append("<p>Entry cost: "+formatPrice(Math.abs(e.init))+" "+i+"</p>"),t.append('<p>Maximum risk<sup style="font-size: xx-small;">1</sup>: '+(null===e.maxRisk?"Infinite":formatPrice(Math.max(0,-e.maxRisk)))+"</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append('<p>Est. return<sup style="font-size: xx-small;">1</sup> at target price: '+formatPrice(e.net)+" ("+(e.netMargin?roundTo(100*e.roiMargin,1):roundTo(100*e.roiMaxRisk,1))+"%"+(e.netMargin?'<sup style="font-size: xx-small;">2</sup>':"")+")</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append("<p>Probability of profit: "+(null===e.pop?"N/A":roundTo(Math.max(.99,100*e.pop),1)+"% <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>"))}var v2stratMap={"long-call":"long-call","long-put":"long-put","short-call":"short-call","short-put":"short-put","bearish-call-credit-spread":"credit-spread","bearish-put-debit-spread":"put-spread","bullish-call-debit-spread":"call-spread","bullish-put-credit-spread":"credit-spread"};function finder_add_and_open(t){finder_add_to_calcs(t,{thenShow:!0})}function finder_add_to_calcs(t,e){e||(e={thenShow:!1});var i=$("<span />",{class:"loading"}),a={show:e.thenShow,spanEle:i};i.text("Opening calculation..."),$("[data-outcome-id="+t+"] a.button").replaceWith(i);var s=((outcomes[t]||{}).vars||{}).strat||{},n={strat:v2stratMap[s.metadata.stratKey],"underlying-symbol":$("#tFe0-symbol").val(),"underlying-curPrice":$("#tFe0-curPrice").val(),"underlying-marketPrice":$("#tFe0-marketPrice").val(),"underlying-lastPrice":$("#tFe0-lastPrice").val(),"underlying-ivHist":$("#tFe0-ivHist").val(),"graph-rangeAuto":"1","graph-type":"roiRisk","graph-date":"(today)"};Object.keys(s.legsById).map((function(t){"option"===s.legsById[t].type&&(n[t+"-act"]=s.legsById[t].act,n[t+"-price"]=s.legsById[t].price,n[t+"-curPrice"]=s.legsById[t].curPrice,n[t+"-num"]=s.legsById[t].num,n[t+"-opType"]=s.legsById[t].opType[0],n[t+"-expiry"]=s.legsById[t].expiry,n[t+"-strike"]=s.legsById[t].strike,n[t+"-iv"]=s.legsById[t].iv)}));ajaxRequest("adding calculation","newTab",n,doFinder_newTab_return,{values:n,showCfg:a})}function doFinder_newTab_return(t,e){ajaxRequest("adding calculation","calculate",Object.assign(t.values,{tabId:e.tabId,stratKey:t.values.strat}),doFinder_calculation_return,{tabReturnData:e,showCfg:t.showCfg})}var tabsFromFinder=[],outcomes;function doFinder_calculation_return(t,e){t.showCfg.spanEle.text(" (added)"),t.showCfg.spanEle.removeClass("loading");var i=$("<a />",{class:"button button--outline smallButton"});i.text("Open calculation"),i.click((function(e){$("#strat_"+t.tabReturnData.tabId+"_button .jq_exclusive_switch_flash").click()})),t.showCfg.spanEle.prepend(i),tabsFromFinder[t.tabReturnData.tabId]=!0,newTab_return({},t.tabReturnData,t.showCfg),doCalculation_return({tab_num:t.tabReturnData.tabId},e)}function render_finder_results(t,e){var i=$("#tFe1_results");i.html(""),(outcomes=t||[]).length?(i.append('<h2 style="margin-bottom: 0.3em">Top 5 options</h2>'),i.append('<p style="margin-bottom: 1em" class="minor">Sorted by % ROI of max risk (or % ROI initial collateral, for naked options)</p>'),outcomes.map((function(t,e){var a=$("<div />",{class:"finder_result","data-outcome-id":e}),s=((t||{}).vars||{}).strat;s&&(["long-put","long-call","short-put","short-call"].indexOf(s.metadata.stratKey)>=0&&renderIn_single_option_ele(a,s),["bearish-call-credit-spread","bullish-put-credit-spread","bearish-put-debit-spread","bullish-call-debit-spread"].indexOf(s.metadata.stratKey)>=0&&renderIn_spread_ele(a,s),renderIn_summary(a,t),a.append('<p class="finder__add-class"><a href="#" class="button smallButton button--outline" onclick="finder_add_and_open('+e+'); return false;">View detailed estimates</a></p>'),a.appendTo(i))})),i.append('<p class="minor"><sup>1</sup>Subject to changes in Implied Volatility for options with time left til expiry.</p>')):i.append('<p class="txt_error">Could not find any profitable call or put options for that target price and date.</p>')}function finder_updateStratPref(t){setCookie("finder_strat_"+t.name,t.checked?"1":"0",{expiry_days:365}),t.name}function finder_changeTargetPrice(){var t=$("#tFe1_input_price-from").val(),e=$("#tFe0-curPrice").val(),i=$("#finder_priceDirection").val(),a=parseFloat(t)>parseFloat(e);if("eq"===i?$("#finder_priceDirection").addClass("selectPlaceholder"):$("#finder_priceDirection").removeClass("selectPlaceholder"),a&&"lt"===i||!a&&"gt"===i){var s=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),$("#finder-strat-short-option").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),setCookie("finder_strat_option-purchase",s,{expiry_days:365}),setCookie("finder_strat_short-option",n,{expiry_days:365})}else{s=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked","0"!==s&&"checked").attr("disabled",!1).parent().removeClass("disabled"),$("#finder-strat-short-option").attr("checked","1"===n&&"checked").attr("disabled",!1).parent().removeClass("disabled")}$("#finder_long_opType").text(a?"call":"put"),$("#finder_short_opType").text(a?"put":"call")}function finder_find_return(t,e){const i=$("#tF_submit");i.attr("disabled",!1),i.val("Find options");var a=((t||{}).data||{}).outcomes;a?render_finder_results(a,e):addMsg("Options Finder is currently experiencing some issues")}function finder_options_loaded(t,e,i){var a=Object.keys(opCache[e.symbol]).filter((function(t){return"_data_source"!==t})),s=$("#tFe1_input_expiry-expiry");s[0].innerHTML='<option value="" disabled selected>—Select—</option>',a.forEach((function(t){s.append('<option value="'+t+'">'+t+"</option>")}))}function finder_changeDateType(t){$("input[name='finder_dateStyle'][value="+t+"]").click(),"expiry"===t?$("#tFe1_input_date-date").val(""):"date"===t&&$("#tFe1_input_expiry-expiry").val(""),$("#tFe1_input_date-date, #tFe1_input_expiry-expiry").addClass("appearDisabled"),$("#tFe1_input_"+t+"-"+t).removeClass("appearDisabled")}function finder_getDateFromExpiry(){$("#tFe1_input_date-date").val(""),finder_changeDateType("expiry")}function finder_resetExpiryDate(){$("#tFe1_input_expiry-expiry").val("")}function finder_clear_form(){($("#tFe0-symbol").val()||"").toUpperCase();$("#tFe1_input_price-from").val(""),$("#tFe1_input_date-date").val(""),finder_resetExpiryDate()}function finder_updatePreference(){var t=1===finder_getWriteVal();$("#tFe1_input_cost-cost").attr("disabled",t),t?$("#tF_budgetGroup").slideUp(100):$("#tF_budgetGroup").slideDown(100),setCookie("finderShortPreferred",t,{})}
