function getLoadingHtml(t){return"<span class='loading-wrapper'><em class='loading'>"+t+"</em></span>"}var loadingHtml=getLoadingHtml("Loading"),results=[];function getPrice(t){var e=$("#"+t.eleId+"-symbol").val();if(""===e);else{t.button="string"==typeof t.button?"#"+t.button:t.button,$(t.button).addClass("loading").html("Loading");var i={button:t.button,uEleId:t.eleId,eleId:t.eleId,stock:e};if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i,!0);ajaxRequest("getting price: "+e,"getStockPrice",{stock:e},getPrice_return,{eleId:t.eleId,button:t.button,stock:e});getOptions(i)}}var underlying_symb=[];function getPrice_return(t,e){if($(t.button).removeClass("loading").html(""),e.status==REQ_ERROR)inputError(e.desc),4==e.data_status&&_opcGaq.push(["_trackEvent","Symbol not found",t.stock]);else if(e.status==REQ_OK){var i=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),i=e.symbol_correction.toUpperCase()),_opcGaq.push(["_trackEvent","Symbol search",(i||"").toLowerCase()]),underlying_symb[curTab]=i;var s=parseFloat(e.price.last)>0?e.price.last:(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2,a=e.price.bid>0&&e.price.ask>0?(parseFloat(e.price.bid)+parseFloat(e.price.ask))/2:e.price.last,n=parseFloat(e.price.ivHist)>0?parseFloat(e.price.ivHist):null;""===$("#"+t.eleId+"-price").val()&&$("#"+t.eleId+"-price").val(s),$("#"+t.eleId+"-curPrice").val(s),$("#"+t.eleId+"-lastPrice").val(s),$("#"+t.eleId+"-marketPrice").val(a),$("#"+t.eleId+"-ivHist").val(n),$("#"+t.eleId+"-curPrice").length>0&&$("#"+t.eleId+"-curPrice").get(0).onchange&&$("#"+t.eleId+"-curPrice").get(0).onchange()}}function isToStock(t){return t.indexOf(".to")===t.length-3&&t.length>=4}function getOptions(t){var e=$("#"+t.uEleId+"-symbol").val().trim(),i={stock:e,uEleId:t.uEleId,eleId:t.eleId};if(""===e);else{if(isToStock(e))return t.showSelect&&(i.showSelect=!0),void getV3priceData(e,i);if(t.showSelect)for(var s in i.defaultType=t.defaultType,i.showSelect=!0,requests)requests[s].status==REQ_PENDING&&requests[s].desc=="getting options: "+e&&"getOptions"==requests[s].cmd&&requests[s].data==serialize1D({stock:e})&&(requests[s].localData=i);ajaxRequest("getting options: "+e,"getOptions",{stock:e},getOptions_return,i)}}function sortChainOptions(t){return Object.keys(t).reduce((function(e,i){return"_data_source"===i||(e[8===i.length?i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2):i]={c:padStrikeKeys(t[i].c),p:padStrikeKeys(t[i].p)}),e}),{})}function padStrikeKeys(t){return Object.keys(t).sort((function(t,e){return parseFloat(t)-parseFloat(e)})).reduce((function(e,i){return e[parseFloat(i).toFixed(2)]=t[i],e}),{})}function getV3priceData(t,e,i){$.getJSON(V3_API_PATH+"/price/"+t,(function(t){if(t&&t.data&&"SUCCESS"!==!t.data.result){var s=sortChainOptions(t.data.options);getOptions_return(e,{status:REQ_OK,options:s}),i&&getPrice_return(e,{status:REQ_OK,price:t.data.stock})}}))}var opCache={};function getOptions_return(t,e){if($("#"+t.eleId+"-option .panel_button").removeClass("loading"),e.status==REQ_ERROR)opCache[t.stock]=REQ_ERROR,inputError(e.desc||"Options not found"),t.showSelect&&(inputError("Options not found for that symbol.","verbose"),_opcGaq.push(["_trackEvent","Options not found",t.stock]),$("#"+t.eleId+"-option_selector").dialog("close"));else if(e.status==REQ_OK){var i=t.stock;void 0!==e.symbol_correction&&($("#"+t.eleId+"-symbol").val(e.symbol_correction.toUpperCase()),i=e.symbol_correction.toUpperCase()),opCache[i]=sortChainOptions(e.options),t.showSelect&&optionSelect(t)}var s=t.eleId.slice(1,t.eleId.indexOf("e"));triggerListener("option_data",{tab_num:s,symbol:i})}function optionSelect(t){var e=$("#"+t.uEleId+"-symbol").val(),i=$("#"+t.uEleId+"-curPrice").val(),s=($("#"+t.eleId+"-strike").val(),$("#"+t.eleId+"-opType").val()),a=$("#"+t.eleId+"-act").val(),n=($("#"+t.eleId+"-expiry").val(),$("#"+t.eleId+"-option_selector"));if(""!==e){if(void 0!==viewStyle&&"mobile"===viewStyle){var o=$(window).width(),r=$(window).height();$(n).dialog("option",{width:o-5,height:r-5})}if(opCache[e]&&opCache[e]!==REQ_ERROR){$(n).html(loadingHtml);var l=optionsSelectCode({eleId:t.eleId,underlying_price:i,opType:s,opAct:a},opCache[e]);$(n).dialog("open"),n.html(l),initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,stock:e})}else opCache[e]==REQ_ERROR?inputError("Options not found for that symbol.","verbose"):t.showSelect||(getOptions({showSelect:!0,eleId:t.eleId,defaultType:t.defaultType,uEleId:t.uEleId}),$(n).dialog("open"))}else inputError('Enter an underlying symbol in the "Symbol" field above before trying to select options');return!1}var showAds_timeLeft,shownAds=!1,showAds_intId=!1,showAds_timeDur=5,min_adShow_time=2,loadCtr=$("#loading-ctnr");function doCalculation(t,e){0===loadCtr.length&&(loadCtr=$("#loading-ctnr")),$("body").hasClass("full")&&(showAds_timeDur=0,min_adShow_time=0),$(".field_error").removeClass("field_error");var i={};$.each($("#strat_"+t+" form").serializeArray(),(function(t,e){i[e.name]=e.value})),i.tabId=t;var s=validateCalcReq(e,i);if($("#t"+t+"_agree_tc").length>0&&void 0===$("#t"+t+"_agree_tc").attr("checked")&&(!1===s&&(s=[]),s.push("agree_tc_label")),s)inputError("Please complete the fields below..."),highlightValErrors(t,s);else if($("#t"+t+"_graph-newTab").attr("checked")){"undefined"!=typeof fromClose&&_opcGaq.push(["_trackEvent","Tabs","Re-calc in new tab"]);var a=ajaxRequest("calculating results","calculate",i,doCalculation_return,{tab_num:t});newTab(!1,a),$.scrollTo("#top_menu",500)}else $("#t"+t+"_submit").attr("disabled","disabled"),$("#t"+t+"_submit").attr("value","Calculating..."),$("#t"+t+"_graph-newTab_holder").css("display",""),$("#strat_"+t+" .results").hide(),showAds_timeLeft=showAds_timeDur,showAds_timeDur=Math.max(min_adShow_time,showAds_timeDur-1),$(".loading-wrapper",loadCtr).replaceWith(loadingHtml),loadCtr.show(),$.scrollTo("#load-anchor",500),shownAds=!0,showAds_timeLeft>0&&(loadCtr.addClass("load-timeout"),clearInterval(showAds_intId),showAds_intId=setInterval((function(){updateShowCountdown(t)}),1e3)),$(".popup").dialog("close"),$("#t"+t+"_graph").html(""),ajaxRequest("calcuating results","calculate",i,doCalculation_return,{tab_num:t})}function updateShowCountdown(t){showAds_timeLeft<=1?(clearInterval(showAds_intId),loadCtr.hasClass("load-timeout")?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t)):(showAds_timeLeft=Math.max(0,showAds_timeLeft-1),$("#loading-ctnr .showResultsBut .time-left").html("("+showAds_timeLeft+")"))}function validateCalcReq(t,e){var i=[];for(var s in e)""===e[s]&&(s.indexOf("-num")>0||s.indexOf("-strike")>0||s.indexOf("underlying-curPrice")>=0||s.indexOf("-expiry")>0||s.indexOf("-opType")>0||s.indexOf("-price")>0&&-1===s.indexOf("-priceMin")&&-1===s.indexOf("-priceMax"))&&(i[i.length]=s);return i.length>0&&i}function highlightValErrors(t,e){var i="";for(var s in e){if(e[s].indexOf("-strike")>0||e[s].indexOf("-opType")>0||e[s].indexOf("-expiry")>0)i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s].slice(0,e[s].lastIndexOf("-"))+'-option"] .panel_button';else i+=(s>0?", ":"")+"#strat_"+t+' [name="'+e[s]+'"]'}$(i).each((function(){$(this).addClass("field_error")}))}function hideLoaderShowGraph(t){loadCtr.hide(),$("#t"+t+"_submit").attr("value","Calculate"),$(".results").show()}function wrapInParensIfReq(t,e,i,s){if("("===e[0])return e;var a=i[0].toUpperCase()+i.substr(1),n=$("#t"+t+"_graph-price"+a).val();return"1"==s||""===n||n.length&&"("===n[0]?"(auto:"+e+")":e}function stripNonNumeric(t){return(""+t).replace(/\D\./g,"")}function doCalculation_return(t,e){$("#t"+t.tab_num+"_submit").removeAttr("disabled"),$("#t"+t.tab_num+"_graph-newTab_holder").css("display",""),$("#t"+t.tab_num+"_graph-priceMin").val(roundTo(stripNonNumeric(e.results.graph_priceMin),2)),$("#t"+t.tab_num+"_graph-priceMax").val(roundTo(stripNonNumeric(e.results.graph_priceMax),2)),$("#t"+t.tab_num+"_graph-rangeAuto").val(e.results.graph_rangeAuto?"1":"0");var i=loadCtr.hasClass("load-timeout");if(i?loadCtr.removeClass("load-timeout"):hideLoaderShowGraph(t.tab_num),null!=e.newTab){var s=$("#strat_"+t.tab_num+" .results"),a=$("#strat_"+t.tab_num);$("#strat_"+t.tab_num).attr("id","#strat_"+t.tab_num+"-old"),e.oldTab.tabId=t.tab_num,newTab_return(t,e.oldTab),$("#strat_"+t.tab_num+" .results").replaceWith(s),i&&$("#t"+e.newTab.tabId+"results").hide(),a.remove(),t.tab_num=e.newTab.tabId,newTab_return(t,e.newTab)}e.status==REQ_ERROR?(inputError(e.desc),$("#t"+t.tab_num+"_summary").html("")):e.status==REQ_OK&&(results[t.tab_num]=e.results,_opcGaq.push(["_trackEvent","Calculation: "+e.results.strat,e.results.underlying_symb,e.tab_desc_long.desc.substring(e.results.underlying_symb.length+1)]),$("#strat_"+t.tab_num+"_button .name").html(e.tab_desc.desc+"<br/><span class='minor'>"+e.tab_desc.type+"</span>"),showAds_timeLeft>2&&$("#loading-ctnr .loading").replaceWith("<a href='#' onclick='hideLoaderShowGraph("+t.tab_num+"); renderResults("+t.tab_num+"); return false;' class='showResultsBut'>Show results <span class='time-left'>("+showAds_timeLeft+")</span></a>"),renderResults(t.tab_num))}function renderResults(t){for(var e in $("#t"+t+"_summary").html("<h2>Estimated returns</h2>"+getSummary(results[t])+getSharingCode(t)),$("#t"+t+"_graph").html(renderGraph(results[t],t)),$("#strat_"+t+" .results").show(),results[t].vars)$("#strat_"+t+' [name="'+e+'"]').val(results[t].vars[e]);initResults(t),$.scrollTo("#t"+t+"_summary",500)}function getSharingCode(t){return"<div class='shareHolder'>\n  <span>Share this on:</span>\n  <div class='shareMenu'>\n    <a href='#' onclick='loadShare({type:\"fb\", tab_num:"+t+", link_ele:this}); return false;' title='Share this calculation on facebook' class='facebook shareIcon'>Facebook</a>\n    <a href='#' onclick='loadShare({type:\"tw\", tab_num:"+t+", link_ele:this}); return false;' title='Tweet this calculation on twitter' class='twitter shareIcon'>Tweet this</a>\n    or <a href='#' onclick='loadShare({type:\"link\", tab_num:"+t+", link_ele:this}); return false;' title='Short-link' class='link'>Get short-link to share</a>\n  </div>\n  <div class='sharePanel'></div>\n</div>"}function loadShare(t){if("link"==t.type){$(t.link_ele).parent().addClass("active").addClass(t.type);var e=$(".sharePanel",$(t.link_ele).parent().parent());e.show()}if(null!=results[t.tab_num].link_code)t.link_code=results[t.tab_num].link_code,
//!!! send request to update the saved tab
showShare(t);else if("link"==t.type){e.html("<P>"+getLoadingHtml("Getting link")+"</P>");ajaxRequest("getting share link","linkCode",{tab_num:t.tab_num},loadShare_return,t)}else window.open(WEB_PATH+"share.html?m="+t.type+"&t="+t.tab_num,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function loadShare_return(t,e){results[t.tab_num].link_code=e.link_code,$(t.addThis_ele).click(),t.link_code=e.link_code,showShare(t)}function showShare(t){var e,i=[["Check out this ",""],[""," is looking good"],["This "," is worth watching"],[""," worth keeping an eye on"],["Nice ",""]],s=Math.floor(Math.random()*i.length),a=i[s][0]+results[curTab].underlying_symb+" "+{"covered-call":"Covered Call","long-call":"Long call","short-call":"Naked call","long-put":"Long put","short-put":"Naked put","call-spread":"Call Spread","put-spread":"Put Spread","calendar-spread":"Calendar Spread",straddle:"Straddle",collar:"Collar","iron-condor":"Iron Condor",butterfly:"Butterfly"}[results[curTab].strat]+i[s][1],n=$(".sharePanel",$(t.link_ele).parent().parent());if("fb"==t.type?e="https://www.facebook.com/sharer.php?u="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code):"tw"==t.type?e="https://twitter.com/intent/tweet?status="+encodeURIComponent(a)+": "+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"+via+@opcalc&url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)+"&via=opcalc":"link"==t.type?n.html('<P>Copy this link to share via email, forums or other sharing services:</p><p><input type="text" style="font-weight:bold; width:100%;" value="'+BASE_SHORT_URL+WEB_PATH+t.link_code+'"/></p>'):"gg"==t.type&&(e="https://plus.google.com/share?url="+encodeURIComponent(BASE_SHORT_URL+WEB_PATH+t.link_code)),e)window.open(e,"share","width=650,height=400,left=100,top=100,scrollbars=yes,resizable=yes")}function avgPrice(t){var e,i=0;for(e=0;e<t.length;e++)i+=parseFloat(t[e]);return(Math.round(i/t.length*100)/100).toFixed(2)}function optionsSelectCode(t,e){var i,s=e,a=[],n="<div class='options_set_holder'>",o=$("#"+t.eleId+"-expiry").val(),r=!1;""==o&&(o=!0);var l=[];for(var h in s)l.push(h);l.sort();for(var d=0;d<l.length;d++)h=l[d],1==o||h==o?(r=(new Date).getTime()/1e3<timeFromYMD(h))?r=!0:(r=!1,o=!0):r=!1,""!==(i=10==h.length?dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",h)?"&\\nb\\sp;Y":""),h):7==h.length?dateFromYMD("M"+(date("y")!=dateFromYMD("y",h+"-15")?"&\\nb\\sp;Y":""),h+"-15"):"")&&a.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+(null==s[h]?" options_date_link_unfilled":"")+"' name=\""+h+'">'+i+"</a>"),null!=s[h]&&r?n+=optionsSelectMonthCode({sData:t,selectMonth:r,tDate:h,tDateData:s[h]}):n+="<div class='options_set "+(r?"options_set_active ":"")+h+"' name='"+h+"'>\r\n</div>",1==r&&(r=!1,o=!1);return n="<div class='dates'>"+a.join(" | ")+"</div>"+n+"</div>"}function optionsSelectMonthCode(t){var e="",i=t.selectMonth,s=t.tDate,a=t.tDateData,n=t.sData;e+="<div class='options_set "+(i?"options_set_active ":"")+s+"' name='"+s+"'>\r\n<p style='text-align: left; margin-bottom: 0.5em;' class='minor'>Options prices are delayed 15 minutes</p>\r\n<table cellspacing='0' cellpadding='0'><tbody>";var o,r={};function l(t){return Number(t).toFixed(2)}for(var h in e+='<tr class="type"><th colspan="3" align="center">Calls</th><th>&nbsp;</th><th colspan="3" align="center">Puts</th></tr><tr class="cols"><th>Bid</th><th>Mid</th><th>Ask</th><th class="s">Strike</th><th>Bid</th><th>Mid</th><th>Ask</th></tr>',a.c)o=in_array(a.c[h].b,["N",0,"0.00"])&&in_array(a.c[h].b,["N",0,"0.00"])?in_array(a.c[h].l,["N",0,"0.00"])?"N":a.c[h].l:avgPrice([a.c[h].b,a.c[h].a]),r[h]={c:"<td class='c"+("buy"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(a.c[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.c[h].b)+"</a>")+"</td><td class='c"+("p"!=n.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='c"+("sell"!=n.opAct&&"p"!=n.opType?" r":"")+"'>"+(in_array(a.c[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.c[h].a)+"</a>")+"</td>",p:""};for(h in a.p)null==r[h]&&(r[h]={p:""}),o=in_array(a.p[h].b,["N",0,"0.00"])&&in_array(a.p[h].b,["N",0,"0.00"])?in_array(a.p[h].l,["N",0,"0.00"])?"N":a.p[h].l:avgPrice([a.p[h].b,a.p[h].a]),r[h].p="<td class='p"+("buy"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(a.p[h].b,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.p[h].b)+"</a>")+"</td><td class='p"+("c"!=n.opType?" r m":"")+"'>"+("N"!=o?"<a href='#'>"+l(o)+"</a>":"-")+"</td><td class='p"+("sell"!=n.opAct&&"c"!=n.opType?" r":"")+"'>"+(in_array(a.p[h].a,["N",0,"0.00"])?"-":"<a href='#'>"+l(a.p[h].a)+"</a>")+"</td>",e+='<tr name="'+h+'" class="'+(parseFloat(h)<parseFloat(n.underlying_price)?"itm":"otm")+'">'+(r[h].c?r[h].c:"<td class='c'>-</td><td class='c'>-</td><td class='c'>-</td>")+"<td class='s'>"+h+"</td>"+(r[h].p?r[h].p:"<td class='p'>-</td><td class='p'>-</td><td class='p'>-</td>")+"</tr>";return e+="</tbody></table></div>"}function getBestPrice(t){return parseFloat(t.b)&&parseFloat(t.a)?(parseFloat(t.b)+parseFloat(t.a))/2:parseFloat(t.l)}function showOptions(t,e,i){if($(".options_set_active").removeClass("options_set_active").html("\n"),$(".options_date_link_active",$(e).parent()).removeClass("options_date_link_active"),$(e).addClass("options_date_link_active"),$(".options_set").hide(),null!==opCache[i.stock][t]){var s=$("#"+i.uEleId+"-curPrice").val(),a=$("#"+i.eleId+"-act").val(),n=$("#"+i.eleId+"-opType").val(),o={selectMonth:!0,tDate:t,tDateData:opCache[i.stock][t],sData:{eleId:i.eleId,opAct:a,opType:n,underlying_price:s}};$("."+t,$(e).parent().parent()).show().replaceWith(optionsSelectMonthCode(o))}else $("."+t,$(e).parent().parent()).show().html(loadingHtml);null!==opCache[i.stock][t]&&$("#"+i.eleId+"-option_selector .options_set[name='"+t+"'] td a").click((function(){return initOptionsSet(this,i)}))}function initOptionsSelector(t){var e=t.month?"[name='"+t.month+"']":"";$("#"+t.eleId+"-option_selector .options_date_link"+e).click((function(){return showOptions($(this).attr("name"),this,t),!1})),$("#"+t.eleId+"-option_selector .options_set"+e+" td a").click((function(){return initOptionsSet(this,t)})),$("#"+t.eleId+"-option_selector .options_date_link_unfilled").click((function(){var e=$(this).attr("name");getOptions({stock:t.stock,eleId:t.eleId,month:e,uEleId:t.uEleId}),$("#"+t.eleId+'-option_selector .options_set[name="'+e+'"]').html(loadingHtml)}))}function initOptionsSet(t,e){var i=$(t).text(),s=$(t).parent().parent().parent().parent().parent().attr("name"),a=$(t).parent().parent().attr("name"),n=$(t).parent().hasClass("c")?"c":$(t).parent().hasClass("p")?"p":null,o=getBestPrice(opCache[e.stock][s][n][a]);return null==n&&reportError("opType not Call (c) or Put (p)"),$("#"+e.eleId+"-opType").val(n),$("#"+e.eleId+"-price").val(i),$("#"+e.eleId+"-price").change(),$("#"+e.eleId+"-curPrice").val(o||i),$("#"+e.eleId+"-strike").val(a),$("#"+e.eleId+"-expiry").val(s),$("#"+e.eleId+"-opDesc").html(expDescFromYMD(s)+" $"+a+" "+("c"==n?"Call":"Put")),$("#"+e.eleId+"-option_selector").dialog("close"),triggerListener("option",{tab_num:curTab,ele_id:e.eleId}),!1}function getMonthsOptions_return(t,e){var i="",s=$("#"+t.uEleId+"-curPrice").val(),a=$("#"+t.eleId+"-opType").val(),n=$("#"+t.eleId+"-act").val();delete opCache[t.stock][t.month];var o,r=!0,l=[],h=[];for(var d in e.options)h.push(d);h.sort();for(var c=0;c<h.length;c++){var u=h[c];null!=e.options[u]&&"_"!==u.substr(0,1)&&(o=dateFromYMD("jS&\\nb\\sp;M"+(date("y")!=dateFromYMD("y",u)?"&\\nb\\sp;Y":""),u),l.push("<a href='#' class='options_date_link"+(r?" options_date_link_active":"")+"' name=\""+u+'">'+o+"</a> "),i+=optionsSelectMonthCode({sData:{eleId:t.eleId,underlying_price:s,opType:a,opAct:n},selectMonth:r,tDate:u,tDateData:e.options[u]}),opCache[t.stock][u]=e.options[u],r=!1)}for(u in $("#"+t.eleId+'-option_selector a[name="'+t.month+'"]').replaceWith(l.join(" | ")),$("#"+t.eleId+'-option_selector .options_set[name="'+t.month+'"]').replaceWith(i),e.options)null!=e.options[u]&&"_"!==u.substr(0,1)&&initOptionsSelector({eleId:t.eleId,uEleId:t.uEleId,month:u,stock:t.stock})}function renderRiskGraph(t,e){setTimeout((function(){renderRiskGraph_1(t,e)}),20)}function renderRiskGraph_1(t,e){var i,s,a=["header_place_holder"],n=results[e].underlying_current_price,o=-1e5,r=1e5,l=["#ff8888","#ffcc00","#88ff88","#66ffff","#8888ff","#ff66ff","#996666","#999944","#669966","#449999","#666699","#994499"];tHeader=["Strike"],header=!1,dataLine=[],dataStr="",colors=[],tColor=0,tColor2=0,tTimeLen=!1,graphTimeScale=!1,timeIndex=[],dataIdx=index_assoc_array(t.data),graphPriceMin=!1;var h=t.initial.g<0;h&&(tHeader.push("(Stock comparison)"),colors.push("#18357F"));var d=!1;for(var c in dataIdx)if(dataIdx.hasOwnProperty(c)){if(s=dataIdx[c],!1===graphPriceMin&&(graphPriceMin=parseFloat(s)),dataLine=[parseFloat(s)],h&&dataLine.push(parseFloat(roundTo(getDisValByType(t,-t.initial.g+(parseFloat(s)-n)*(-t.initial.g/n)),2))),i=0,!1===header){var u={};for(var p in t.data[s])t.data[s].hasOwnProperty(p)&&(u[date("Y",parseInt(t.start_date,10)+86400*p)]=1);Object.keys&&(Object.keys(u)||[]).length>1&&(d=!0)}for(var p in t.data[s])if(t.data[s].hasOwnProperty(p)){if(!1===tTimeLen){for(var f in t.data[s])t.data[s].hasOwnProperty(f)&&(tTimeLen<parseInt(f,10)||!1===tTimeLen)&&(tTimeLen=parseInt(f,10));tTimeLen/t.time_scale>10?graphTimeScale=t.time_scale*Math.ceil(tTimeLen/(10*t.time_scale)):graphTimeScale=1}if((tTimeLen-p)%graphTimeScale==0){!1===header&&(tHeader.push(date("j M"+(d?" y":""),parseInt(t.start_date,10)+86400*p)),colors.push(0==i?"#cccccc":l[(i-1)%l.length]),timeIndex.push(p));var g=parseFloat(roundTo(getDisValByType(t,t.data[s][p].g),2));dataLine.push(g),g>o&&(o=g),g<r&&(r=g),i++}}a.push(dataLine),!1===header&&(header=tHeader)}for(header.push("Current"),colors.push("#666666"),a.push([parseFloat(n)]),a[a.length-1][header.length-1]=r-.1*(o-r),a.push([parseFloat(n)]),a[a.length-1][header.length-1]=o+.1*(o-r),a[0]=header,c=1;c<a.length-2;c++)a[c][a[c].length]=null;for(c=1;c<a[0].length-1;c++)a[a.length-1][c]=null,a[a.length-2][c]=null;var m={};m[i-1]={lineWidth:2},h&&(m[0]={lineDashStyle:[6,4]});var _={colors:colors,lineWidth:1,series:m,reverseCategories:!1,chartArea:{width:d?"69%":"75%",left:90,top:20,height:"85%"},vAxis:{viewWindow:{max:o+.1*(o-r),min:r-.1*(o-r)},title:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"Dollars":"Percent",format:array_includes(["riskGraphPrice","riskGraphRawValue"],t.graph_type)?"$#,###.##":"#.##'%'",viewWindowMode:"maximized"},hAxis:{title:"Underlying price",format:"$#,###.##"}};if(array_includes(["price","riskGraphPrice","riskGraphRawValue"],t.graph_type)||(_.vAxis.minValue=-110),google&&google.visualization){var v=google.visualization.arrayToDataTable(a);for(c=0;c<timeIndex.length;c++)v.setColumnProperty(c+1,"time",timeIndex[c]);v.setColumnProperty(a[0].length-1,"current",!0),results[e].riskChartData=v,results[e].riskChart=new google.visualization.LineChart($("#t"+e+"_graph .google_chart_holder")[0]),google.visualization.events.addListener(results[e].riskChart,"select",(function(t){var i=results[e].riskChart.getSelection();if(i.length>0&&null!=i[0].row){var s=i[0];if(1==results[e].riskChartData.getColumnProperty(s.column,"current"))return!1;results[e].riskChartData[0];var a=results[e].riskChartData.getColumnLabel(s.column),n=results[e].riskChartData.getColumnProperty(s.column,"time"),o=roundTo(results[e].riskChartData.getValue(s.row,0),2,!0,!1);if($("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: $"+o+" on "+a),"mobile"==viewStyle){var r=$(window).width(),l=$(window).height();$("#t"+e+"_graph-detail").dialog("option",{width:r-5,height:l-5})}$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[o][n]))}})),results[e].riskChart.draw(v,_)}}function renderGraph(t,e){if(t.graph_type=checkForceGraphType(t.graph_type,t),"riskGraph"==t.graph_type.substr(0,9))var i='<div class="google_chart_holder" style="height:500px;"></div>\n      <script>\n      renderRiskGraph(results['+e+"], "+e+");\n      <\/script>";else{i='<table class="graph" cellpadding="1" cellspacing="0">';for(var s,a,n,o,r,l,h=0,d="",c="",u="",p=date("m",t.start_date),f=Object.keys(t.data).sort((function(t,e){var i=parseFloat(t),s=parseFloat(e);return i>s?-1:i<s?1:0})),g=0;g<f.length;g++){var m=f[g];0==h&&(a=[[t.start_date,0]],u="<tr><th>&nbsp;</th>");var _=null!=l&&l>t.underlying_current_price&&m<t.underlying_current_price?"curPriceAbove":roundTo(m,2)==roundTo(t.underlying_current_price,2)?"curPriceRow":"";n="<tr name='"+m+"'"+(""!=_?" class='"+_+"'":"")+"><th class='x'>"+m+"</th>";var v=Object.keys(t.data[m]),b=v[v.length-1];for(var y in t.data[m])0==h&&(o=parseInt(t.start_date,10)+86400*y,(r=date("m",o))==p?a[a.length-1][1]++:(a.push([o,1]),p=r),y==b?(u+='<th class="t z'+((a.length-1)%2+1)+'" name="'+y+'">Exp</th>',u+='<th class="pct">+/-%</th>'):u+='<th class="t z'+((a.length-1)%2+1)+'" name="'+y+'">'+date("j",o)+"</th>"),d=colorByDis(c=fmtNumToFit(getDisValByType(t,t.data[m][y].g)),t.data[m][y].g,t),s="",(c.length?c:c.toString()).length>=4&&(s+=" four_digit"),(c.length?c:c.toString()).length>=5&&(s+=" five_digit"),n+="<td name='t"+y+"-x"+m+"' class='d"+s+" "+d+"'>"+c+"</td>",y==b&&(n+='<td class="pct">'+roundTo(100*(m-t.underlying_current_price)/t.underlying_current_price,2,!0)+"%</td>"),l=m;if(0==h){for(var w in i+="<tr><th>&nbsp;</th>",a)a[w][1]>0&&(i+="<th colspan='"+a[w][1]+"' align='center' class='z"+(w%2+1)+"'>"+date("M",a[w][0])+"</th>");i+="</tr>",i+=u+="</tr>"}i+=n+="</tr>",h++}i+="</table><p><strong style='color:#400;'>Click on a figure</strong> for a breakdown of the trade's exit.</p>"}return i+="<div class='inputWrapper inputselect'><label class='inputLabel' for='t"+e+"_graphChanger-type'>Change output type:</label><span class='input'><select name='graph-typeChange' id='t"+e+"_graph-typeChange' class='input' onchange='changeOutputType(this);' >\t<optgroup label='Table'>\t<option value='roiRisk'"+("roiRisk"==t.graph_type?" selected":"")+">% of maximum risk</option>\t<option value='roiInit'"+("roiInit"==t.graph_type?" selected":"")+">% of entry cost</option>\t<option value='price'"+("price"==t.graph_type?" selected":"")+">Profit/loss (dollar value)</option>\t<option value='rawValue'"+("rawValue"==t.graph_type?" selected":"")+">Option/spread value</option>\t</optgroup>\t<optgroup label='Graph'>\t<option value='riskGraph'"+("riskGraph"==t.graph_type?" selected":"")+">% of maximum risk</option>\t<option value='riskGraphInit'"+("riskGraphInit"==t.graph_type?" selected":"")+">% of entry cost</option>\t<option value='riskGraphPrice'"+("riskGraphPrice"==t.graph_type?" selected":"")+">Profit/loss (dollar value)</option>\t\x3c!-- option value='riskGraphRawValue'"+("riskGraphRawValue"==t.graph_type?" selected":"")+">Option/spread value</--option--\x3e\t</optgroup></select><a href='#' onclick='alert(\"Changes how the trade is represented in the table or graph... \\n\\n% of maximum risk.: Percentage of the maximum risk of the trade, where -100 is the maximum risk, and 100 is 100% return compared to the maximum risk. \\n\\n% of entry: Percentage of the entry cost of the trade, where -100 is no return from your initial investment, and 100 is 100% return compared to the entry cost.  Note: if opening the trade results in a credit, % of maximum risk is used instead.\\n\\nDollar value: Profit or loss in net dollar value.\\n\\nOption/Spread value: shows the value of the purchased option, or the spread, without multiplying x100 for each contract.\");return false;' class='help'>?</a>\n</div>"}function changeOutputType(t){var e=initType=$(t).val();_opcGaq.push(["_trackEvent","Change Output type",e]),ajaxRequest("","updatePreferredDisplayType",{type:e},(function(){})),e=checkForceGraphType(e,results[curTab]),results[curTab].graph_type=e,$("#t"+curTab+"_graph-type").val(e),renderResults(curTab)}function updatePreferredDisplayType(t){t.value&&ajaxRequest("","updatePreferredDisplayType",{type:t.value},(function(){}))}function checkForceGraphType(t,e){return"u"!==e.summary.maxrisk.g&&e.summary.maxrisk.g+e.initial.g<0?"roiRisk"==t||"roiInit"==t&&e.initial.g>=0?t="roiRisk":("riskGraph"==t||"riskGraphInit"==t&&e.initial.g>=0)&&(t="riskGraph"):e.initial.g<0?"roiInit"==t||"roiRisk"==t?t="roiInit":"riskGraph"!=t&&"riskGraphInit"!=t||(t="riskGraphInit"):t="riskGraph"==t.substr(0,9)?"riskGraphPrice":"price",t}function getDisValByType(t,e){var i;return"rawValue"!=t.graph_type&&"riskGraphRawValue"!=t.graph_type||(i=e/100),"price"==t.graph_type||"riskGraphPrice"==t.graph_type?i=t.initial.g+e:"roiRisk"==t.graph_type||"riskGraph"==t.graph_type?i=100*(t.initial.g+e)/(-t.initial.g-t.summary.maxrisk.g):"roiInit"!=t.graph_type&&"riskGraphInit"!=t.graph_type||(i=100*(t.initial.g+e)/-t.initial.g),isNaN(i)?"N/A":i}function colorByDis(t,e,i){return"K"==(t+"").substr(t.length-1)&&(t=1e3*parseFloat(t.substr(0,t.length-1))),"price"==i.graph_type||"rawValue"==i.graph_type?"u"===i.summary.maxrisk.g?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.initial.g+i.summary.maxprofit.g)))):i.summary.maxrisk.g+i.initial.g>=0?"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(i.summary.maxprofit.g+i.initial.g)))):e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(20*(i.initial.g+e)/(-i.initial.g-i.summary.maxrisk.g)))):"roiRisk"==i.graph_type?e==i.summary.maxrisk.g?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):"roiInit"==i.graph_type?0==e?"maxRisk":"p"+Math.max(-100,Math.min(200,5*Math.round(t/5))):void 0}function getSummary(t){var e,i=t.summary;for(var s in t.risk)e=s;if("object"==typeof i.maxrisk.time&&i.maxrisk.time instanceof Array)var a=" on days "+descNumList(i.maxrisk.time);else if(i.maxrisk.time==e)a=" at expiry";else if(void 0!==i.maxrisk.time)a=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxrisk.time*60*24,-5);else a="";if("object"==typeof i.maxprofit.time&&i.maxprofit.time instanceof Array)var n=" on days "+descNumList(i.maxprofit.time);else if(i.maxprofit.time==e)n=" at expiry";else if(void 0!==i.maxprofit.time)n=" on day "+date("jS M Y",parseInt(t.start_date)+60*i.maxprofit.time*60*24,-5);else n="";var o=i.maxrisk.g>-t.initial.g,r="u"==i.maxrisk.g?"infinite on upside":("i"==i.maxrisk.p?formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+" on upside":"<span"+(o?' style="font-weight:bold;">+':">")+formatPrice(Math.abs(i.maxrisk.g+t.initial.g))+"</span> at a price of "+formatPrice(i.maxrisk.p)+a)+(i.maxrisk.g+t.initial.g>=0?'<br/><span class="minor">(calculator found no risk.  This can be due to low or high implied volatility, or out of date prices)</span>':"");o=i.maxprofit.g<-t.initial.g;var l="u"==i.maxprofit.g?"infinite on upside":("i"==i.maxprofit.p?formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+" on upside":"<span"+(o?' style="color:#F00;">-':">")+formatPrice(Math.abs(i.maxprofit.g+t.initial.g))+"</span> at a price of "+formatPrice(i.maxprofit.p)+n)+(i.maxprofit.g+t.initial.g<=0?'<br/><span class="minor">(calculator found no positive profit.  This can be due to low or high implied volatility, or out of date prices)</span>':""),h=!!(i.PoP||{}).pop,d=h?roundTo(100*(i.PoP||{}).pop,1)+"%":"";for(var s in t.breakeven);var c="$"+implode(", $",t.breakeven[s]),u='<span style="'+((o=t.initial.g<0)?"color:#900;":"font-weight:bold;")+'">'+formatPrice(Math.abs(t.initial.g))+"</span>"+(o?" (net debit)":" (net credit)");return"<h3>"+t.underlying_symb+" at $"+roundTo(t.underlying_current_price,2,!0)+" on "+date("jS M Y",t.start_date)+"</h3><p>Entry cost: "+u+" <a href='#' class='subtle initDetail' onclick='showInitDetails(this); return false;'>see details</a></p><p>Maximum risk: "+r+"</p><p>Maximum return: "+l+"</p><p>Breakevens at expiry: "+c+"</p>"+(h?"<p>Probability of profit: "+d+" <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>":"")}function showInitDetails(t){var e=$(t).parents(".stratContent").attr("id");if(e=e.substr(6,e.lastIndexOf("_")),$("#t"+e+"_graph-detail").html("").dialog("option","title","Detail: Entry cost"),"mobile"==viewStyle)$(window).width(),$(window).height();$("#t"+e+"_graph-detail").html("").dialog("open"),$("#t"+e+"_graph-detail").html(getCellSummary(e,results[e].initial,!0))}function graph_listen(t,e,i){"underlying_symbol"==t&&($("#t"+i.tab_num+"_graph-date").val("(today)"),$("#t"+i.tab_num+"_graph-priceMin").val(""),$("#t"+i.tab_num+"_graph-priceMax").val(""))}function initResults(t){$("#t"+t+"_graph").prepend('<div class="popup" id="t'+t+'_graph-detail"></div>');var e=$(window).width(),i=$(window).height(),s={autoOpen:!1,position:["right","top"],dialogClass:"mobile"==viewStyle?null:"detailPopup",title:"Detail",maxHeight:300,height:300>i?i:300,width:450>e?e:450,draggable:!0};"mobile"==viewStyle&&(s.width=e,s.height=i,s.position=["left","top"]),$("#t"+t+"_graph-detail").dialog(s),$("th.t:last-child").hover((function(){$(this).addClass("hover"),$(this).append("<div class='hover'>At&nbsp;expiry</div>")}),(function(){$(this).removeClass("hover"),$(".hover",this).remove()})),$("#t"+t+"_graph table td.d").each((function(){$(this).html("<div><a href='#' class='subtle'>"+$(this).html()+"</a></div>");var e=$(this).attr("name"),i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2);$(this).hover((function(){var t,e,a,n;$(this).addClass("hover");var o=results[curTab].graph_type.toLowerCase();e=o.indexOf("rawvalue")>=0?"$"+roundTo(results[curTab].data[s][i].g/100,2,!0):"$"+roundTo(results[curTab].data[s][i].g+results[curTab].initial.g,2,!0),a="number"==typeof(n=getDisValByType($.extend({},results[curTab],{graph_type:o.indexOf("price")>=0||o.indexOf("rawvalue")>=0?"roiRisk":results[curTab].graph_type}),results[curTab].data[s][i].g))?roundTo(n,Math.abs(n)<100?Math.abs(n)<10?2:1:0)+"%":n,t=o.indexOf("price")>=0?e+("N/A"!==a?"<br/>("+a+")":""):o.indexOf("rawvalue")>=0?e+"<br/>("+a+")":a+"<br/>("+e+")",$("a",this).append("<div class='hover'>"+t+"</div>")}),(function(){$(this).removeClass("hover");var t=e.substring(1,e.indexOf("-x")),i=e.substring(e.indexOf("-x")+2);$("a",this).html(fmtNumToFit(getDisValByType(results[curTab],results[curTab].data[i][t].g)))})),$("div a",this).click((function(){var i=e.substring(1,e.indexOf("-x")),s=e.substring(e.indexOf("-x")+2),a=parseInt(results[t].start_date,10)+86400*parseInt(i,10);return $("#t"+t+"_graph-detail").html("").dialog("option","title","Detail: $"+roundTo(s,2,1)+" on "+date("jS M Y",a)),$("#t"+t+"_graph-detail").html("").dialog("open"),$("#t"+t+"_graph-detail").html(getCellSummary(curTab,results[curTab].data[s][i])),!1}))}))}function getCellSummary(t,e,i){var s,a,n,o,r,l,h,d,c,u=[],p=0;if(null!=e.S)for(var f in e.S)h="buy"==(r=e.S[f]).a?-1:1,d=parseInt($("#strat_"+t+' [name="'+f+'-num"]').val()),l=null!=r.T?parseFloat(r.T):h*parseFloat(d)*c,c=null!=r.p?parseFloat(r.p):l/d,o=$("#strat_"+t+' [name="'+f+'-symbol"]').val(),p+=l,u.push([r.a,d,o+" stocks",roundTo(c,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.O)for(var f in e.O)h="buy"==(r=e.O[f]).a?-1:1,l=null!=r.T?parseFloat(r.T):h*parseFloat(r.n)*100*r.p,a=$("#strat_"+t+' [name="'+f+'-opType"]').val(),n=$("#strat_"+t+' [name="'+f+'-expiry"]').val(),s=dateFromYMD("j<\\s\\up>S</\\s\\up> M"+(dateFromYMD("Y",n)==date("Y")?"":" Y"),n)+" $"+r.X+" "+("c"==a?"Call":"Put"),p+=l,u.push([r.a,r.n+"x100",s,roundTo(r.p,2,!0,!1),roundTo(l,2,!0,!1)]);if(null!=e.C)for(var f in e.C){l=(r=e.C[f]).T;var g="buy"===r.a?"Cash held":"Cash released";p+=l,u.push([g,"","",void 0,roundTo(l,2,!0,!1)])}var m='<table class="trade_summary" cellpadding="1" cellspacing="0"><tr><th>Trades to '+(i?"open":"close")+" position</th><th>No.</th><th>Price</th><th>Total</th></tr>";for(f=0;f<u.length;f++)m+="<tr><td align='left'>"+ucFirst(u[f][0])+" "+u[f][2]+"</td><td align='right'>"+u[f][1]+"</td><td align='right'>"+(u[f][3]?"$"+u[f][3]:"")+"</td><td align='right'>$"+u[f][4]+"</td></tr>";if(m+=u.length>1?"<tr class='subtotal'><td align='left'>Total"+(i?"":" (closing trade)")+"</td><td colspan='3' align='right'>$"+roundTo(p,2,!0,!1)+"</td></tr>":"",!0!==i){var _=results[t].initial.g+p;m+="<tr class='init'><td align='left'>Entry cost</td><td colspan='3' align='right'>$"+roundTo(results[t].initial.g,2,!0,!1)+"</td></tr><tr class='total'><td align='left'>Total</td><td colspan='3' align='right'>$"+roundTo(_,2,!0,!1)+"</td></tr>"}return m+"</table>"}function fmtNumToFit(t){return isNaN(t)?"N/A":(t>=100||t<=-10?t=roundTo(t):t>=10||t>-10&&t<0?t=roundTo(t,1):t<10&&(t=roundTo(t,2)),t<=-1e3&&t>-1e4&&(t="<span class='neg'>-</span>"+-t),Math.abs(t)>=1e4&&(t=roundTo(t/1e3,1)+"K"),t)}function getLinkBut(t){return $(".linkBox",$(t).parent()).slideDown()}function closeLinkBox(t){return $(t).parent().slideUp()}function closeCurrentTabs(){$("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide(),$("#invisible_shield").unbind("click",closeCurrentTabs)}function add_opSelector_dialog(t){var e=$(window).width(),i=$(window).height(),s={autoOpen:!1,modal:!0,title:"Choose an option",open:function(){$(".ui-widget-overlay").fadeTo(0,.5).hide().fadeIn()},position:["right-25","center"],height:i-50,width:600>e?e:600,show:{effect:"fade",duration:200},hide:{effect:"fade",duration:200},beforeClose:function(t,e){}};"mobile"==viewStyle&&(s.width=e,s.height=i,s.show=null,s.hide=null,s.modal=!0,s.position=["left","top"]),$("#"+t+"-option_selector").dialog(s)}function ele_option_listen(t,e,i){if("underlying_symbol"==t)$("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-marketPrice").val(""),$("#"+i.ele_id+"-lastPrice").val(""),$("#"+i.ele_id+"-strike").val(""),$("#"+i.ele_id+"-expiry").val(""),$("#"+i.ele_id+"-option_selector").html(loadingHtml),$("#"+i.ele_id+"-opDesc").text(""),$("#"+i.ele_id+"-iv").val("(auto)"),getOptions({eleId:i.ele_id,uEleId:e.ele_id});else if("underlying_num"==t){var s=Math.round(parseInt($("#"+e.ele_id+"-num").val())/100);isNaN(s)&&(s=""),$("#"+i.ele_id+"-num").val(s)}else if("option_num"==t){if(null!=i.linked_ele&&i.linked_ele==e.ele_name)(i.strict||$("#"+i.ele_id+"-num").val()==i.default_num)&&$("#"+i.ele_id+"-num").val($("#"+e.ele_id+"-num").val()*i.link_ratio)}else"option"==t&&($("#"+i.ele_id+"-iv").val("(auto)"),""==$("#"+i.ele_id+"-expiry").val()&&$("#"+i.ele_id+"-expiry").val($("#"+e.ele_id+"-expiry").val()));if("option_price"==t||"option_num"==t){var a=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();if($("#"+e.ele_id+"-cost").val(isNaN(a)?"":commaVal(roundTo(100*a,2,!0))),triggerListener("option_cost",e),null!=i.linked_ele&&i.linked_ele==e.ele_name){a=$("#"+i.ele_id+"-num").val()*$("#"+i.ele_id+"-price").val();$("#"+i.ele_id+"-cost").val(isNaN(a)?"":commaVal(roundTo(100*a,2,!0)))}}}function ele_spread_listen(t,e,i){var s=0,a=!1;for(var n in i.op_ele_ids)s+=$("#"+i.op_ele_ids[n]+"-price").val()*($("#"+i.op_ele_ids[n]+"-num").val()||1)*("sell"==$("#"+i.op_ele_ids[n]+"-act").val()?1:-1),!1===a?a=$("#"+i.op_ele_ids[n]+"-num").val():a!==$("#"+i.op_ele_ids[n]+"-num").val()&&(a=-1);$("[for="+i.ele_id+"-spread]").text(-1===a?"Trade cost:":"Spread price:");var o=-1===a?100*s:s;$("#"+i.ele_id+"-spread").html(roundTo(o,2,!0)+" (net "+(s>=0?"credit":"debit")+")"),$("#"+i.ele_id+"-spread").css("color",s>=0?"black":"red")}function getElementCode_stockAndUnderlying_js(t,e,i){"underlying_symbol"==t&&($("#"+i.ele_id+"-price").val(""),$("#"+i.ele_id+"-curPrice").val(""),getPrice({eleId:i.ele_id,button:i.ele_id+"-loading"}),triggerListener("underlying_price",e)),triggerListener("underlying",e,i)}function ele_stock_listen(t,e,i){if("underlying_price"==t||"underlying_num"==t){var s=$("#"+e.ele_id+"-num").val()*$("#"+e.ele_id+"-price").val();$("#"+e.ele_id+"-cost").val(isNaN(s)?"":commaVal(roundTo(s,2,!0))),triggerListener("underlying_cost",e)}getElementCode_stockAndUnderlying_js(t,e,i)}function ele_underlying_listen(t,e,i){getElementCode_stockAndUnderlying_js(t,e,i)}function graph_price_range_listen(t,e,i){$("#t"+i.tab_num+"_graph-rangeAuto").val("0")}function finder_targetting_onchange(t){const e=t.value;$("[id^=tFe1_priceWrapper-]").hide();var i=$("#tFe1_priceWrapper-priceFrom"),s=$("#tFe1_priceWrapper-priceFrom .inputLabel"),a=$("#tFe1_priceWrapper-priceTo"),n=$("#tFe1_priceWrapper-priceTo .inputLabel");switch(e){case"range":return i.show(),a.show(),s.text("Price from:"),void n.text("Price to:");case"gt":return i.show(),void s.text("Higher than:");case"lt":return a.show(),void n.text("Lower than:");case"single":default:return i.show(),void s.text("Target price:")}}google&&google.load&&google.load("visualization","1",{packages:["corechart"]}),$(document).ready((function(){$(".touch #current_calc_header").click((function(){$("#tab_holder_tabs").hasClass("--show")?($("#tab_holder_tabs").removeClass("--show"),$("#invisible_shield").hide()):(setTimeout((function(){$("#invisible_shield").bind("click",closeCurrentTabs)}),10),$("#tab_holder_tabs").addClass("--show"),$("#invisible_shield").show())})),$("#strat_F").length&&$("#top_menu .id-optionFinder, #strat_F_button").click((function(){return $("#calcs_holder .jq_exclusive_target").hide(),$("#top_but-calculator").hide(),$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-optionFinder)").removeClass("--active"),$("#top_menu .dialog_tab.id-optionFinder").addClass("--active"),$("#tab_holder_tabs .dialog_tab").removeClass("dialog_tab_selected"),$("#strat_F_button").addClass("dialog_tab_selected"),setTimeout((function(){$("#strat_F").show()}),100),!1})),$(".id-calculator a").click((function(){$("#top_menu .dialog_tab").removeClass("dialog_tab_selected"),$("#top_menu .dialog_tab:not(.id-calculator)").removeClass("--active"),$("#top_menu .dialog_tab.id-calculator").addClass("--active")}))})),$(window).scroll((function(){if(void 0!==window.viewStyle&&"full"==viewStyle){var t=$(window).scrollTop(),e=$("#content_holder").offset().top;if(e<t){var i=$("#main").outerHeight(),s=$("#tab_holder").outerHeight(),a=t-e,n=i-s;if(a<n){$("#tab_holder").css({position:"fixed",top:"0"});var o=isTransitionalTheme();$("#content_holder").css({"margin-left":o?"168px":"170px","min-height":s+"px"})}else{var r=Math.min(a,n);$("#tab_holder").css({position:"relative",top:r}),$("#content_holder").css({"margin-left":"0"})}}else $("#tab_holder").css({position:"relative",top:"0"}),$("#content_holder").css({"margin-left":"0"})}return!0})),
/*! jQuery UI - v1.10.0 - 2013-02-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect.js, jquery.ui.effect-fade.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function i(e,i){var a,n,o,r=e.nodeName.toLowerCase();return"area"===r?(n=(a=e.parentNode).name,!(!e.href||!n||"map"!==a.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+n+"]")[0])&&s(o))):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r&&e.href||i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}var a=0,n=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each((function(){var s=this;setTimeout((function(){t(s).focus(),i&&i.call(s)}),e)})):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,a,n=t(this[0]);n.length&&n[0]!==document;){if(("absolute"===(s=n.css("position"))||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){n.test(this.id)&&t(this).removeAttr("id")}))}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(e,!a)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],(function(i,s){function a(e,i,s,a){return t.each(n,(function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)})),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each((function(){t(this).css(o,a(this,i)+"px")}))},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each((function(){t(this).css(o,a(this,e,!0,i)+"px")}))}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(t){t.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var a,n=t.ui[e].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(t,e,i){var s,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;s<a.length;s++)t.options[a[s][0]]&&a[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return e[s]>0||(e[s]=1,a=e[s]>0,e[s]=0,a)}}))}(jQuery),function(t,e){var i=0,s=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(t){}a(e)},t.widget=function(e,i,s){var a,n,o,r,l={},h=e.split(".")[0];e=e.split(".")[1],a=h+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[h]=t[h]||{},n=t[h][e],o=t[h][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(r=new i).options=t.widget.extend({},r.options),t.each(s,(function(e,s){t.isFunction(s)?l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},a=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,n=this._superApply;return this._super=t,this._superApply=a,e=s.apply(this,arguments),this._super=i,this._superApply=n,e}}():l[e]=s})),o.prototype=t.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix:e},l,{constructor:o,namespace:h,widgetName:e,widgetFullName:a}),n?(t.each(n._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)})),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var a,n,o=s.call(arguments,1),r=0,l=o.length;r<l;r++)for(a in o[r])n=o[r][a],o[r].hasOwnProperty(a)&&n!==e&&(t.isPlainObject(n)?i[a]=t.isPlainObject(i[a])?t.widget.extend({},i[a],n):t.widget.extend({},n):i[a]=n);return i},t.widget.bridge=function(i,a){var n=a.prototype.widgetFullName||i;t.fn[i]=function(o){var r="string"==typeof o,l=s.call(arguments,1),h=this;return o=!r&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,r?this.each((function(){var s,a=t.data(this,n);return a?t.isFunction(a[o])&&"_"!==o.charAt(0)?(s=a[o].apply(a,l))!==a&&s!==e?(h=s&&s.jquery?h.pushStack(s.get()):s,!1):void 0:t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")})):this.each((function(){var e=t.data(this,n);e?e.option(o||{})._init():t.data(this,n,new a(o,this))})),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var a,n,o,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(n=r[i]=t.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)n[a[o]]=n[a[o]]||{},n=n[a[o]];if(i=a.pop(),s===e)return n[i]===e?null:n[i];n[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,s){var a,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=a=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),t.each(s,(function(s,o){function r(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?n[o]:o).apply(n,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l=s.match(/^(\w+)\s*(.*)$/),h=l[1]+n.eventNamespace,d=l[2];d?a.delegate(d,h,r):i.bind(h,r)}))},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var a,n,o=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,a,n){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:e;"number"==typeof(a=a||{})&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),o&&t.effects&&t.effects.effect[r]?s[e](a):r!==e&&s[r]?s[r](a.duration,a.easing,n):s.queue((function(i){t(this)[e](),n&&n.call(s[0]),i()}))}}))}(jQuery),function(t,e){var i=!1;t(document).mouseup((function(){i=!1})),t.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var s=this,a=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(a&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){s.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(p.test(t[0])?e/100:1),parseInt(t[1],10)*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function a(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var n,o=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,d=/top|center|bottom/,c=/[\+\-]\d+%?/,u=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(undefined!==n)return n;var e,i,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return t("body").append(s),e=a.offsetWidth,s.css("overflow","scroll"),e===(i=a.offsetWidth)&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),a="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,n="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var n,p,g,m,_,v,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),D={};return v=a(b),b[0].preventDefault&&(e.at="left top"),p=v.width,g=v.height,m=v.offset,_=t.extend({},m),t.each(["my","at"],(function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=h.test(s[0])?s.concat(["center"]):d.test(s[0])?["center"].concat(s):["center","center"]),s[0]=h.test(s[0])?s[0]:"center",s[1]=d.test(s[1])?s[1]:"center",t=c.exec(s[0]),i=c.exec(s[1]),D[this]=[t?t[0]:0,i?i[0]:0],e[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]})),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?_.left+=p:"center"===e.at[0]&&(_.left+=p/2),"bottom"===e.at[1]?_.top+=g:"center"===e.at[1]&&(_.top+=g/2),n=i(D.at,p,g),_.left+=n[0],_.top+=n[1],this.each((function(){var a,h,d=t(this),c=d.outerWidth(),u=d.outerHeight(),f=s(this,"marginLeft"),v=s(this,"marginTop"),x=c+f+s(this,"marginRight")+w.width,C=u+v+s(this,"marginBottom")+w.height,T=t.extend({},_),I=i(D.my,d.outerWidth(),d.outerHeight());"right"===e.my[0]?T.left-=c:"center"===e.my[0]&&(T.left-=c/2),"bottom"===e.my[1]?T.top-=u:"center"===e.my[1]&&(T.top-=u/2),T.left+=I[0],T.top+=I[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),a={marginLeft:f,marginTop:v},t.each(["left","top"],(function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](T,{targetWidth:p,targetHeight:g,elemWidth:c,elemHeight:u,collisionPosition:a,collisionWidth:x,collisionHeight:C,offset:[n[0]+I[0],n[1]+I[1]],my:e.my,at:e.at,within:y,elem:d})})),e.using&&(h=function(t){var i=m.left-T.left,s=i+p-c,a=m.top-T.top,n=a+g-u,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:d,left:T.left,top:T.top,width:c,height:u},horizontal:s<0?"left":i>0?"right":"center",vertical:n<0?"top":a>0?"bottom":"middle"};p<c&&r(i+s)<p&&(l.horizontal="center"),g<u&&r(a+n)<g&&(l.vertical="middle"),o(r(i),r(s))>o(r(a),r(n))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),d.offset(t.extend(T,{using:h}))}))},t.ui.position={fit:{left:function(t,e){var i,s=e.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,r=t.left-e.collisionPosition.marginLeft,l=a-r,h=r+e.collisionWidth-n-a;e.collisionWidth>n?l>0&&h<=0?(i=t.left+l+e.collisionWidth-n-a,t.left+=l-i):t.left=h>0&&l<=0?a:l>h?a+n-e.collisionWidth:a:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,a=s.isWindow?s.scrollTop:s.offset.top,n=e.within.height,r=t.top-e.collisionPosition.marginTop,l=a-r,h=r+e.collisionHeight-n-a;e.collisionHeight>n?l>0&&h<=0?(i=t.top+l+e.collisionHeight-n-a,t.top+=l-i):t.top=h>0&&l<=0?a:l>h?a+n-e.collisionHeight:a:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,a=e.within,n=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,h=t.left-e.collisionPosition.marginLeft,d=h-l,c=h+e.collisionWidth-o-l,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];d<0?((i=t.left+u+p+f+e.collisionWidth-o-n)<0||i<r(d))&&(t.left+=u+p+f):c>0&&((s=t.left-e.collisionPosition.marginLeft+u+p+f-l)>0||r(s)<c)&&(t.left+=u+p+f)},top:function(t,e){var i,s,a=e.within,n=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,h=t.top-e.collisionPosition.marginTop,d=h-l,c=h+e.collisionHeight-o-l,u="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];d<0?(s=t.top+u+p+f+e.collisionHeight-o-n,t.top+u+p+f>d&&(s<0||s<r(d))&&(t.top+=u+p+f)):c>0&&(i=t.top-e.collisionPosition.marginTop+u+p+f-l,t.top+u+p+f>c&&(i>0||r(i)<c)&&(t.top+=u+p+f))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,a,n,o=document.getElementsByTagName("body")[0],r=document.createElement("div");for(n in e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"}),s)e.style[n]=s[n];e.appendChild(r),(i=o||document.documentElement).insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",a=t(r).offset().left,t.support.offsetFractions=a>10&&a<11,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each((function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")})),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i,s=this,a=!1,n=!1;for(t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(a=!0);return!(!a&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==s._trigger("stop",e)&&s._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").addBack().each((function(){this===e.target&&(i=!0)})),i},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]!==this.element[0]&&!/(fixed|absolute)/.test(s.css("position"))&&s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,a=this.options;if("parent"===a.containment&&(a.containment=this.helper[0].parentNode),"document"!==a.containment&&"window"!==a.containment||(this.containment=["document"===a.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===a.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===a.containment?0:t(window).scrollLeft())+t("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===a.containment?0:t(window).scrollTop())+(t("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||a.containment.constructor===Array)a.containment.constructor===Array&&(this.containment=a.containment);else{if(!(s=(i=t(a.containment))[0]))return;e="hidden"!==t(s).css("overflow"),this.containment=[(parseInt(t(s).css("borderLeftWidth"),10)||0)+(parseInt(t(s).css("paddingLeft"),10)||0),(parseInt(t(s).css("borderTopWidth"),10)||0)+(parseInt(t(s).css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(t(s).css("borderLeftWidth"),10)||0)-(parseInt(t(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(t(s).css("borderTopWidth"),10)||0)-(parseInt(t(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*s}},_generatePosition:function(e){var i,s,a,n,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName),h=e.pageX,d=e.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),o.grid&&(a=o.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,d=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-o.grid[1]:a+o.grid[1]:a,n=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),a=s.options,n=t.extend({},i,{item:s.element});s.sortables=[],t(a.connectToSortable).each((function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,n))}))},stop:function(e,i){var s=t(this).data("ui-draggable"),a=t.extend({},i,{item:s.element});t.each(s.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,a))}))},drag:function(e,i){var s=t(this).data("ui-draggable"),a=this;t.each(s.sortables,(function(){var n=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,t.each(s.sortables,(function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(o.instance.element[0],this.instance.element[0])&&(n=!1),n}))),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)}))}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),a=t(this).data("ui-draggable").options;s.css("opacity")&&(a._opacity=s.css("opacity")),s.css("opacity",a.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,a=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each((function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})}))},drag:function(e,i){var s,a,n,o,r,l,h,d,c,u,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)l=(r=p.snapElements[c].left)+p.snapElements[c].width,d=(h=p.snapElements[c].top)+p.snapElements[c].height,r-g<m&&m<l+g&&h-g<v&&v<d+g||r-g<m&&m<l+g&&h-g<b&&b<d+g||r-g<_&&_<l+g&&h-g<v&&v<d+g||r-g<_&&_<l+g&&h-g<b&&b<d+g?("inner"!==f.snapMode&&(s=Math.abs(h-b)<=g,a=Math.abs(d-v)<=g,n=Math.abs(r-_)<=g,o=Math.abs(l-m)<=g,s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=s||a||n||o,"outer"!==f.snapMode&&(s=Math.abs(h-v)<=g,a=Math.abs(d-b)<=g,n=Math.abs(r-m)<=g,o=Math.abs(l-_)<=g,s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||a||n||o||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||a||n||o||u):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=t(this).data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));s.length&&(e=parseInt(s[0].style.zIndex,10)||0,t(s).each((function(t){this.style.zIndex=e+t})),this[0].style.zIndex=e+s.length)}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),a=t(this).data("ui-draggable").options;s.css("zIndex")&&(a._zIndex=s.css("zIndex")),s.css("zIndex",a.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t,e){function i(t){return parseInt(t,10)||0}function s(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,a,n=this,o=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),(a=t("<div class='ui-resizable-handle "+("ui-resizable-"+s)+"'></div>")).css({zIndex:o.zIndex}),"se"===s&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(a);this._renderAxis=function(e){var i,s,a,n;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(a,n),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){n.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=a&&a[1]?a[1]:"se")})),o.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter((function(){o.disabled||(t(this).removeClass("ui-resizable-autohide"),n._handles.show())})).mouseleave((function(){o.disabled||n.resizing||(t(this).addClass("ui-resizable-autohide"),n._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,a=!1;for(i in this.handles)((s=t(this.handles[i])[0])===e.target||t.contains(s,e.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(e){var s,a,n,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=i(this.helper.css("left")),a=i(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,a+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s=this.helper,a={},n=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,h=this.size.width,d=this.size.height,c=e.pageX-n.left||0,u=e.pageY-n.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[e,c,u]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(a.top=this.position.top+"px"),this.position.left!==l&&(a.left=this.position.left+"px"),this.size.width!==h&&(a.width=this.size.width+"px"),this.size.height!==d&&(a.height=this.size.height+"px"),s.css(a),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(a)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,a,n,o,r,l,h=this.options,d=this;return this._helper&&(a=(s=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&t.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,n=s?0:d.sizeDiff.width,o={width:d.helper.width()-n,height:d.helper.height()-a},r=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,h.animate||this.element.css(t.extend(o,{top:l,left:r})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,a,n,o,r=this.options;o={minWidth:s(r.minWidth)?r.minWidth:0,maxWidth:s(r.maxWidth)?r.maxWidth:1/0,minHeight:s(r.minHeight)?r.minHeight:0,maxHeight:s(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,a=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),a>o.minHeight&&(o.minHeight=a),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),s(t.left)&&(this.position.left=t.left),s(t.top)&&(this.position.top=t.top),s(t.height)&&(this.size.height=t.height),s(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,a=this.axis;return s(t.height)?t.width=t.height*this.aspectRatio:s(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===a&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===a&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,a=s(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=s(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=s(t.width)&&e.minWidth&&e.minWidth>t.width,r=s(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),a&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&d&&(t.left=l-e.minWidth),a&&d&&(t.left=l-e.maxWidth),r&&c&&(t.top=h-e.minHeight),n&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?!t.width&&!t.height&&!t.top&&t.left&&(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,a,n=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(a=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],s=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);a.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,a=i._proportionallyResizeElements,n=a.length&&/textarea/i.test(a[0].nodeName),o=n&&t.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,r=n?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,d&&h?{top:d,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&t(a[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,s,a,n,o,r,l,h=t(this).data("ui-resizable"),d=h.options,c=h.element,u=d.containment,p=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;p&&(h.containerElement=t(p),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(p),s=[],t(["Top","Right","Left","Bottom"]).each((function(t,a){s[t]=i(e.css("padding"+a))})),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-s[3],width:e.innerWidth()-s[1]},a=h.containerOffset,n=h.containerSize.height,o=h.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:o,l=t.ui.hasScroll(p)?p.scrollHeight:n,h.parentData={element:p,left:a.left,top:a.top,width:r,height:l}))},resize:function(e){var i,s,a,n,o=t(this).data("ui-resizable"),r=o.options,l=o.containerOffset,h=o.position,d=o._aspectRatio||e.shiftKey,c={top:0,left:0},u=o.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(c=l),h.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-c.left),d&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),h.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),d&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-c.left+o.sizeDiff.width)),s=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-l.top)+o.sizeDiff.height),a=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),a&&n&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,d&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,d&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,a=e.containerPosition,n=e.containerElement,o=t(e.helper),r=o.offset(),l=o.outerWidth()-e.sizeDiff.width,h=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:r.left-a.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:r.left-a.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable").options,i=function(e){t(e).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})}))};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,(function(t){i(t)}))},resize:function(e,i){var s=t(this).data("ui-resizable"),a=s.options,n=s.originalSize,o=s.originalPosition,r={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each((function(){var e=t(this),a=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,(function(t,e){var i=(a[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)})),e.css(n)}))};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):t.each(a.alsoResize,(function(t,e){l(t,e)}))},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,a=e.originalSize,n=e.originalPosition,o=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,h=r[1]||1,d=Math.round((s.width-a.width)/l)*l,c=Math.round((s.height-a.height)/h)*h,u=a.width+d,p=a.height+c,f=i.maxWidth&&i.maxWidth<u,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>u,_=i.minHeight&&i.minHeight>p;i.grid=r,m&&(u+=l),_&&(p+=h),f&&(u-=l),g&&(p-=h),/^(se|s|e)$/.test(o)?(e.size.width=u,e.size.height=p):/^(ne)$/.test(o)?(e.size.width=u,e.size.height=p,e.position.top=n.top-c):/^(sw)$/.test(o)?(e.size.width=u,e.size.height=p,e.position.left=n.left-d):(e.size.width=u,e.size.height=p,e.position.top=n.top-c,e.position.left=n.left-d)}})}(jQuery),function(t,e){var i,s,a,n,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout((function(){e.button("refresh")}),1)},h=function(e){var i=e.name,s=e.form,a=t([]);return i&&(i=i.replace(/'/g,"\\'"),a=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter((function(){return!this.form}))),a};t.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,r=this.options,d="checkbox"===this.type||"radio"===this.type,c=d?"":"ui-state-active",u="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){r.disabled||this===i&&t(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){r.disabled||t(this).removeClass(c)})).bind("click"+this.eventNamespace,(function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){e.buttonElement.addClass(u)})).bind("blur"+this.eventNamespace,(function(){e.buttonElement.removeClass(u)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){n||e.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(t){r.disabled||(n=!1,s=t.pageX,a=t.pageY)})).bind("mouseup"+this.eventNamespace,(function(t){r.disabled||s===t.pageX&&a===t.pageY||(n=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||n)return!1})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];h(i).not(i).map((function(){return t(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(r.disabled)return!1;t(this).addClass("ui-state-active"),i=this,e.document.one("mouseup",(function(){i=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(r.disabled)return!1;t(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(e){if(r.disabled)return!1;(e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,(function(){t(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()}))),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?h(this.element[0]).each((function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,a=s.primary&&s.secondary,n=[];s.primary||s.secondary?(this.options.text&&n.push("ui-button-text-icon"+(a?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(n.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):n.push("ui-button-text-only"),e.addClass(n.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).delegate(i,"mouseover",(function(){t.datepicker._isDisabledDatepicker(n.inline?e.parent()[0]:n.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}))}function a(e,i){for(var s in t.extend(e,i),i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.0"}});var n,o="datepicker",r=(new Date).getTime();t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,a,n;a="div"===(s=e.nodeName.toLowerCase())||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(n=this._newInst(t(e),a)).settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,n):a&&this._inlineDatepicker(e,n)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,o,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,a,n,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(s=this._get(i,"showOn"))||"both"===s)&&e.focus(this._showDatepicker),"button"!==s&&"both"!==s||(a=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:n,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(n?t("<img/>").attr({src:n,alt:a,title:a}):a)),e[r?"before":"after"](i.trigger),i.trigger.click((function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,a,n=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(i=0,s=0,a=0;a<t.length;a++)t[a].length>i&&(i=t[a].length,s=a);return s},n.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),t.input.attr("size",this._formatDate(t,n).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,r){var l,h,d,c,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],o,p)),a(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(h=document.documentElement.clientWidth,d=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(e){var i,s=t(e),a=t.data(e,o);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,o),"input"===i?(a.append.remove(),a.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,a=t(e),n=t.data(e,o);a.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,n.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((s=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,s,a=t(e),n=t.data(e,o);a.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,n.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((s=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,o)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,n){var o,r,l,h,d=this._getInst(i);if(2===arguments.length&&"string"==typeof s)return"defaults"===s?t.extend({},t.datepicker._defaults):d?"all"===s?t.extend({},d.settings):this._get(d,s):null;o=s||{},"string"==typeof s&&((o={})[s]=n),d&&(this._curInst===d&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max"),a(d.settings,o),null!==l&&o.dateFormat!==e&&o.minDate===e&&(d.settings.minDate=this._formatDate(d,l)),null!==h&&o.dateFormat!==e&&o.maxDate===e&&(d.settings.maxDate=this._formatDate(d,h)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),d),this._autoSize(d),this._setDate(d,r),this._updateAlternate(d),this._updateDatepicker(d))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,a,n=t.datepicker._getInst(e.target),o=!0,r=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return(a=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",n.dpDiv))[0]&&t.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,a[0]),(i=t.datepicker._get(n,"onSelect"))?(s=t.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[s,n])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(n,"stepBigMonths"):-t.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(n,"stepBigMonths"):+t.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,a=t.datepicker._getInst(e.target);if(t.datepicker._get(a,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||s<" "||!i||i.indexOf(s)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,s,n,o,r,l,h;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e)||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(n=(s=t.datepicker._get(i,"beforeShow"))?s.apply(e,[e,i]):{})&&(a(i.settings,n),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each((function(){return!(o|="fixed"===t(this).css("position"))})),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),h):i.dpDiv[l||"show"](l?h:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),t.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,n=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),a=s[1];e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!==document.activeElement&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null}),0))},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(e,i,s){var a=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?a-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&l>a?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+n>h&&h>n?Math.abs(n+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),a=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,s,a,n,r=this._curInst;!r||e&&r!==t.data(e,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),a=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,a):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,a),i||a(),this._datepickerShowing=!1,(n=this._get(r,"onClose"))&&n.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var a=t(e),n=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(n,i+("M"===s?this._get(n,"showCurrentAtPos"):0),s),this._updateDatepicker(n))},_gotoToday:function(e){var i,s=t(e),a=this._getInst(s[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var a=t(e),n=this._getInst(a[0]);n["selected"+("M"===s?"Month":"Year")]=n["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(a)},_selectDay:function(e,i,s,a){var n,o=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((n=this._getInst(o[0])).selectedDay=n.currentDay=t("a",a).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,a=t(e),n=this._getInst(a[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),(s=this._get(n,"onSelect"))?s.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,a,n=this._get(e,"altField");n&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),a=this.formatDate(i,s,this._getFormatConfig(e)),t(n).each((function(){t(this).val(a)})))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var a,n,o,r,l=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),c=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,u=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=a+1<e.length&&e.charAt(a+1)===t;return i&&a++,i},w=function(t){var e=y(t),s=new RegExp("^\\d{1,"+("@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2)+"}"),a=i.substring(l).match(s);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(e,s,a){var n=-1,o=t.map(y(e)?a:s,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(o,(function(t,e){var s=e[1];if(i.substr(l,s.length).toLowerCase()===s.toLowerCase())return n=e[0],l+=s.length,!1})),-1!==n)return n+1;throw"Unknown name at position "+l},D=function(){if(i.charAt(l)!==e.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<e.length;a++)if(b)"'"!==e.charAt(a)||y("'")?D():b=!1;else switch(e.charAt(a)){case"d":_=w("d");break;case"D":k("D",c,u);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":g=(r=new Date(w("@"))).getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":g=(r=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?D():b=!0;break;default:D()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=d?0:-100)),v>-1)for(m=1,_=v;;){if(_<=(n=this._getDaysInMonth(g,m-1)))break;m++,_-=n}if((r=this._daylightSavingAdjust(new Date(g,m-1,_))).getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var s,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=s+1<t.length&&t.charAt(s+1)===e;return i&&s++,i},h=function(t,e,i){var s=""+e;if(l(t))for(;s.length<i;)s="0"+s;return s},d=function(t,e,i,s){return l(t)?s[e]:i[e]},c="",u=!1;if(e)for(s=0;s<t.length;s++)if(u)"'"!==t.charAt(s)||l("'")?c+=t.charAt(s):u=!1;else switch(t.charAt(s)){case"d":c+=h("d",e.getDate(),2);break;case"D":c+=d("D",e.getDay(),a,n);break;case"o":c+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=h("m",e.getMonth()+1,2);break;case"M":c+=d("M",e.getMonth(),o,r);break;case"y":c+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?c+="'":u=!0;break;default:c+=t.charAt(s)}return c},_possibleChars:function(t){var e,i="",s=!1,a=function(i){var s=e+1<t.length&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;e<t.length;e++)if(s)"'"!==t.charAt(e)||a("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),n=a,o=this._getFormatConfig(t);try{n=this.parseDate(i,s,o)||a}catch(t){s=e?"":s}t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),t.currentDay=s?n.getDate():0,t.currentMonth=s?n.getMonth():0,t.currentYear=s?n.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var a=null==i||""===i?s:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=s.getFullYear(),n=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":n+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,n));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,n))}l=r.exec(i)}return new Date(a,n,o)}(i):"number"==typeof i?isNaN(i)?s:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(a=a&&"Invalid Date"===a.toString()?s:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,a=t.selectedMonth,n=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),(a!==t.selectedMonth||n!==t.selectedYear)&&!i&&this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(s,-i,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(s,+i,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(s)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,s,a,n,o,r,l,h,d,c,u,p,f,g,m,_,v,b,y,w,k,D,x,C,T,I,M,$,P,S,z,E,F,N,O,R,A,H,W=new Date,L=this._daylightSavingAdjust(new Date(W.getFullYear(),W.getMonth(),W.getDate())),Y=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),B=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),G=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),V=1!==U[0]||1!==U[1],Q=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-G,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=X&&e<X?X:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",a=this._get(t,"nextText"),a=K?this.formatDate(a,this._daylightSavingAdjust(new Date(tt,Z+q,1)),this._getFormatConfig(t)):a,n=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>",o=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?Q:L,o=K?this.formatDate(o,r,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":l)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,c=this._get(t,"showWeek"),u=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;k<U[0];k++){for(D="",this.maxRows=4,x=0;x<U[1];x++){if(C=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",I="",V){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(x){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(Y?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?Y?n:s:"")+(/all|right/.test(T)&&0===k?Y?s:n:"")+this._generateMonthYearHeader(t,Z,tt,X,J,k>0||x>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)M+="<th"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[$=(w+d)%7]+"'>"+p[$]+"</span></th>";for(I+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),S=(this._getFirstDayOfMonth(tt,Z)-d+7)%7,z=Math.ceil((S+P)/7),E=V&&this.maxRows>z?this.maxRows:z,this.maxRows=E,F=this._daylightSavingAdjust(new Date(tt,Z,1-S)),N=0;N<E;N++){for(I+="<tr>",O=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(F)+"</td>":"",w=0;w<7;w++)R=m?m.apply(t.input?t.input[0]:null,[F]):[!0,""],H=(A=F.getMonth()!==Z)&&!v||!R[0]||X&&F<X||J&&F>J,O+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(F.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===F.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!_?"":" "+R[1]+(F.getTime()===Q.getTime()?" "+this._currentClass:"")+(F.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(A&&!_||!R[2]?"":" title='"+R[2]+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(A&&!_?"&#xa0;":H?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===L.getTime()?" ui-state-highlight":"")+(F.getTime()===Q.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);I+=O+"</tr>"}++Z>11&&(Z=0,tt++),D+=I+="</tbody></table>"+(V?"</div>"+(U[0]>0&&x===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=D}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,a,n,o,r){var l,h,d,c,u,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(n||!m)y+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=a&&a.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=s.getMonth())&&(!h||d<=a.getMonth())&&(y+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+r[d]+"</option>");y+="</select>"}if(v||(b+=y+(!n&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",n||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e})(c[0]),g=Math.max(f,p(c[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=a?Math.min(g,a.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!n&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),a=t.drawMonth+("M"===i?e:0),n=Math.min(t.selectedDay,this._getDaysInMonth(s,a))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,a,n)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),a=i&&e<i?i:e;return s&&a>s?s:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var a=this._getNumberOfMonths(t),n=this._daylightSavingAdjust(new Date(i,s+(e<0?e:a[0]*a[1]),1));return e<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(t,n)},_isInRange:function(t,e){var i,s,a=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10)+s,r=parseInt(i[1],10)+s),(!a||e.getTime()>=a.getTime())&&(!n||e.getTime()<=n.getTime())&&(!o||e.getFullYear()>=o)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.0",window["DP_jQuery_"+r]=t}(jQuery),function(t,e){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){this._isOpen?this._moveToTop()&&this._focusTabbable():(this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement;this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),a=i.filter(":last");e.target!==a[0]&&e.target!==this.uiDialog[0]||e.shiftKey?(e.target===s[0]||e.target===this.uiDialog[0])&&e.shiftKey&&(a.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,(function(i,s){var a,n;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),a=s.click,s.click=function(){a.apply(e.element[0],arguments)},n={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(n).appendTo(e.uiButtonSet)})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,a){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",s,e(a))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(a,n){s.position=[n.position.left-i.document.scrollLeft(),n.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",a,e(n))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,a=s.resizable,n=this.uiDialog.css("position"),o="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,a){t(this).addClass("ui-dialog-resizing"),i._trigger("resizeStart",s,e(a))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(a,n){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._trigger("resizeStop",a,e(n))}}).css("position",n)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var a=this,n=!1,o={};t.each(e,(function(t,e){a._setOption(t,e),t in i&&(n=!0),t in s&&(o[t]=e)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,a=this.uiDialog;"dialogClass"===t&&a.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=a.is(":data(ui-draggable)"))&&!e&&a.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((s=a.is(":data(ui-resizable)"))&&!e&&a.resizable("destroy"),s&&"string"==typeof e&&a.resizable("option","handles",e),!s&&!1!==e&&this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&(t.ui.dialog.overlayInstances||this._delay((function(){t.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(e){t(e.target).closest(".ui-dialog").length||(e.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})})),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),t.ui.dialog.overlayInstances=0,!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],a=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(s=i.split?i.split(" "):[i[0],i[1]]).length&&(s[1]=s[0]),t.each(["left","top"],(function(t,e){+s[t]===s[t]&&(a[t]=s[t],s[t]=e)})),i={my:s[0]+(a[0]<0?a[0]:"+"+a[0])+" "+s[1]+(a[1]<0?a[1]:"+"+a[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),jQuery.effects||function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:s.max<t?s.max:t)}function s(e){var i=l(),s=i._rgba=[];return e=e.toLowerCase(),p(r,(function(t,a){var n,o=a.re.exec(e),r=o&&a.parse(o),l=a.space||"rgba";if(r)return n=i[l](r),i[h[l].cache]=n[h[l].cache],s=i._rgba=n._rgba,!1})),s.length?("0,0,0,0"===s.join()&&t.extend(s,n.transparent),i):n[e]}function a(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var n,o=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,a){return new t.Color.fn.parse(e,i,s,a)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},u=t("<p>")[0],p=t.each;u.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=u.style.backgroundColor.indexOf("rgba")>-1,p(h,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),l.fn=t.extend(l.prototype,{parse:function(a,o,r,d){if(a===e)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=t(a).css(o),o=e);var c=this,u=t.type(a),f=this._rgba=[];return o!==e&&(a=[a,o,r,d],u="array"),"string"===u?this.parse(s(a)||n._default):"array"===u?(p(h.rgba.props,(function(t,e){f[e.idx]=i(a[e.idx],e)})),this):"object"===u?(p(h,a instanceof l?function(t,e){a[e.cache]&&(c[e.cache]=a[e.cache].slice())}:function(e,s){var n=s.cache;p(s.props,(function(t,e){if(!c[n]&&s.to){if("alpha"===t||null==a[t])return;c[n]=s.to(c._rgba)}c[n][e.idx]=i(a[t],e,!0)})),c[n]&&t.inArray(null,c[n].slice(0,3))<0&&(c[n][3]=1,s.from&&(c._rgba=s.from(c[n])))}),this):void 0},is:function(t){var e=l(t),i=!0,s=this;return p(h,(function(t,a){var n,o=e[a.cache];return o&&(n=s[a.cache]||a.to&&a.to(s._rgba)||[],p(a.props,(function(t,e){if(null!=o[e.idx])return i=o[e.idx]===n[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return p(h,(function(i,s){e[s.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var s=l(t),a=s._space(),n=h[a],o=0===this.alpha()?l("transparent"):this,r=o[n.cache]||n.to(o._rgba),c=r.slice();return s=s[n.cache],p(n.props,(function(t,a){var n=a.idx,o=r[n],l=s[n],h=d[a.type]||{};null!==l&&(null===o?c[n]=l:(h.mod&&(l-o>h.mod/2?o+=h.mod:o-l>h.mod/2&&(o-=h.mod)),c[n]=i((l-o)*e+o,a)))})),this[a](c)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),a=l(e)._rgba;return l(t.map(i,(function(t,e){return(1-s)*a[e]+s*t})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(t,e){return null==t?e>2?1:0:t}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,a=t[1]/255,n=t[2]/255,o=t[3],r=Math.max(s,a,n),l=Math.min(s,a,n),h=r-l,d=r+l,c=.5*d;return e=l===r?0:s===r?60*(a-n)/h+360:a===r?60*(n-s)/h+120:60*(s-a)/h+240,i=0===h?0:c<=.5?h/d:h/(2-d),[Math.round(e)%360,i,c,null==o?1:o]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],n=t[3],o=s<=.5?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*a(r,o,e+1/3)),Math.round(255*a(r,o,e)),Math.round(255*a(r,o,e-1/3)),n]},p(h,(function(s,a){var n=a.props,r=a.cache,h=a.to,d=a.from;l.fn[s]=function(s){if(h&&!this[r]&&(this[r]=h(this._rgba)),s===e)return this[r].slice();var a,o=t.type(s),c="array"===o||"object"===o?s:arguments,u=this[r].slice();return p(n,(function(t,e){var s=c["object"===o?t:e.idx];null==s&&(s=u[e.idx]),u[e.idx]=i(s,e)})),d?((a=l(d(u)))[r]=u,a):l(u)},p(n,(function(e,i){l.fn[e]||(l.fn[e]=function(a){var n,r=t.type(a),l="alpha"===e?this._hsla?"hsla":"rgba":s,h=this[l](),d=h[i.idx];return"undefined"===r?d:("function"===r&&(a=a.call(this,d),r=t.type(a)),null==a&&i.empty?this:("string"===r&&((n=o.exec(a))&&(a=d+parseFloat(n[2])*("+"===n[1]?1:-1))),h[i.idx]=a,this[l](h)))})}))})),l.hook=function(e){var i=e.split(" ");p(i,(function(e,i){t.cssHooks[i]={set:function(e,a){var n,o,r="";if("transparent"!==a&&("string"!==t.type(a)||(n=s(a)))){if(a=l(n||a),!c.rgba&&1!==a._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(t){}a=a.blend(r&&"transparent"!==r?r:"_default")}a=a.toRgbaString()}try{e.style[i]=a}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}))},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],(function(i,s){e["border"+s+"Color"]=t})),e}},n=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,a=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,n={};if(a&&a.length&&a[0]&&a[a[0]])for(s=a.length;s--;)"string"==typeof a[i=a[s]]&&(n[t.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(n[i]=a[i]);return n}function s(e,i){var s,a,o={};for(s in i)a=i[s],e[s]!==a&&!n[s]&&(t.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a);return o}var a=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,n,o,r){var l=t.speed(n,o,r);return this.queue((function(){var n,o=t(this),r=o.attr("class")||"",h=l.children?o.find("*").addBack():o;h=h.map((function(){return{el:t(this),start:i(this)}})),(n=function(){t.each(a,(function(t,i){e[i]&&o[i+"Class"](e[i])}))})(),h=h.map((function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this})),o.attr("class",r),h=h.map((function(){var e=this,i=t.Deferred(),s=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()})),t.when.apply(t,h.get()).done((function(){n(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),l.complete.call(o[0])}))}))},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,s,a){return i?t.effects.animateClass.call(this,{add:e},i,s,a):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,s,a){return i?t.effects.animateClass.call(this,{remove:e},i,s,a):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,s,a,n,o){return"boolean"==typeof s||s===e?a?t.effects.animateClass.call(this,s?{add:i}:{remove:i},a,n,o):this._toggleClass(i,s):t.effects.animateClass.call(this,{toggle:i},s,a,n)},switchClass:function(e,i,s,a,n){return t.effects.animateClass.call(this,{add:i,remove:e},s,a,n)}})}(),function(){function s(e,i,s,a){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(a=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(a=s,s=i,i={}),t.isFunction(s)&&(a=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=a||i.complete,e}function a(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]}t.extend(t.effects,{version:"1.10.0",save:function(t,e){for(var s=0;s<e.length;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var a,n;for(n=0;n<s.length;n++)null!==s[n]&&((a=t.data(i+s[n]))===e&&(a=""),t.css(s[n],a))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:e.width(),height:e.height()},n=document.activeElement;try{n.id}catch(t){n=document.body}return e.wrap(s),(e[0]===n||t.contains(e[0],n))&&t(n).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(a),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,a){return a=a||{},t.each(i,(function(t,i){var n=e.cssUnit(i);n[0]>0&&(a[i]=n[0]*s+n[1])})),a}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(n)&&n.call(a[0]),t.isFunction(e)&&e()}var a=t(this),n=i.complete,r=i.mode;(a.is(":hidden")?"hide"===r:"show"===r)?s():o.call(a[0],i,s)}var i=s.apply(this,arguments),a=i.mode,n=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?a?this[a](i.duration,i.complete):this.each((function(){i.complete&&i.complete.call(this)})):!1===n?this.each(e):this.queue(n||"fx",e)},_show:t.fn.show,show:function(t){if(a(t))return this._show.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(a(t))return this._hide.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(a(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],(function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])})),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,i){e[i]=function(e){return Math.pow(e,t+2)}})),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}}))}()}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var s=t(this),a=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:a},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),$.ui.dialog.prototype._oldinit=$.ui.dialog.prototype._init,$.ui.dialog.prototype._init=function(){$(this.element).parent().css("position","fixed"),$(this.element).dialog("option",{resizeStop:function(t,e){var i=[Math.floor(e.position.left)-$(window).scrollLeft(),Math.floor(e.position.top)-$(window).scrollTop()];return $(t.target).parent().css("position","fixed"),$(t.target).dialog("option","position",i),!0}}),this._oldinit()};var OP_FINDER_ENDPOINT=V3_API_PATH+"/finder";function finder_getWriteVal(){var t=document.querySelector('input[name="tF_write"]:checked');return t&&"1"===t.value?1:0}function finder_find(){const t=$("#tF_submit");$(".finder_results").text("");var e=$("#tFe0-symbol").val(),i=$("#tFe0-curPrice").val(),s=$("#finder_priceDirection").val(),a=$("#tFe1_input_price-from").val(),n=$("#tFe1_input_price-to").val(),o=$("#tFe0-ivHist").val();"lt"===s&&(n=a,a="");var r=$("[name=finder_dateStyle]:checked").val(),l=$("#tFe1_input_date-date").val(),h=$("#tFe1_input_expiry-expiry").val(),d=$("#tFe1_input_cost-cost").val(),c={"option-purchase":"checked"===$("#finder-strat-option-purchase").attr("checked")||0===$("#finder-strat-option-purchase").length,"short-option":"checked"===$("#finder-strat-short-option").attr("checked"),"credit-spread":"checked"===$("#finder-strat-credit-spread").attr("checked"),"debit-spread":"checked"===$("#finder-strat-debit-spread").attr("checked")},u=finder_getWriteVal(),p=[];if(renderError(""),e||p.push("Please enter a symbol"),i||p.push("Please enter the current price"),a||n||p.push("Please enter expected price"),"date"!==r||l||p.push("Please enter expected date"),"date"===r||h||p.push("Please enter expected date"),p.length>0)renderError(" - "+p.join("<br/> - "));else{var f={symbol:e,targetting:s,priceFrom:a,priceTo:n,date:"date"===r?l:h,specificExpiry:"expiry"===r?"1":"0",currentPrice:i,ivHist:o,budgetCost:u?"":d,dataFormat:"v2",strategies:c,sell:u};$.getJSON(OP_FINDER_ENDPOINT,f,(function(t){finder_find_return(t,{sell:u})})),t.attr("disabled","disabled"),t.val("Finding...")}}function renderError(t){var e=$("#tFe1_results");e.html(""),e.append('<p class="txt_error">'+t+"</p>")}function renderIn_single_option_ele(t,e){t.append("<h3>"+e.title+": "+ucFirst(e.legsById.option.act)+" "+e.legsById.option.num+"x "+expDescFromYMD(e.legsById.option.expiry)+" "+formatPrice(e.legsById.option.strike)+" "+ucFirst(e.legsById.option.opType)+" @ "+formatPrice(e.legsById.option.price)+"</h3>")}function renderIn_spread_ele(t,e){t.append("<h3>"+e.title+": "+e.legsById.long.num+"x "+expDescFromYMD(e.legsById.long.expiry)+" "+e.legsById.long.strike+"/"+e.legsById.short.strike+" "+ucFirst(e.legsById.long.opType)+" @ "+formatPrice(e.legsById.long.price-e.legsById.short.price)+"</h3>")}function renderIn_summary(t,e){const i=e.init>0?"(credit)":"(debit)";t.append("<p>Entry cost: "+formatPrice(Math.abs(e.init))+" "+i+"</p>"),t.append('<p>Maximum risk<sup style="font-size: xx-small;">1</sup>: '+(null===e.maxRisk?"Infinite":formatPrice(Math.max(0,-e.maxRisk)))+"</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append('<p>Est. return<sup style="font-size: xx-small;">1</sup> at target price: '+formatPrice(e.net)+" ("+(e.netMargin?roundTo(100*e.roiMargin,1):roundTo(100*e.roiMaxRisk,1))+"%"+(e.netMargin?'<sup style="font-size: xx-small;">2</sup>':"")+")</p>"),e.netMargin&&t.append("<p>Est. net margin impact: "+formatPrice(e.netMargin)+"</p>"),t.append("<p>Probability of profit: "+(null===e.pop?"N/A":roundTo(Math.max(.99,100*e.pop),1)+"% <a href='#' onclick='alert(\"Probability of returning at least $0.01 at the time of expiry.  This figure is derived from 30 day Implied Volatility.\");return false;' class='help'>?</a></p>"))}var v2stratMap={"long-call":"long-call","long-put":"long-put","short-call":"short-call","short-put":"short-put","bearish-call-credit-spread":"credit-spread","bearish-put-debit-spread":"put-spread","bullish-call-debit-spread":"call-spread","bullish-put-credit-spread":"credit-spread"};function finder_add_and_open(t){finder_add_to_calcs(t,{thenShow:!0})}function finder_add_to_calcs(t,e){e||(e={thenShow:!1});var i=$("<span />",{class:"loading"}),s={show:e.thenShow,spanEle:i};i.text("Opening calculation..."),$("[data-outcome-id="+t+"] a.button").replaceWith(i);var a=((outcomes[t]||{}).vars||{}).strat||{},n={strat:v2stratMap[a.metadata.stratKey],"underlying-symbol":$("#tFe0-symbol").val(),"underlying-curPrice":$("#tFe0-curPrice").val(),"underlying-marketPrice":$("#tFe0-marketPrice").val(),"underlying-lastPrice":$("#tFe0-lastPrice").val(),"underlying-ivHist":$("#tFe0-ivHist").val(),"graph-rangeAuto":"1","graph-type":"roiRisk","graph-date":"(today)"};Object.keys(a.legsById).map((function(t){"option"===a.legsById[t].type&&(n[t+"-act"]=a.legsById[t].act,n[t+"-price"]=a.legsById[t].price,n[t+"-curPrice"]=a.legsById[t].curPrice,n[t+"-num"]=a.legsById[t].num,n[t+"-opType"]=a.legsById[t].opType[0],n[t+"-expiry"]=a.legsById[t].expiry,n[t+"-strike"]=a.legsById[t].strike,n[t+"-iv"]=a.legsById[t].iv)}));ajaxRequest("adding calculation","newTab",n,doFinder_newTab_return,{values:n,showCfg:s})}function doFinder_newTab_return(t,e){var i=Object.assign(t.values,{tabId:e.tabId,stratKey:t.values.strat});ajaxRequest("adding calculation","calculate",i,doFinder_calculation_return,{tabReturnData:e,showCfg:t.showCfg})}var outcomes,tabsFromFinder=[];function doFinder_calculation_return(t,e){t.showCfg.spanEle.text(" (added)"),t.showCfg.spanEle.removeClass("loading");var i=$("<a />",{class:"button button--outline smallButton"});i.text("Open calculation"),i.click((function(e){$("#strat_"+t.tabReturnData.tabId+"_button .jq_exclusive_switch_flash").click()})),t.showCfg.spanEle.prepend(i),tabsFromFinder[t.tabReturnData.tabId]=!0,newTab_return({},t.tabReturnData,t.showCfg),doCalculation_return({tab_num:t.tabReturnData.tabId},e)}function render_finder_results(t,e){var i=$("#tFe1_results");i.html(""),(outcomes=t||[]).length?(i.append('<h2 style="margin-bottom: 0.3em">Top 5 options</h2>'),i.append('<p style="margin-bottom: 1em" class="minor">Sorted by % ROI of max risk (or % ROI initial collateral, for naked options)</p>'),outcomes.map((function(t,e){var s=$("<div />",{class:"finder_result","data-outcome-id":e}),a=((t||{}).vars||{}).strat;a&&(["long-put","long-call","short-put","short-call"].indexOf(a.metadata.stratKey)>=0&&renderIn_single_option_ele(s,a),["bearish-call-credit-spread","bullish-put-credit-spread","bearish-put-debit-spread","bullish-call-debit-spread"].indexOf(a.metadata.stratKey)>=0&&renderIn_spread_ele(s,a),renderIn_summary(s,t),s.append('<p class="finder__add-class"><a href="#" class="button smallButton button--outline" onclick="finder_add_and_open('+e+'); return false;">View detailed estimates</a></p>'),s.appendTo(i))})),i.append('<p class="minor"><sup>1</sup>Subject to changes in Implied Volatility for options with time left til expiry.</p>')):i.append('<p class="txt_error">Could not find any profitable call or put options for that target price and date.</p>')}function finder_updateStratPref(t){setCookie("finder_strat_"+t.name,t.checked?"1":"0",{expiry_days:365}),t.name}function finder_changeTargetPrice(){var t=$("#tFe1_input_price-from").val(),e=$("#tFe0-curPrice").val(),i=$("#finder_priceDirection").val(),s=parseFloat(t)>parseFloat(e);if("eq"===i?$("#finder_priceDirection").addClass("selectPlaceholder"):$("#finder_priceDirection").removeClass("selectPlaceholder"),s&&"lt"===i||!s&&"gt"===i){var a=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),$("#finder-strat-short-option").attr("checked",!1).attr("disabled","disabled").parent().addClass("disabled"),setCookie("finder_strat_option-purchase",a,{expiry_days:365}),setCookie("finder_strat_short-option",n,{expiry_days:365})}else{a=getCookie("finder_strat_option-purchase"),n=getCookie("finder_strat_short-option");$("#finder-strat-option-purchase").attr("checked","0"!==a&&"checked").attr("disabled",!1).parent().removeClass("disabled"),$("#finder-strat-short-option").attr("checked","1"===n&&"checked").attr("disabled",!1).parent().removeClass("disabled")}$("#finder_long_opType").text(s?"call":"put"),$("#finder_short_opType").text(s?"put":"call")}function finder_find_return(t,e){const i=$("#tF_submit");i.attr("disabled",!1),i.val("Find options");var s=((t||{}).data||{}).outcomes;s?render_finder_results(s,e):addMsg("Options Finder is currently experiencing some issues")}function finder_options_loaded(t,e,i){var s=Object.keys(opCache[e.symbol]).filter((function(t){return"_data_source"!==t})),a=$("#tFe1_input_expiry-expiry");a[0].innerHTML='<option value="" disabled selected>Select</option>',s.forEach((function(t){a.append('<option value="'+t+'">'+t+"</option>")}))}function finder_changeDateType(t){$("input[name='finder_dateStyle'][value="+t+"]").click(),"expiry"===t?$("#tFe1_input_date-date").val(""):"date"===t&&$("#tFe1_input_expiry-expiry").val(""),$("#tFe1_input_date-date, #tFe1_input_expiry-expiry").addClass("appearDisabled"),$("#tFe1_input_"+t+"-"+t).removeClass("appearDisabled")}function finder_getDateFromExpiry(){$("#tFe1_input_date-date").val(""),finder_changeDateType("expiry")}function finder_resetExpiryDate(){$("#tFe1_input_expiry-expiry").val("")}function finder_clear_form(){($("#tFe0-symbol").val()||"").toUpperCase();$("#tFe1_input_price-from").val(""),$("#tFe1_input_date-date").val(""),finder_resetExpiryDate()}function finder_updatePreference(){var t=1===finder_getWriteVal();$("#tFe1_input_cost-cost").attr("disabled",t),t?$("#tF_budgetGroup").slideUp(100):$("#tF_budgetGroup").slideDown(100),setCookie("finderShortPreferred",t,{})}
